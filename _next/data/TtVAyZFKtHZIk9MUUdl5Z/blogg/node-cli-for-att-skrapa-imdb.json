{"pageProps":{"post":{"title":"Node-baserat CLI för att skrapa IMDb","date":"2017-09-01T00:00:00.000Z","summary":"Enkelt CLI för att få tag i viss information från IMDb genom att skrapa sajten.","body":{"raw":"\nFör ett tag sedan stod jag inför en uppgift som delvis gick ut på att använda filmer och tv-seriers IMDb ID:n. Att manuellt söka upp filmer i webbläsaren och kopiera ID:n från URLen vart fort tradigt... Node-baserat CLI to the rescue!\n\nFör den som inte vet vad ett IMDb ID är så är det kortfattat ett unikt identifieringsnummer för varje film, tv-serie, skådespelarare och så vidare. Dessa id:n används bland annat i URLen på följande sätt: `http://www.imdb.com/title/tt0411008/`. Strängen som börjar på **\"tt\"** är sjävla id:t. Just **tt0411008** är id:t för tv-serien Lost för övrigt.\n\nJag behövde alltså på ett smidigt sätt komma åt just de här numren och efter att ha gjort manuella sökningar på IMDbs hemsida ett ex antal gånger, klickat mig in på rätt sökresultat och kopierat id:t från URLen så kändes hela den processen väldigt tradig. Dags att effektivisera!\n\nDet här var dessutom ett utmärkt tillfälle att skapa ett Node-baserat CLI och lära mig lite mer om det då jag inte skapat så många sådana förut men är sedan tidigare relativt bekväm med Node och Javascript. Inte heller hade jag tidigare använt skrapning speciellt mycket med Javascrip.\n\n## Vad behöver CLI:t åtstakomma?\n\nInnan jag ens gjorde `git init` funderade jag över hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut för information och började fundera på vilka npm-paket som skulle kunna underlätta och göra CLI:t bättre.\n\nMin tanke var att CLI:t först skulle fråga användaren efter en söksträng att söka efter, göra en request till IMDb:s hemsida och sökresultat, skrapa den information som behövdes och spotta ut det i terminalen på ett överskådligt sätt. Jag tänkte mig att det främst handla om att skrapa fram titlar, årtal och självfallet IMDb ID:n.\n\n### Struktur\n\nDå jag i ett slags version 1.0.0 av CLI:t endast behöver ett enkelt sätt att komma åt IMDb ID:n skulle man lika gärna kunna skriva all kod i en och samma **index.js** fil. Men ska CLI:t längre fram kunna göra mer saker blir det lite svårt att skala projektet och bygga vidare på det så därför valde jag att dela upp CLI:t i två olika klasser och en **index.js**. Klasserna som skapades var en IMDb klass och en klass `queryHelper` för att genomföra lite manipulering av strängar.\n\n### NPM-paket\n\nJag anväde mig av följande npm-paket för att skapa mitt CLI:\n\n- [Chalk](https://www.npmjs.com/package/chalk) - För att sätta lite färg på bland annat `console.log`.\n- [Request](https://www.npmjs.com/package/request) - Ett enkelt sätt att göra http requests.\n- [Cheerio](https://www.npmjs.com/package/cheerio) - För att skrapa IMDbs hemsida med en jQuery-liknande syntax.\n- [Clear](https://www.npmjs.com/package/clear) - Ett paket vars enkla uppgift är att rensa terminalfönstret.\n- [Figlet](https://www.npmjs.com/package/figlet) - Ett paket för att enkelt skapa ascii-konst av text. CLI:t måste ju vara lite snyggt också.\n- [Inquirer](https://www.npmjs.com/package/inquirer) - Användes för att fråga användaren om söksträng och validera svaret.\n- [Ora](https://www.npmjs.com/package/ora) - Ett paket för att ge användaren lite feedback i form av en spinner undertiden som IMDb skrapas och sökresultatet samlas in.\n- [Table-master](https://www.npmjs.com/package/table-master) - Användes för att visa upp sökresultatet i en tabell.\n\n## Genomförande\n\nHur bygger man då ett Node-baserat CLI för att skrapa IMDb:s hemsida och visa upp resultatet? Jag tänkte här gå igenom steg för steg hur det skulle kunna se ut, förhoppningsvis utan att gå in i för noga detalj om allt.\n\nStarta projektet med en `npm init` för att skapa generera en **package.json** följt av en `git init`. Varför inte använda git liksom?\n\nInstallera därefter alla npm-paket som kommer att användas:\n\n```bash\n$ npm install --save chalk request cheerio clear figlet inquirer ora table-master\n```\n\nSkapa därefter en **index.js** fil som agerar själva utgångspunkten för CLI:t. De enda npm-paket som behövs i just denna fil är `clear` och `inquirer` då de övriga paketen främst kommer användas i ett senare skeda av IMDb klassen.\n\nFöljande kod finns i min **index.js**:\n\n```javascript:index.js showLineNumbers\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\nconst inputError = 'Please enter a query to search for...';\n\n// setup of question\nconst question = [\n  {\n    type: 'input',\n    name: 'searchString',\n    message: 'What do you want to search for?\\n',\n    validate: (value) => value.length ? true : inputError\n  }\n]\n\n// clear the terminal window\nclear();\n\n// display colorful IMDb header\nIMDb.displayHeader();\n\n// prompt the user for a search string\ninquirer.prompt(question).then((answer) => {\n  let query = new queryHelper(answer.searchString);\n  let result = new IMDb(query.getSanitizedQuery(), answer.searchString);\n  result.scrape();\n})\n\n```\n\nFörst och främst används `require` för att få in de npm-paket som används av filen, men även importeras de två klasserna som än så länge inte finns.\n\n`const question = [...]` deklarerar en fråga med en tillhörande validering. Om inte valideringen går igenom så skrivs `inputError` strängen ut i terminalen.\n\nDärefter rensas terminalfönstret på samma sätt som att själv skriva `clear` i terminalen.\nSedan kallas en statisk metod från IMDb klassen som av sitt namn kanske avslöjar vad den gör, men mer om metoden när jag går igenom min IMDb klass.\n\nLängst ner i filen skapas själva prompten med hjälp av `inquirer` där den tidigare question-arrayen skickas in och ett svar ges i ett promise.  \nInuti detta promise skapas först en ny instans av `queryHelper` klassen och en instans av IMDb klassen skapas med hjälp av en två parametrar:\n\n1. Den första parametern `query.getSanitizedQuer()` går ut på omvandla en sträng från \"Harry Potter\" till \"Harry+Potter\" då det formatet behövs senare när IMDbs webbplats skrapas.\n2. Den andra parametern `answer.searchString` är söksträngen som användaren matar in i orörd form, det vill säga exmpelvis \"Harry Potter\". Varför det är intressant att hålla kvar i originalsöksträngen kommer visa sig i själva IMDb klassen.\n\nMen innan vi går igenom själva IMDb klassen där själva tyngdlyften i det här CLI:t händer går vi igenom queryHelper klassen då den (i alla fall för version 1.0.0) är relativt liten.\n\n```javascript:queryHelper.js {7,8,9,11,12,13} showLineNumbers\nexports.queryHelper = class {\n  /**\n   * Creates an instance of queryHelper.\n   * @param {string} initialQuery\n   * @memberof queryHelper\n   */\n  constructor(initialQuery) {\n    this.query = initialQuery;\n  }\n  /**\n   * returns the query but sanitized\n   * replace all spaces with pluses\n   * @returns {string}\n   */\n  getSanitizedQuery() {\n    return this.query.replace(/ /g, '+');\n  }\n  /**\n   * Match IMDb ID's from hrefs\n   *\n   * @static\n   * @param {string} href\n   * @returns {string} containing IMDb ID\n   */\n  static getIMDbID(href) {\n    return href.match(/tt(.*)[0-9]/g).toString();\n  }\n};\n```\n\nKlassen består alltså av en konstruktor och två metoder. Den första metoden `getSanitizedQuery()` returnerar en söksträng där alla mellanrum i strängen har bytts ut mot plustecken. Den andra metoden `getIMDbID()` tar **href** som parameter och resturnerar själva IMDb ID:t från en URL. Den extraherar alltså **tt0411008** från **http://www.imdb.com/title/tt0411008/** Metoden är statisk därför att IMDb klassen använder sig av denna metod, men det fanns inget behov av att skapa en ny instans av `queryHelper` inuti IMDb klassen.\n\nSlutligen har vi kvar själva IMDb klassen **IMDb.js** som består av ett antal metoder.\n\nFörst så används require för att få in de övriga npm-paket som ännu inte använts, men också queryHelper klassen:\n\n```javascript:IMDb.js showLineNumbers\nconst request = require('request');\nconst cheerio = require('cheerio');\nconst ora = require('ora');\nconst tab = require('table-master');\nconst chalk = require('chalk');\nconst figlet = require('figlet');\n\nconst { queryHelper } = require('./queryHelper');\n```\n\nDärefter skapas och exporteras själva IMDb klassen med en konstruktor:\n\n```javascript:IMDb.js showLineNumbers\nexports.IMDb = class {\n\n  /**\n   * Creates an instance of IMDb.\n   * @param {string} query - search query that has been sanitized\n   * @param {string} originalQuery - The original search query\n  */\n  constructor(query, originalQuery) {\n    this.query = query;\n    this.originalQuery = originalQuery;\n    this.url = `http://www.imdb.com/search/title?title=${this.query}`;\n    this.results = [];\n    this.outputColor = chalk.hex('#f3ce13');\n  }\n}\n```\n\nKonstruktorn har två parametrar och det är alltså själva söksträngen i dess original och i den \"plussade\" formen. Därefter sätts `this.url` med hjälp av den plussade söksträngen som i en annan metod kommer användas för att göra en reuqest och skrapa IMDb.  \n`this.results` är en tom array som senare ska fyllas på med sökresultat och `this.outputColor` använder npm-paketet `chalk` för att spara ner IMDb:s gula färg som i en annan metod kommer användas för lite färgrannare utskrift i terminalen.\n\nDärefter innehåller klassen en statisk metod för att visa lite ascii-text. Metoden är statisk eftersom att den anropas i **index.js** innan en instans av själva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats går den inte att använda IMDbfärgen som deklarerats som `this.outputColor` i klassens konstruktor. Det kan ändå vara bra att ha denna färg sparad om den gula färgen skulle användas längre fram till andra saker också.\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Static method to display IMDB header for the CLI\n   *\n   */\n  static displayHeader() {\n    var imdbColor = chalk.hex('#f3ce13');\n    console.log(imdbColor(figlet.textSync('IMDb')));\n  }\n```\n\nFör att bygga ut `this.results` arrayen skapas ytterligare en metod på IMDb klassen som kan se ut på följande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Push to results array\n   *\n   * @param {any} title\n   * @param {any} year\n   * @param {any} imdbID\n   */\n  createSearchResult(title, year, imdbID) {\n    this.results.push({title, year, imdbID});\n  }\n```\n\nDenna metod använder `push` för att bygga ut arrayen med ett objekt som innehåller titel, årtal och IMDb ID.\n\nIMDb klassen innehåller sedan en något tung metod för att utföra själva skrapandet av IMDb och komma åt sökresultaten. Metoden går kort och gott ut på att göra en request till IMDb och loopa genom ett ex antal sökresultat och pusha dessa till `this.results`\n\n```javascript:IMDb.js showLineNumbers\n /**\n   * Perform the scrape of imdb to gather search results\n   *\n   */\n  scrape() {\n\n    const spinner = ora('Searching IMDb. Please wait...').start();\n    request(this.url, (error, response, body) => {\n\n      if (!error) {\n\n        let $ = cheerio.load(body);\n\n        $('.lister-item-header a').each((index, value) => {\n          // create variables to be pushed as search result\n          let title = $(value).text();\n          let year = $(value).next().text().replace(/\\D/g, '');\n          let imdbID = this.outputColor(queryHelper.getIMDbID($(value).attr('href')));\n\n          this.createSearchResult(title, year, imdbID);\n\n          // stop the loop after 15 items\n          return index < 14;\n        });\n\n        spinner.stop();\n        this.renderSearchResults();\n\n      } else {\n        spinner.stop();\n        console.log(`Program exit with error: ${error}`);\n      }\n    });\n  }\n```\n\nNågra nyckeldetaljer i den här metoden är att först och främst används `ora` npm-paketet för att starta en spinner som ger användaren lite feedback. Sökresultaten loopas genom med hjälp av `cheerio` och `$(.lister-item-header a).each()` där titlar, årtal och id:n sparas till `this.results` med hjälp av metoden `this.createSearchResult()`.\n\nNär loopen har stannat efter att de femton första sökresultaten har pushats till `this.results` stoppas spinnern med hjälp av `spinner.stop()` och en tabell med sökresultaten visas upp i terminalen med hjälp av metoden `this.renderSearchResults()`. Den metoden ser ut på följande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Render either a table with search results\n   * or a message of no search results were found\n   */\n  renderSearchResults() {\n    if (Object.keys(this.results).length === 0) {\n      console.log(chalk.red(`Could not find any search results for \"${this.originalQuery}\". Please try again.`));\n    } else {\n      console.table(this.results);\n    }\n  }\n```\n\nDenna metod kollar först om `this.results` är tom (inga sökresultat hittades) eller ej och antingen renderar en tabell med sökresultaten eller ger feedback om att inga sökresultat kunde hittas. Här används `this.originalQuery` som alltså exempelvis skulle motsvara `Harry Potter` och inte `Harry+Potter`.\n\n### Gör CLI:t körbart globalt\n\nFör att slippa skriva `node index.js` och hela tiden befinna sig i samma path som **index.js** finns det ett enkelt knep att göra det här CLI:t globalt tillgängligt genom att endast skriva exempelvis `imdb` i terminalen, oberoende vilken path man har.\n\nBörja med att uppgradera **package.json** med följande:\n\n```json:package.json\n  \"bin\": {\n    \"imdb\": \"./index.js\"\n  }\n```\n\nDetta binder kommandot `imdb` till att köra **index.js**. Lägg därefter till följande shebang högst upp i **index.js**:\n\n```javascript:index.js showLineNumbers\n#!/usr/bin/env node\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\n//........\n```\n\nInstallera därefter CLI:t globalt med hjälp av:\n\n```bash\n$ npm install -g\n```\n\nNu är CLI:t körbart globalt 🎉\n\nDet var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter sökresultat och IMDb ID:n. Det färdiga CLI:et finns på [GitHub](https://github.com/danielv14/imdb-cli)\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var b=(a,n,s)=>(s=a!=null?d(u(a)):{},i(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>i(l({},\"__esModule\",{value:!0}),a);var o=N((D,r)=>{r.exports=_jsx_runtime});var j={};g(j,{default:()=>w,frontmatter:()=>y});var e=b(o()),y={title:\"Node-baserat CLI f\\xF6r att skrapa IMDb\",summary:\"Enkelt CLI f\\xF6r att f\\xE5 tag i viss information fr\\xE5n IMDb genom att skrapa sajten.\",date:new Date(1504224e6)};function p(a){let n=Object.assign({p:\"p\",code:\"code\",strong:\"strong\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",ul:\"ul\",li:\"li\",pre:\"pre\",div:\"div\",br:\"br\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"F\\xF6r ett tag sedan stod jag inf\\xF6r en uppgift som delvis gick ut p\\xE5 att anv\\xE4nda filmer och tv-seriers IMDb ID:n. Att manuellt s\\xF6ka upp filmer i webbl\\xE4saren och kopiera ID:n fr\\xE5n URLen vart fort tradigt... Node-baserat CLI to the rescue!\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r den som inte vet vad ett IMDb ID \\xE4r s\\xE5 \\xE4r det kortfattat ett unikt identifieringsnummer f\\xF6r varje film, tv-serie, sk\\xE5despelarare och s\\xE5 vidare. Dessa id:n anv\\xE4nds bland annat i URLen p\\xE5 f\\xF6ljande s\\xE4tt: \",(0,e.jsx)(n.code,{children:\"http://www.imdb.com/title/tt0411008/\"}),\". Str\\xE4ngen som b\\xF6rjar p\\xE5 \",(0,e.jsx)(n.strong,{children:'\"tt\"'}),\" \\xE4r sj\\xE4vla id:t. Just \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" \\xE4r id:t f\\xF6r tv-serien Lost f\\xF6r \\xF6vrigt.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag beh\\xF6vde allts\\xE5 p\\xE5 ett smidigt s\\xE4tt komma \\xE5t just de h\\xE4r numren och efter att ha gjort manuella s\\xF6kningar p\\xE5 IMDbs hemsida ett ex antal g\\xE5nger, klickat mig in p\\xE5 r\\xE4tt s\\xF6kresultat och kopierat id:t fr\\xE5n URLen s\\xE5 k\\xE4ndes hela den processen v\\xE4ldigt tradig. Dags att effektivisera!\"}),`\n`,(0,e.jsx)(n.p,{children:\"Det h\\xE4r var dessutom ett utm\\xE4rkt tillf\\xE4lle att skapa ett Node-baserat CLI och l\\xE4ra mig lite mer om det d\\xE5 jag inte skapat s\\xE5 m\\xE5nga s\\xE5dana f\\xF6rut men \\xE4r sedan tidigare relativt bekv\\xE4m med Node och Javascript. Inte heller hade jag tidigare anv\\xE4nt skrapning speciellt mycket med Javascrip.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Vad beh\\xF6ver CLI:t \\xE5tstakomma?\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Innan jag ens gjorde \",(0,e.jsx)(n.code,{children:\"git init\"}),\" funderade jag \\xF6ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut f\\xF6r information och b\\xF6rjade fundera p\\xE5 vilka npm-paket som skulle kunna underl\\xE4tta och g\\xF6ra CLI:t b\\xE4ttre.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Min tanke var att CLI:t f\\xF6rst skulle fr\\xE5ga anv\\xE4ndaren efter en s\\xF6kstr\\xE4ng att s\\xF6ka efter, g\\xF6ra en request till IMDb:s hemsida och s\\xF6kresultat, skrapa den information som beh\\xF6vdes och spotta ut det i terminalen p\\xE5 ett \\xF6versk\\xE5dligt s\\xE4tt. Jag t\\xE4nkte mig att det fr\\xE4mst handla om att skrapa fram titlar, \\xE5rtal och sj\\xE4lvfallet IMDb ID:n.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"struktur\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#struktur\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Struktur\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE5 jag i ett slags version 1.0.0 av CLI:t endast beh\\xF6ver ett enkelt s\\xE4tt att komma \\xE5t IMDb ID:n skulle man lika g\\xE4rna kunna skriva all kod i en och samma \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil. Men ska CLI:t l\\xE4ngre fram kunna g\\xF6ra mer saker blir det lite sv\\xE5rt att skala projektet och bygga vidare p\\xE5 det s\\xE5 d\\xE4rf\\xF6r valde jag att dela upp CLI:t i tv\\xE5 olika klasser och en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". Klasserna som skapades var en IMDb klass och en klass \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" f\\xF6r att genomf\\xF6ra lite manipulering av str\\xE4ngar.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"npm-paket\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#npm-paket\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NPM-paket\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag anv\\xE4de mig av f\\xF6ljande npm-paket f\\xF6r att skapa mitt CLI:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/chalk\",children:\"Chalk\"}),\" - F\\xF6r att s\\xE4tta lite f\\xE4rg p\\xE5 bland annat \",(0,e.jsx)(n.code,{children:\"console.log\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/request\",children:\"Request\"}),\" - Ett enkelt s\\xE4tt att g\\xF6ra http requests.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/cheerio\",children:\"Cheerio\"}),\" - F\\xF6r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/clear\",children:\"Clear\"}),\" - Ett paket vars enkla uppgift \\xE4r att rensa terminalf\\xF6nstret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/figlet\",children:\"Figlet\"}),\" - Ett paket f\\xF6r att enkelt skapa ascii-konst av text. CLI:t m\\xE5ste ju vara lite snyggt ocks\\xE5.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/inquirer\",children:\"Inquirer\"}),\" - Anv\\xE4ndes f\\xF6r att fr\\xE5ga anv\\xE4ndaren om s\\xF6kstr\\xE4ng och validera svaret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/ora\",children:\"Ora\"}),\" - Ett paket f\\xF6r att ge anv\\xE4ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och s\\xF6kresultatet samlas in.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/table-master\",children:\"Table-master\"}),\" - Anv\\xE4ndes f\\xF6r att visa upp s\\xF6kresultatet i en tabell.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"genomf\\xF6rande\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#genomf\\xF6rande\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Genomf\\xF6rande\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Hur bygger man d\\xE5 ett Node-baserat CLI f\\xF6r att skrapa IMDb:s hemsida och visa upp resultatet? Jag t\\xE4nkte h\\xE4r g\\xE5 igenom steg f\\xF6r steg hur det skulle kunna se ut, f\\xF6rhoppningsvis utan att g\\xE5 in i f\\xF6r noga detalj om allt.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Starta projektet med en \",(0,e.jsx)(n.code,{children:\"npm init\"}),\" f\\xF6r att skapa generera en \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" f\\xF6ljt av en \",(0,e.jsx)(n.code,{children:\"git init\"}),\". Varf\\xF6r inte anv\\xE4nda git liksom?\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter alla npm-paket som kommer att anv\\xE4ndas:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"--save\"}),\" chalk request cheerio \",(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),` figlet inquirer ora table-master\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Skapa d\\xE4refter en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil som agerar sj\\xE4lva utg\\xE5ngspunkten f\\xF6r CLI:t. De enda npm-paket som beh\\xF6vs i just denna fil \\xE4r \",(0,e.jsx)(n.code,{children:\"clear\"}),\" och \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE5 de \\xF6vriga paketen fr\\xE4mst kommer anv\\xE4ndas i ett senare skeda av IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6ljande kod finns i min \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inputError \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Please enter a query to search for...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// setup of question\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" question \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'input'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'searchString'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'What do you want to search for?\\\\n'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"validate\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` inputError\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"15\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// clear the terminal window\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"18\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"19\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// display colorful IMDb header\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// prompt the user for a search string\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"inquirer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"prompt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"question\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"answer\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" query \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"queryHelper\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"  result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"require\"}),\" f\\xF6r att f\\xE5 in de npm-paket som anv\\xE4nds av filen, men \\xE4ven importeras de tv\\xE5 klasserna som \\xE4n s\\xE5 l\\xE4nge inte finns.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"const question = [...]\"}),\" deklarerar en fr\\xE5ga med en tillh\\xF6rande validering. Om inte valideringen g\\xE5r igenom s\\xE5 skrivs \",(0,e.jsx)(n.code,{children:\"inputError\"}),\" str\\xE4ngen ut i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter rensas terminalf\\xF6nstret p\\xE5 samma s\\xE4tt som att sj\\xE4lv skriva \",(0,e.jsx)(n.code,{children:\"clear\"}),` i terminalen.\nSedan kallas en statisk metod fr\\xE5n IMDb klassen som av sitt namn kanske avsl\\xF6jar vad den g\\xF6r, men mer om metoden n\\xE4r jag g\\xE5r igenom min IMDb klass.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"L\\xE4ngst ner i filen skapas sj\\xE4lva prompten med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE4r den tidigare question-arrayen skickas in och ett svar ges i ett promise.\",(0,e.jsx)(n.br,{}),`\n`,\"Inuti detta promise skapas f\\xF6rst en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" klassen och en instans av IMDb klassen skapas med hj\\xE4lp av en tv\\xE5 parametrar:\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Den f\\xF6rsta parametern \",(0,e.jsx)(n.code,{children:\"query.getSanitizedQuer()\"}),' g\\xE5r ut p\\xE5 omvandla en str\\xE4ng fr\\xE5n \"Harry Potter\" till \"Harry+Potter\" d\\xE5 det formatet beh\\xF6vs senare n\\xE4r IMDbs webbplats skrapas.']}),`\n`,(0,e.jsxs)(n.li,{children:[\"Den andra parametern \",(0,e.jsx)(n.code,{children:\"answer.searchString\"}),' \\xE4r s\\xF6kstr\\xE4ngen som anv\\xE4ndaren matar in i or\\xF6rd form, det vill s\\xE4ga exmpelvis \"Harry Potter\". Varf\\xF6r det \\xE4r intressant att h\\xE5lla kvar i originals\\xF6kstr\\xE4ngen kommer visa sig i sj\\xE4lva IMDb klassen.']}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Men innan vi g\\xE5r igenom sj\\xE4lva IMDb klassen d\\xE4r sj\\xE4lva tyngdlyften i det h\\xE4r CLI:t h\\xE4nder g\\xE5r vi igenom queryHelper klassen d\\xE5 den (i alla fall f\\xF6r version 1.0.0) \\xE4r relativt liten.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"queryHelper.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queryHelper\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of queryHelper.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@memberof\"}),` queryHelper\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" initialQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * returns the query but sanitized\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * replace all spaces with pluses\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'+'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Match IMDb ID's from hrefs\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"20\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@static\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"22\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"23\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),` containing IMDb ID\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" href\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"match\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[\"tt\",(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\")\"}),(0,e.jsxs)(n.span,{className:\"token char-class\",children:[(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"[\"}),(0,e.jsxs)(n.span,{className:\"token range\",children:[\"0\",(0,e.jsx)(n.span,{className:\"token range-punctuation operator\",children:\"-\"}),\"9\"]}),(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"]\"})]})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"toString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"28\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Klassen best\\xE5r allts\\xE5 av en konstruktor och tv\\xE5 metoder. Den f\\xF6rsta metoden \",(0,e.jsx)(n.code,{children:\"getSanitizedQuery()\"}),\" returnerar en s\\xF6kstr\\xE4ng d\\xE4r alla mellanrum i str\\xE4ngen har bytts ut mot plustecken. Den andra metoden \",(0,e.jsx)(n.code,{children:\"getIMDbID()\"}),\" tar \",(0,e.jsx)(n.strong,{children:\"href\"}),\" som parameter och resturnerar sj\\xE4lva IMDb ID:t fr\\xE5n en URL. Den extraherar allts\\xE5 \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" fr\\xE5n \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"http://www.imdb.com/title/tt0411008/\",children:\"http://www.imdb.com/title/tt0411008/\"})}),\" Metoden \\xE4r statisk d\\xE4rf\\xF6r att IMDb klassen anv\\xE4nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" inuti IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Slutligen har vi kvar sj\\xE4lva IMDb klassen \",(0,e.jsx)(n.strong,{children:\"IMDb.js\"}),\" som best\\xE5r av ett antal metoder.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"F\\xF6rst s\\xE5 anv\\xE4nds require f\\xF6r att f\\xE5 in de \\xF6vriga npm-paket som \\xE4nnu inte anv\\xE4nts, men ocks\\xE5 queryHelper klassen:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" request \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'request'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" cheerio \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'cheerio'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" ora \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'ora'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" tab \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'table-master'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" chalk \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'chalk'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" figlet \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'figlet'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" queryHelper \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./queryHelper'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"D\\xE4refter skapas och exporteras sj\\xE4lva IMDb klassen med en konstruktor:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of IMDb.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"query\"}),` - search query that has been sanitized\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"originalQuery\"}),` - The original search query\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"  */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" originalQuery\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" originalQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"http://www.imdb.com/search/title?title=\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"outputColor\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:['Konstruktorn har tv\\xE5 parametrar och det \\xE4r allts\\xE5 sj\\xE4lva s\\xF6kstr\\xE4ngen i dess original och i den \"plussade\" formen. D\\xE4refter s\\xE4tts ',(0,e.jsx)(n.code,{children:\"this.url\"}),\" med hj\\xE4lp av den plussade s\\xF6kstr\\xE4ngen som i en annan metod kommer anv\\xE4ndas f\\xF6r att g\\xF6ra en reuqest och skrapa IMDb.\",(0,e.jsx)(n.br,{}),`\n`,(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r en tom array som senare ska fyllas p\\xE5 med s\\xF6kresultat och \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" anv\\xE4nder npm-paketet \",(0,e.jsx)(n.code,{children:\"chalk\"}),\" f\\xF6r att spara ner IMDb:s gula f\\xE4rg som i en annan metod kommer anv\\xE4ndas f\\xF6r lite f\\xE4rgrannare utskrift i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter inneh\\xE5ller klassen en statisk metod f\\xF6r att visa lite ascii-text. Metoden \\xE4r statisk eftersom att den anropas i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" innan en instans av sj\\xE4lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats g\\xE5r den inte att anv\\xE4nda IMDbf\\xE4rgen som deklarerats som \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" i klassens konstruktor. Det kan \\xE4nd\\xE5 vara bra att ha denna f\\xE4rg sparad om den gula f\\xE4rgen skulle anv\\xE4ndas l\\xE4ngre fram till andra saker ocks\\xE5.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Static method to display IMDB header for the CLI\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" imdbColor \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"imdbColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"figlet\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"textSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'IMDb'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att bygga ut \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" arrayen skapas ytterligare en metod p\\xE5 IMDb klassen som kan se ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Push to results array\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"title\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"year\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"imdbID\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod anv\\xE4nder \",(0,e.jsx)(n.code,{children:\"push\"}),\" f\\xF6r att bygga ut arrayen med ett objekt som inneh\\xE5ller titel, \\xE5rtal och IMDb ID.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"IMDb klassen inneh\\xE5ller sedan en n\\xE5got tung metod f\\xF6r att utf\\xF6ra sj\\xE4lva skrapandet av IMDb och komma \\xE5t s\\xF6kresultaten. Metoden g\\xE5r kort och gott ut p\\xE5 att g\\xF6ra en request till IMDb och loopa genom ett ex antal s\\xF6kresultat och pusha dessa till \",(0,e.jsx)(n.code,{children:\"this.results\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\" \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Perform the scrape of imdb to gather search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" spinner \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ora\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Searching IMDb. Please wait...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"start\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"request\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" body\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"11\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" $ \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" cheerio\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"load\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"body\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"13\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'.lister-item-header a'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"each\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create variables to be pushed as search result\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" title \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" year \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"next\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\"\\\\D\"})}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" imdbID \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"outputColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"queryHelper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'href'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// stop the loop after 15 items\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" index \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"14\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"25\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"29\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"30\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"31\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"Program exit with error: \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"error\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"32\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"33\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"34\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE5gra nyckeldetaljer i den h\\xE4r metoden \\xE4r att f\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"ora\"}),\" npm-paketet f\\xF6r att starta en spinner som ger anv\\xE4ndaren lite feedback. S\\xF6kresultaten loopas genom med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"cheerio\"}),\" och \",(0,e.jsx)(n.code,{children:\"$(.lister-item-header a).each()\"}),\" d\\xE4r titlar, \\xE5rtal och id:n sparas till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.createSearchResult()\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE4r loopen har stannat efter att de femton f\\xF6rsta s\\xF6kresultaten har pushats till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" stoppas spinnern med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"spinner.stop()\"}),\" och en tabell med s\\xF6kresultaten visas upp i terminalen med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.renderSearchResults()\"}),\". Den metoden ser ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Render either a table with search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * or a message of no search results were found\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"keys\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"red\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'Could not find any search results for \"'}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:'\". Please try again.'}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"table\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod kollar f\\xF6rst om \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r tom (inga s\\xF6kresultat hittades) eller ej och antingen renderar en tabell med s\\xF6kresultaten eller ger feedback om att inga s\\xF6kresultat kunde hittas. H\\xE4r anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"this.originalQuery\"}),\" som allts\\xE5 exempelvis skulle motsvara \",(0,e.jsx)(n.code,{children:\"Harry Potter\"}),\" och inte \",(0,e.jsx)(n.code,{children:\"Harry+Potter\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"g\\xF6r-clit-k\\xF6rbart-globalt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#g\\xF6r-clit-k\\xF6rbart-globalt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"G\\xF6r CLI:t k\\xF6rbart globalt\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att slippa skriva \",(0,e.jsx)(n.code,{children:\"node index.js\"}),\" och hela tiden befinna sig i samma path som \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" finns det ett enkelt knep att g\\xF6ra det h\\xE4r CLI:t globalt tillg\\xE4ngligt genom att endast skriva exempelvis \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" i terminalen, oberoende vilken path man har.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"B\\xF6rja med att uppgradera \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" med f\\xF6ljande:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"package.json\"}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"language-json code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"bin\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"imdb\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"./index.js\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Detta binder kommandot \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" till att k\\xF6ra \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". L\\xE4gg d\\xE4refter till f\\xF6ljande shebang h\\xF6gst upp i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token hashbang comment\",children:\"#!/usr/bin/env node\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"//........\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter CLI:t globalt med hj\\xE4lp av:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-g\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Nu \\xE4r CLI:t k\\xF6rbart globalt \\u{1F389}\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Det var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter s\\xF6kresultat och IMDb ID:n. Det f\\xE4rdiga CLI:et finns p\\xE5 \",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/imdb-cli\",children:\"GitHub\"})]})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var w=v;return f(j);})();\n;return Component;"},"_id":"posts/node-cli-for-att-skrapa-imdb.mdx","_raw":{"sourceFilePath":"posts/node-cli-for-att-skrapa-imdb.mdx","sourceFileName":"node-cli-for-att-skrapa-imdb.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/node-cli-for-att-skrapa-imdb"},"type":"Post","url":"/blogg/node-cli-for-att-skrapa-imdb","dateFormatted":"2017-09-01"},"prevPost":{"title":"Ladda ned trailers via terminalen","date":"2017-03-30T00:00:00.000Z","summary":"Kombinera cli-verktyg för att snabbt och enkelt ladda ned trailers från YouTube.","body":{"raw":"\nLadda ned trailers från YouTube har aldrig varit smidigare än den här ihopslagningen av två CLI-verktyg.\n\n> Det här inlägget har egentligen inte speciellt mycket med just utveckling att göra men jag tycker ändå det är ett litet behändigt tips som kan uppskattas ändå.\n\nAnledningarna kan vara många till att behöva kolla på trailers och i mitt fall handlar det om att trailers hjälper mig bestämma vilken rulle man ska se för kvällen. Dessutom använder jag mig av ett [plexbibliotek](https://www.plex.tv/) och genom att ladda ner trailers på förhand kan jag streama filmtrailers innan jag bestämmer mig för vilken film i biblioteket jag ska se. Det gör jag genom att kombinera [youtube-dl](https://rg3.github.io/youtube-dl/) och [movie-trailer](https://www.npmjs.com/package/movie-trailer).\n\n**youtube-dl** är ett smidigt och flexibelt CLI verktyg för att ladda ned från YouTube medan `movie-trailer` är ett CLI verktyg för att lokalisera URL's till trailers på YouTube. Kombinerar man dessa kan man väldigt enkelt ladda ned en trailer utan att ens besöka YouTube.\n\n## Installation\n\n**youtube-dl** installeras enklast med hjälp av Homebrew, men andra installationsalternativ finns på [hemsidan](https://rg3.github.io/youtube-dl/). I alla fall så installeras det på följande vis med Homebrew:\n\n```bash\n$ brew install youtube-dl\n```\n\nFör att `youtube-dl` ska fungera så bra som möjligt (ibland måste verktyget omvandla från ett filformat till ett annat) är det rekommenderat att man installer `ffmpeg` också. Lyckligtvis går det att bra att installera `ffmpeg` med hjälp av Homebrew:\n\n```bash\n$ brew install ffmpeg\n```\n\n**movie-trailer** å andra sidan kommer från [npm](https://www.npmjs.com/) och installeras på följande vis (förutsatt att npm är installerat på din maskin):\n\n```bash\n# Installera movie-trailer globalt\n$ npm install --global movie-trailer\n```\n\n## Kombinera verktygen\n\nNär bägge CLI verktygen är installerade kan det kombineras genom att skapa följande funktion i din `~/.bashrc`, `~/.bash_profile` eller `~/.zshrc` som i mitt fall då jag använder zsh istället för bash.\n\n```bash:~/.zshrc showLineNumbers\nfunction trailer-dl() {\n    echo \"Downloading trailer\"\n    if [ -n $2 ]\n    then\n      # Ladda ned efter endast filmtitel\n      youtube-dl --output \"$1-trailer.%(ext)s\" $(movie-trailer \"$1\")\n    else\n      # Ladda ned efter årtal också\n      youtube-dl --output \"$1-trailer.%(ext)s\" $(movie-trailer \"$1\" \"$2\" )\n    fi\n}\n```\n\n**movie-trailer** kan antingen söka efter URL till en trailer efter enbart namnet på en film eller också namnet plus årtalet. Således innehåller funktionen ovan två scenarion beroende på om man anger ett årtal eller ej.\n","code":"var Component=(()=>{var m=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var l in e)r(a,l,{get:e[l],enumerable:!0})},s=(a,e,l,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of p(e))!g.call(a,i)&&i!==l&&r(a,i,{get:()=>e[i],enumerable:!(t=h(e,i))||t.enumerable});return a};var N=(a,e,l)=>(l=a!=null?m(k(a)):{},s(e||!a||!a.__esModule?r(l,\"default\",{value:a,enumerable:!0}):l,a)),f=a=>s(r({},\"__esModule\",{value:!0}),a);var d=u((L,c)=>{c.exports=_jsx_runtime});var w={};b(w,{default:()=>j,frontmatter:()=>v});var n=N(d()),v={title:\"Ladda ned trailers via terminalen\",summary:\"Kombinera cli-verktyg f\\xF6r att snabbt och enkelt ladda ned trailers fr\\xE5n YouTube.\",date:new Date(1490832e6)};function o(a){let e=Object.assign({p:\"p\",blockquote:\"blockquote\",a:\"a\",strong:\"strong\",code:\"code\",h2:\"h2\",span:\"span\",pre:\"pre\",div:\"div\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Ladda ned trailers fr\\xE5n YouTube har aldrig varit smidigare \\xE4n den h\\xE4r ihopslagningen av tv\\xE5 CLI-verktyg.\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Det h\\xE4r inl\\xE4gget har egentligen inte speciellt mycket med just utveckling att g\\xF6ra men jag tycker \\xE4nd\\xE5 det \\xE4r ett litet beh\\xE4ndigt tips som kan uppskattas \\xE4nd\\xE5.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Anledningarna kan vara m\\xE5nga till att beh\\xF6va kolla p\\xE5 trailers och i mitt fall handlar det om att trailers hj\\xE4lper mig best\\xE4mma vilken rulle man ska se f\\xF6r kv\\xE4llen. Dessutom anv\\xE4nder jag mig av ett \",(0,n.jsx)(e.a,{href:\"https://www.plex.tv/\",children:\"plexbibliotek\"}),\" och genom att ladda ner trailers p\\xE5 f\\xF6rhand kan jag streama filmtrailers innan jag best\\xE4mmer mig f\\xF6r vilken film i biblioteket jag ska se. Det g\\xF6r jag genom att kombinera \",(0,n.jsx)(e.a,{href:\"https://rg3.github.io/youtube-dl/\",children:\"youtube-dl\"}),\" och \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/movie-trailer\",children:\"movie-trailer\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"youtube-dl\"}),\" \\xE4r ett smidigt och flexibelt CLI verktyg f\\xF6r att ladda ned fr\\xE5n YouTube medan \",(0,n.jsx)(e.code,{children:\"movie-trailer\"}),\" \\xE4r ett CLI verktyg f\\xF6r att lokalisera URL's till trailers p\\xE5 YouTube. Kombinerar man dessa kan man v\\xE4ldigt enkelt ladda ned en trailer utan att ens bes\\xF6ka YouTube.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"installation\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#installation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Installation\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"youtube-dl\"}),\" installeras enklast med hj\\xE4lp av Homebrew, men andra installationsalternativ finns p\\xE5 \",(0,n.jsx)(e.a,{href:\"https://rg3.github.io/youtube-dl/\",children:\"hemsidan\"}),\". I alla fall s\\xE5 installeras det p\\xE5 f\\xF6ljande vis med Homebrew:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ brew \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` youtube-dl\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"F\\xF6r att \",(0,n.jsx)(e.code,{children:\"youtube-dl\"}),\" ska fungera s\\xE5 bra som m\\xF6jligt (ibland m\\xE5ste verktyget omvandla fr\\xE5n ett filformat till ett annat) \\xE4r det rekommenderat att man installer \",(0,n.jsx)(e.code,{children:\"ffmpeg\"}),\" ocks\\xE5. Lyckligtvis g\\xE5r det att bra att installera \",(0,n.jsx)(e.code,{children:\"ffmpeg\"}),\" med hj\\xE4lp av Homebrew:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ brew \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` ffmpeg\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"movie-trailer\"}),\" \\xE5 andra sidan kommer fr\\xE5n \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/\",children:\"npm\"}),\" och installeras p\\xE5 f\\xF6ljande vis (f\\xF6rutsatt att npm \\xE4r installerat p\\xE5 din maskin):\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Installera movie-trailer globalt\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--global\"}),` movie-trailer\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"kombinera-verktygen\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#kombinera-verktygen\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Kombinera verktygen\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r b\\xE4gge CLI verktygen \\xE4r installerade kan det kombineras genom att skapa f\\xF6ljande funktion i din \",(0,n.jsx)(e.code,{children:\"~/.bashrc\"}),\", \",(0,n.jsx)(e.code,{children:\"~/.bash_profile\"}),\" eller \",(0,n.jsx)(e.code,{children:\"~/.zshrc\"}),\" som i mitt fall d\\xE5 jag anv\\xE4nder zsh ist\\xE4llet f\\xF6r bash.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"~/.zshrc\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-name function\",children:\"trailer-dl\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Downloading trailer\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-n\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$2\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"then\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Ladda ned efter endast filmtitel\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"      youtube-dl \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--output\"}),\" \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'-trailer.%(ext)s\"']}),\" \",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"$(\"}),\"movie-trailer \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'\"']}),(0,n.jsx)(e.span,{className:\"token variable\",children:\")\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"else\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Ladda ned efter \\xE5rtal ocks\\xE5\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"      youtube-dl \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--output\"}),\" \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'-trailer.%(ext)s\"']}),\" \",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"$(\"}),\"movie-trailer \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'\"']}),\" \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$2\"}),'\"']}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\")\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"fi\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"11\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"movie-trailer\"}),\" kan antingen s\\xF6ka efter URL till en trailer efter enbart namnet p\\xE5 en film eller ocks\\xE5 namnet plus \\xE5rtalet. S\\xE5ledes inneh\\xE5ller funktionen ovan tv\\xE5 scenarion beroende p\\xE5 om man anger ett \\xE5rtal eller ej.\"]})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var j=y;return f(w);})();\n;return Component;"},"_id":"posts/ladda-ned-trailers-via-terminalen.mdx","_raw":{"sourceFilePath":"posts/ladda-ned-trailers-via-terminalen.mdx","sourceFileName":"ladda-ned-trailers-via-terminalen.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/ladda-ned-trailers-via-terminalen"},"type":"Post","url":"/blogg/ladda-ned-trailers-via-terminalen","dateFormatted":"2017-03-30"},"nextPost":{"title":"Skapa ett request plugin i Nuxt.js","date":"2019-06-15T00:00:00.000Z","summary":"Så här skapar man enkelt ett request-plugin baserat på axios i Nuxt.js","body":{"raw":"\nPluginsystemet i Nuxt.js gör det enkelt att skapa ett eget request plugin för att hantera en Nuxt-baserad applikations alla HTTP anrop.\n\n[Nuxt.js](https://nuxtjs.org/) är ett ramverk byggt ovanpå Vue.js och en av tankarna bakom Nuxt är att tillhandahålla en modulär och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade på Vue.\n\n## Request modul\n\nI verktygslådan som Nuxt tillhandahåller finns en [axios modul](https://axios.nuxtjs.org/) som integrerar axios (ett populärt promise baserat HTTP bibliotek) med Nuxt. En av fördelarna med att använda denna axios-modul är att den automatiskt sätter en base-URL för både klient och server kontext i en Nuxt applikation.\n\nHur kan man då använda axios modulen i en Nuxt applikation? Efter att man [lagt till](https://axios.nuxtjs.org/setup) modulen blir den tillgänglig direkt i `.vue` filer via `this.$axios`. För att göra en GET-request kan man exempelvis göra `this.$axios.get(URL)`.\n\n## Request plugin\n\nDet fungerar helt okej att använda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man stöter snabbt på problem om samma HTTP anrop ska återanvändas och eventuell passning behövs innan svaret ska presenteras i gränssnittet. Det är då lätt hänt att Vue komponenterna börjar växa i onödan och får för mycket ansvar för saker och ting som inte hör komponenterna till.\n\nDet i det här läget man kan använda sig av en av fördelarna med Nuxt, nämligen [plugin-systemet](https://nuxtjs.org/guide/plugins), för att skapa ett request plugin.\nDet man då kan göra är att skapa en fil **plugins/api.js** som man i sin **nuxt.config.json** inkluderar på följande vis:\n\n```javascript:nuxt.config.json showLineNumbers\n// Other configuration\nplugins: [\n'@/plugins/api',\n],\n// Other configuration\n```\n\nDet innebär att Nuxt kommer läsa in **plugins/api.js** före applikationen startar\n\nDet är i **plugins/api.js** man gör en ”inject” för att registrera sitt plugin och gör det tillgängligt i applikationen.\n\n```javascript:plugins/api.js {5,6} showLineNumbers\nimport API from './some/place/';\nexport default ({ $axios }, inject) => {\n  // Create new api class with provided nuxt axios module\n  const api = new API({ request: $axios });\n  // Inject the api to make it available across app via this.$api\n  inject('api', api);\n};\n```\n\nPluginet importerar en ”API” klass och skapar upp en ny instans av klassen och gör axios modulen tillgänglig via dependency injection. Att använda `inject()` här innebär att klass instansen blir tillgänglig i bland annat Vue filer, men också i en eventuell Vuex store som man kan använda i en Nuxt applikation.\n\nDet är då alltså i `API` klassen som alla requests via axios modulen görs. Förenklat skulle man kunna skapa en `API.js` fil med följande innehåll:\n\n```javascript:API.js showLineNumbers\nclass API {\n\tconstructor({ request }) {\n\t\t// this.request will reference nuxt axios mudule\n\t\tthis.request = request\n\t}\n}\nexport default API\n```\n\nDärefter är det bara att fylla på med de metoder som man anser behövs, konfigurerar upp eventuella request parsers och så vidare.\n\nNär väl pluginet är registrerat är det bara att börja använda `this.$api` i applikationen och exempelvis alla vue komponenter har tillgång till ett enkelt API utan att behöva göra alla HTTP anrop själva och behöva tänka på eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna göra ett anrop med följande syntax:\n\n```javascript:example-vue-component.vue {4,5,6} showLineNumbers\n// Example of a vue component with methods\nmethods: {\n\tasync getQuote() {\n\t\tconst { data } = await this.$api.getRandomQuote()\n\t\t// Set data from api to vue component data\n\t\tthis.quote = data\n\t}\n}\n```\n\nMetoden `getRandomQuote()` skulle kunna vara en metod i API klassen som gör ett anrop för att hämta ett slumpmässigt citat av något slag.\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of h(e))!k.call(a,t)&&t!==s&&l(a,t,{get:()=>e[t],enumerable:!(i=m(e,t))||i.enumerable});return a};var v=(a,e,s)=>(s=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=>c(l({},\"__esModule\",{value:!0}),a);var o=N((q,r)=>{r.exports=_jsx_runtime});var y={};g(y,{default:()=>j,frontmatter:()=>x});var n=v(o()),x={title:\"Skapa ett request plugin i Nuxt.js\",summary:\"S\\xE5 h\\xE4r skapar man enkelt ett request-plugin baserat p\\xE5 axios i Nuxt.js\",date:new Date(15605568e5)};function p(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",strong:\"strong\",div:\"div\",pre:\"pre\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Pluginsystemet i Nuxt.js g\\xF6r det enkelt att skapa ett eget request plugin f\\xF6r att hantera en Nuxt-baserad applikations alla HTTP anrop.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/\",children:\"Nuxt.js\"}),\" \\xE4r ett ramverk byggt ovanp\\xE5 Vue.js och en av tankarna bakom Nuxt \\xE4r att tillhandah\\xE5lla en modul\\xE4r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p\\xE5 Vue.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-modul\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-modul\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request modul\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I verktygsl\\xE5dan som Nuxt tillhandah\\xE5ller finns en \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/\",children:\"axios modul\"}),\" som integrerar axios (ett popul\\xE4rt promise baserat HTTP bibliotek) med Nuxt. En av f\\xF6rdelarna med att anv\\xE4nda denna axios-modul \\xE4r att den automatiskt s\\xE4tter en base-URL f\\xF6r b\\xE5de klient och server kontext i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hur kan man d\\xE5 anv\\xE4nda axios modulen i en Nuxt applikation? Efter att man \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/setup\",children:\"lagt till\"}),\" modulen blir den tillg\\xE4nglig direkt i \",(0,n.jsx)(e.code,{children:\".vue\"}),\" filer via \",(0,n.jsx)(e.code,{children:\"this.$axios\"}),\". F\\xF6r att g\\xF6ra en GET-request kan man exempelvis g\\xF6ra \",(0,n.jsx)(e.code,{children:\"this.$axios.get(URL)\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-plugin\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-plugin\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request plugin\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Det fungerar helt okej att anv\\xE4nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st\\xF6ter snabbt p\\xE5 problem om samma HTTP anrop ska \\xE5teranv\\xE4ndas och eventuell passning beh\\xF6vs innan svaret ska presenteras i gr\\xE4nssnittet. Det \\xE4r d\\xE5 l\\xE4tt h\\xE4nt att Vue komponenterna b\\xF6rjar v\\xE4xa i on\\xF6dan och f\\xE5r f\\xF6r mycket ansvar f\\xF6r saker och ting som inte h\\xF6r komponenterna till.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det i det h\\xE4r l\\xE4get man kan anv\\xE4nda sig av en av f\\xF6rdelarna med Nuxt, n\\xE4mligen \",(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/guide/plugins\",children:\"plugin-systemet\"}),`, f\\xF6r att skapa ett request plugin.\nDet man d\\xE5 kan g\\xF6ra \\xE4r att skapa en fil `,(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" som man i sin \",(0,n.jsx)(e.strong,{children:\"nuxt.config.json\"}),\" inkluderar p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"nuxt.config.json\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"plugins\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"'@/plugins/api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det inneb\\xE4r att Nuxt kommer l\\xE4sa in \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" f\\xF6re applikationen startar\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r i \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" man g\\xF6r en \\u201Dinject\\u201D f\\xF6r att registrera sitt plugin och g\\xF6r det tillg\\xE4ngligt i applikationen.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"plugins/api.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./some/place/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" inject\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create new api class with provided nuxt axios module\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" api \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"request\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Inject the api to make it available across app via this.$api\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" api\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pluginet importerar en \\u201DAPI\\u201D klass och skapar upp en ny instans av klassen och g\\xF6r axios modulen tillg\\xE4nglig via dependency injection. Att anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"inject()\"}),\" h\\xE4r inneb\\xE4r att klass instansen blir tillg\\xE4nglig i bland annat Vue filer, men ocks\\xE5 i en eventuell Vuex store som man kan anv\\xE4nda i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r d\\xE5 allts\\xE5 i \",(0,n.jsx)(e.code,{children:\"API\"}),\" klassen som alla requests via axios modulen g\\xF6rs. F\\xF6renklat skulle man kunna skapa en \",(0,n.jsx)(e.code,{children:\"API.js\"}),\" fil med f\\xF6ljande inneh\\xE5ll:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"API.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" request \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this.request will reference nuxt axios mudule\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"request\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` request\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"D\\xE4refter \\xE4r det bara att fylla p\\xE5 med de metoder som man anser beh\\xF6vs, konfigurerar upp eventuella request parsers och s\\xE5 vidare.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r v\\xE4l pluginet \\xE4r registrerat \\xE4r det bara att b\\xF6rja anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"this.$api\"}),` i applikationen och exempelvis alla vue komponenter har tillg\\xE5ng till ett enkelt API utan att beh\\xF6va g\\xF6ra alla HTTP anrop sj\\xE4lva och beh\\xF6va t\\xE4nka p\\xE5 eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna g\\xF6ra ett anrop med f\\xF6ljande syntax:`]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-vue-component.vue\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Example of a vue component with methods\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"methods\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" data \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"$api\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getRandomQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Set data from api to vue component data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"quote\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` data\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Metoden \",(0,n.jsx)(e.code,{children:\"getRandomQuote()\"}),\" skulle kunna vara en metod i API klassen som g\\xF6r ett anrop f\\xF6r att h\\xE4mta ett slumpm\\xE4ssigt citat av n\\xE5got slag.\"]})]})}function f(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var j=f;return b(y);})();\n;return Component;"},"_id":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","_raw":{"sourceFilePath":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileName":"skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/skapa-ett-request-plugin-i-nuxtjs"},"type":"Post","url":"/blogg/skapa-ett-request-plugin-i-nuxtjs","dateFormatted":"2019-06-15"}},"__N_SSG":true}