{"pageProps":{"post":{"title":"ColorPix och \"Less is more\" UX-förändringar","date":"2019-07-31T00:00:00.000Z","summary":"Med några enklare refaktoreringar blev användarupplevelsen enklare men låter samtidigt användaren göra mer.","body":{"raw":"\n## Bakgrund\n\nFör ett tag sedan lanserade jag de första releaserna ([1.0.0](https://github.com/danielv14/ColorPix/releases/tag/v1.0.0) och [1.0.1](https://github.com/danielv14/ColorPix/releases/tag/v.1.0.1)) för ColorPix - en webbapp som hjälper användare att upptäcka förgpaletter via bilder från Unsplash. Applikationen genererar färgpaletter utifrån bildernas dominanta färger och låter även användare finjustera färgmättnad och ljusstyrka.\nJusteringen av färpaletterna görs med olika reglage och jag tänkte gå igenom lite förändringar UX-mässigt som gjorts i och med release 1.1.0 - där en ”_less is more_” approach har förenklat samt förbättrat färgmanipuleringen i ColorPix.\n\n## Hantering i version 1.0.1\n\nI stora drag gick färgmanipulering till på följande sätt i version 1.0.1:\n\n**Användaren...**\n\n1. **Expanderar** ett bildkort för att komma åt färgmanipuleringsvertyget.\n2. **Väljer** om färgmättnad eller ljusstyrka är det som ska manipuleras i de olika flikarna.\n3. **Justerar** reglage för vald färgmanipulering.\n4. **Klickar** på en knapp för att kopiera en färgpalett till urklippet när denne är nöjd med manipuleringen.\n\n![Gränssnitt-version-1-0-1](/img/posts/colorpix-ux-before.png)\n\n_Bilden visar manipuleringsvertyget i version 1.0.1_\n\n### Begränsningar\n\nVad finns det för begränsningar med gränssnittet i bilden ovan? På rak arm utifrån punktlistan ovan för hur använaren nyttjar verktygen samt skärmbilden för version 1.0.1 kunde jag identifiera följande begränsningar:\n\n#### Plottrigt\n\nGränssnittet känns plottrigt då varje manipuleringsmetod (ökad eller minskad färgmättnad osv) är uppdelat i olika reglage, kopieringsknappar och färgrepresentation.\n\n#### Dold kopieringsknapp\n\nKnappen för att kopiera en färgpalett är dold bakom en knapp som expanderar färgkorten. Användaren har inte heller något intuitivt sätt att kopiera en färgpalett som inte blivit manipulerad. För att kopiera ursprungsfärgerna måste man låta ett reglage vara på 0 och sedan kopiera färgerna i anslutning med knappen för det reglaget.\n\n#### Ökning och minskning i samma led\n\nI och med att varje färgmanipulering är uppdelad i separata reglage går både _ökning_ och _minskning_ av ljusstyrka och färgmättnad från vänster till höger i reglagen. Detta kan uppfattas som förvirrande då man kanske hellre vill likna justeringen av färgmättnad med en icke-digital termometer som går från minusgraden till plusgrader.\n\n#### Endast en manipulering åt gången\n\nEn återkommande orsak till begränsningar är den ”UX-skuld” som uppstod i designvalet att just separera reglagen med egna färgrepresentationer. Uppdelningen innebär att användaren inte kan justera färgmättnad _samtidigt_ som ljusstyrka för en och samma färgrepresentation. Det är denna punkt som i mitt tycke var den största begränsningen med gränssnittet.\n\n### Möjligheter\n\nVad finns det för möjligheter med gränssnittet? I och med att jag själv ändrade gränssnittet för just färgmanipuleringen är det kanske ingen slump att jag identifierade fler begränsningar än möjligheter med gränssnittet. Dock identifierade jag ändå följande möjligheter:\n\n#### Utforska oberoende justeringar utifrån samma bild\n\nUtifrån gränssnittets design kan användaren justera med fler manipuleringar samtidigt utan att ett reglage påverkar ett annat. Detta kan ses som en fördel, beroende på hur man vill utforska och skapa sina färgpaletter.\n\n#### Potentiellt mindre plotter vid ökning av verktyg\n\nDå manipuleringarna är grupperade under flikar minskar en eventuell risk för ett mer plottrigt gränssnitt om verktyget skulle utökas med fler sorters färgmanipuleringar och ännu mer reglage. Dock går det att argumentera för att en ökning av flikar är minst lika plottrigt och användaren får svårt att veta vilket flik som man är ute efter för stunden. Användare kanske dessutom inte skulle vara överens med grupperingen utan vill gruppera flikar och reglage utifrån andra preferenser.\n\n## Förbättrad UX i version 1.1.0\n\nFyra begränsningar och två möjligheter identifierade jag efter att ha använt ColorPix själv sporadiskt i ungefär en månads tid. Sammanfattningsvis kände jag mig begränsad av hur manipuleringsvektyget var utformat och jag kände att jag behövde ta tag i de identifierade begränsningarna för att skapa en bättre användarupplevlese.\n\n![Gränssnitt-version-1-1-0](/img/posts/colorpix-ux-after.png)\n\n_Bilden visar manipuleringsvertyget i version 1.1.0_\n\n### Åtgärdade begränsningar\n\nI och med att jag hade begränsningarna från version 1.0.1 i åtanke när jag utformade det nya gränssnittet kanske det är enklast att utgå från just den listan och lyfta fram hur de punkterna har behandlats:\n\n#### Mindre plottrigt\n\nReglage döljs inte längre bakom flikar och varje reglage har inte längre separata färgrepresentationer.\n\n#### Synlig kopieringsknapp\n\nKopieringsknappen är flyttad och är inte längre dold bakom expandering av ett bildkort. Eftersom att knappen är flyttad blir det tydligare hur användaren kan kopiera ursprungsfärgerna.\n\n#### Ökning och minskning av värden åt olika håll\n\nI och med att reglagen för ökning och minskning inte längre är separerade går inte ökning och minskning ut samma håll - från höger till vänster. Nu följer istället reglagen bättre metaforen för en termometer. Minusvärde på reglaget innebär en minskning av exempelvis färgmättnad och ett plusvärde innebär ökning av färgmättnad.\n\n#### Multipla manipuleringar samtidigt\n\nI och med att reglagen och färgrepresentationerna inte längre är lika hårt knutna i kodbasen går det att låta flera reglage påverka en och samma färgåtergivning. Detta innebär att användaren kan justera exempelvis ökning av färmättnad samtidigt som en minskning av ljusstyrka.\n\nEn följdeffekt av att två reglage nu används för att hantera ökning och minskning av exempelvis färgmättnad är att användare inte behöver separera de två handlingarna rent kognitivt. Man arbetar med \"färgmättnad\" i sin helhet - inte ökning och minskning av färgmättnad separat.\n\nGemensamt för mycket av de åtgärder som gjorts åt begränsningarna i föregående version handlar om att ta tag i den ”UX-skuld” som följde med designvalet att separera reglagen från varandra (ökning/minskning) samt att ett reglage var hårt knutet till en färgåtergivning i kodbasen - det gick inte att använda reglage-komponenten utan att få med en färgrepresentation för reglaget på köpet.\n\n### What's the catch med det nya gränssnittet då?\n\nVad finns det då för nya begränsningar med det nya gränssnittet? Tittar man på framförallt en av möjligheterna med gränssnittet i version 1.0.1 - möjligheten till oberoende manipuleringar utifrån samma bild så märker man att denna möjlighet har blivit en potentiell begränsning istället. Dock ser jag en bättre ratio med möjligheter/begränsningar med det nya gränssnittet om man jämför med föregående version. Jag väljer ändå att se version 1.1.0 som ett steg i rätt riktning rent UX-mässigt.\n\n## Summering av 1.0.1 till 1.1.0\n\nI ett tidigt stadie av ColorPix gjordes några designval som har lett till en del upplevda UX-problem och begränsningar kring verktyget för färgmanipluering. Efter en del användning av befintlig funktionalitet kunde begränsningar identifieras. Problemen handlade i stora drag kring begränsningar i vad användaren kunde göra - på grund av designbeslut i kodbasen. Verktyget upplevdes även otydligt och hade viss dold funktionalitet.\n\nEn ”less is more” approach anammades och en del refraktorering av koden för att ta bort för hårt knutna beroenden mellan komponenter. När komponenterna inte längre var lika hårt knutna med varandra kunde en bättre upplevelse skapas där användare kan på ett enklare sätt än tidigare göra mer avancerade färgmanipuleringar.\n","code":"var Component=(()=>{var m=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var c=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var f=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),u=(r,n)=>{for(var a in n)t(r,a,{get:n[a],enumerable:!0})},l=(r,n,a,d)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let i of p(n))!k.call(r,i)&&i!==a&&t(r,i,{get:()=>n[i],enumerable:!(d=h(n,i))||d.enumerable});return r};var v=(r,n,a)=>(a=r!=null?m(c(r)):{},l(n||!r||!r.__esModule?t(a,\"default\",{value:r,enumerable:!0}):a,r)),b=r=>l(t({},\"__esModule\",{value:!0}),r);var g=f((D,s)=>{s.exports=_jsx_runtime});var I={};u(I,{default:()=>y,frontmatter:()=>j});var e=v(g()),j={title:'ColorPix och \"Less is more\" UX-f\\xF6r\\xE4ndringar',summary:\"Med n\\xE5gra enklare refaktoreringar blev anv\\xE4ndarupplevelsen enklare men l\\xE5ter samtidigt anv\\xE4ndaren g\\xF6ra mer.\",date:new Date(15645312e5)};function o(r){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",em:\"em\",strong:\"strong\",ol:\"ol\",li:\"li\",img:\"img\",h3:\"h3\",h4:\"h4\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"bakgrund\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#bakgrund\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Bakgrund\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r ett tag sedan lanserade jag de f\\xF6rsta releaserna (\",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/ColorPix/releases/tag/v1.0.0\",children:\"1.0.0\"}),\" och \",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/ColorPix/releases/tag/v.1.0.1\",children:\"1.0.1\"}),`) f\\xF6r ColorPix - en webbapp som hj\\xE4lper anv\\xE4ndare att uppt\\xE4cka f\\xF6rgpaletter via bilder fr\\xE5n Unsplash. Applikationen genererar f\\xE4rgpaletter utifr\\xE5n bildernas dominanta f\\xE4rger och l\\xE5ter \\xE4ven anv\\xE4ndare finjustera f\\xE4rgm\\xE4ttnad och ljusstyrka.\nJusteringen av f\\xE4rpaletterna g\\xF6rs med olika reglage och jag t\\xE4nkte g\\xE5 igenom lite f\\xF6r\\xE4ndringar UX-m\\xE4ssigt som gjorts i och med release 1.1.0 - d\\xE4r en \\u201D`,(0,e.jsx)(n.em,{children:\"less is more\"}),\"\\u201D approach har f\\xF6renklat samt f\\xF6rb\\xE4ttrat f\\xE4rgmanipuleringen i ColorPix.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"hantering-i-version-101\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#hantering-i-version-101\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Hantering i version 1.0.1\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I stora drag gick f\\xE4rgmanipulering till p\\xE5 f\\xF6ljande s\\xE4tt i version 1.0.1:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Anv\\xE4ndaren...\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Expanderar\"}),\" ett bildkort f\\xF6r att komma \\xE5t f\\xE4rgmanipuleringsvertyget.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"V\\xE4ljer\"}),\" om f\\xE4rgm\\xE4ttnad eller ljusstyrka \\xE4r det som ska manipuleras i de olika flikarna.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Justerar\"}),\" reglage f\\xF6r vald f\\xE4rgmanipulering.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Klickar\"}),\" p\\xE5 en knapp f\\xF6r att kopiera en f\\xE4rgpalett till urklippet n\\xE4r denne \\xE4r n\\xF6jd med manipuleringen.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/img/posts/colorpix-ux-before.png\",alt:\"Gr\\xE4nssnitt-version-1-0-1\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:\"Bilden visar manipuleringsvertyget i version 1.0.1\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"begr\\xE4nsningar\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#begr\\xE4nsningar\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Begr\\xE4nsningar\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Vad finns det f\\xF6r begr\\xE4nsningar med gr\\xE4nssnittet i bilden ovan? P\\xE5 rak arm utifr\\xE5n punktlistan ovan f\\xF6r hur anv\\xE4naren nyttjar verktygen samt sk\\xE4rmbilden f\\xF6r version 1.0.1 kunde jag identifiera f\\xF6ljande begr\\xE4nsningar:\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"plottrigt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#plottrigt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Plottrigt\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Gr\\xE4nssnittet k\\xE4nns plottrigt d\\xE5 varje manipuleringsmetod (\\xF6kad eller minskad f\\xE4rgm\\xE4ttnad osv) \\xE4r uppdelat i olika reglage, kopieringsknappar och f\\xE4rgrepresentation.\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"dold-kopieringsknapp\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#dold-kopieringsknapp\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Dold kopieringsknapp\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Knappen f\\xF6r att kopiera en f\\xE4rgpalett \\xE4r dold bakom en knapp som expanderar f\\xE4rgkorten. Anv\\xE4ndaren har inte heller n\\xE5got intuitivt s\\xE4tt att kopiera en f\\xE4rgpalett som inte blivit manipulerad. F\\xF6r att kopiera ursprungsf\\xE4rgerna m\\xE5ste man l\\xE5ta ett reglage vara p\\xE5 0 och sedan kopiera f\\xE4rgerna i anslutning med knappen f\\xF6r det reglaget.\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\xF6kning-och-minskning-i-samma-led\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\xF6kning-och-minskning-i-samma-led\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\xD6kning och minskning i samma led\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I och med att varje f\\xE4rgmanipulering \\xE4r uppdelad i separata reglage g\\xE5r b\\xE5de \",(0,e.jsx)(n.em,{children:\"\\xF6kning\"}),\" och \",(0,e.jsx)(n.em,{children:\"minskning\"}),\" av ljusstyrka och f\\xE4rgm\\xE4ttnad fr\\xE5n v\\xE4nster till h\\xF6ger i reglagen. Detta kan uppfattas som f\\xF6rvirrande d\\xE5 man kanske hellre vill likna justeringen av f\\xE4rgm\\xE4ttnad med en icke-digital termometer som g\\xE5r fr\\xE5n minusgraden till plusgrader.\"]}),`\n`,(0,e.jsxs)(n.h4,{id:\"endast-en-manipulering-\\xE5t-g\\xE5ngen\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#endast-en-manipulering-\\xE5t-g\\xE5ngen\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Endast en manipulering \\xE5t g\\xE5ngen\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"En \\xE5terkommande orsak till begr\\xE4nsningar \\xE4r den \\u201DUX-skuld\\u201D som uppstod i designvalet att just separera reglagen med egna f\\xE4rgrepresentationer. Uppdelningen inneb\\xE4r att anv\\xE4ndaren inte kan justera f\\xE4rgm\\xE4ttnad \",(0,e.jsx)(n.em,{children:\"samtidigt\"}),\" som ljusstyrka f\\xF6r en och samma f\\xE4rgrepresentation. Det \\xE4r denna punkt som i mitt tycke var den st\\xF6rsta begr\\xE4nsningen med gr\\xE4nssnittet.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"m\\xF6jligheter\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#m\\xF6jligheter\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"M\\xF6jligheter\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Vad finns det f\\xF6r m\\xF6jligheter med gr\\xE4nssnittet? I och med att jag sj\\xE4lv \\xE4ndrade gr\\xE4nssnittet f\\xF6r just f\\xE4rgmanipuleringen \\xE4r det kanske ingen slump att jag identifierade fler begr\\xE4nsningar \\xE4n m\\xF6jligheter med gr\\xE4nssnittet. Dock identifierade jag \\xE4nd\\xE5 f\\xF6ljande m\\xF6jligheter:\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"utforska-oberoende-justeringar-utifr\\xE5n-samma-bild\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#utforska-oberoende-justeringar-utifr\\xE5n-samma-bild\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Utforska oberoende justeringar utifr\\xE5n samma bild\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Utifr\\xE5n gr\\xE4nssnittets design kan anv\\xE4ndaren justera med fler manipuleringar samtidigt utan att ett reglage p\\xE5verkar ett annat. Detta kan ses som en f\\xF6rdel, beroende p\\xE5 hur man vill utforska och skapa sina f\\xE4rgpaletter.\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"potentiellt-mindre-plotter-vid-\\xF6kning-av-verktyg\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#potentiellt-mindre-plotter-vid-\\xF6kning-av-verktyg\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Potentiellt mindre plotter vid \\xF6kning av verktyg\"]}),`\n`,(0,e.jsx)(n.p,{children:\"D\\xE5 manipuleringarna \\xE4r grupperade under flikar minskar en eventuell risk f\\xF6r ett mer plottrigt gr\\xE4nssnitt om verktyget skulle ut\\xF6kas med fler sorters f\\xE4rgmanipuleringar och \\xE4nnu mer reglage. Dock g\\xE5r det att argumentera f\\xF6r att en \\xF6kning av flikar \\xE4r minst lika plottrigt och anv\\xE4ndaren f\\xE5r sv\\xE5rt att veta vilket flik som man \\xE4r ute efter f\\xF6r stunden. Anv\\xE4ndare kanske dessutom inte skulle vara \\xF6verens med grupperingen utan vill gruppera flikar och reglage utifr\\xE5n andra preferenser.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"f\\xF6rb\\xE4ttrad-ux-i-version-110\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#f\\xF6rb\\xE4ttrad-ux-i-version-110\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"F\\xF6rb\\xE4ttrad UX i version 1.1.0\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Fyra begr\\xE4nsningar och tv\\xE5 m\\xF6jligheter identifierade jag efter att ha anv\\xE4nt ColorPix sj\\xE4lv sporadiskt i ungef\\xE4r en m\\xE5nads tid. Sammanfattningsvis k\\xE4nde jag mig begr\\xE4nsad av hur manipuleringsvektyget var utformat och jag k\\xE4nde att jag beh\\xF6vde ta tag i de identifierade begr\\xE4nsningarna f\\xF6r att skapa en b\\xE4ttre anv\\xE4ndarupplevlese.\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"/img/posts/colorpix-ux-after.png\",alt:\"Gr\\xE4nssnitt-version-1-1-0\"})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:\"Bilden visar manipuleringsvertyget i version 1.1.0\"})}),`\n`,(0,e.jsxs)(n.h3,{id:\"\\xE5tg\\xE4rdade-begr\\xE4nsningar\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\xE5tg\\xE4rdade-begr\\xE4nsningar\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\xC5tg\\xE4rdade begr\\xE4nsningar\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I och med att jag hade begr\\xE4nsningarna fr\\xE5n version 1.0.1 i \\xE5tanke n\\xE4r jag utformade det nya gr\\xE4nssnittet kanske det \\xE4r enklast att utg\\xE5 fr\\xE5n just den listan och lyfta fram hur de punkterna har behandlats:\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"mindre-plottrigt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#mindre-plottrigt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Mindre plottrigt\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Reglage d\\xF6ljs inte l\\xE4ngre bakom flikar och varje reglage har inte l\\xE4ngre separata f\\xE4rgrepresentationer.\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"synlig-kopieringsknapp\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#synlig-kopieringsknapp\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Synlig kopieringsknapp\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Kopieringsknappen \\xE4r flyttad och \\xE4r inte l\\xE4ngre dold bakom expandering av ett bildkort. Eftersom att knappen \\xE4r flyttad blir det tydligare hur anv\\xE4ndaren kan kopiera ursprungsf\\xE4rgerna.\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"\\xF6kning-och-minskning-av-v\\xE4rden-\\xE5t-olika-h\\xE5ll\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#\\xF6kning-och-minskning-av-v\\xE4rden-\\xE5t-olika-h\\xE5ll\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\xD6kning och minskning av v\\xE4rden \\xE5t olika h\\xE5ll\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I och med att reglagen f\\xF6r \\xF6kning och minskning inte l\\xE4ngre \\xE4r separerade g\\xE5r inte \\xF6kning och minskning ut samma h\\xE5ll - fr\\xE5n h\\xF6ger till v\\xE4nster. Nu f\\xF6ljer ist\\xE4llet reglagen b\\xE4ttre metaforen f\\xF6r en termometer. Minusv\\xE4rde p\\xE5 reglaget inneb\\xE4r en minskning av exempelvis f\\xE4rgm\\xE4ttnad och ett plusv\\xE4rde inneb\\xE4r \\xF6kning av f\\xE4rgm\\xE4ttnad.\"}),`\n`,(0,e.jsxs)(n.h4,{id:\"multipla-manipuleringar-samtidigt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#multipla-manipuleringar-samtidigt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Multipla manipuleringar samtidigt\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I och med att reglagen och f\\xE4rgrepresentationerna inte l\\xE4ngre \\xE4r lika h\\xE5rt knutna i kodbasen g\\xE5r det att l\\xE5ta flera reglage p\\xE5verka en och samma f\\xE4rg\\xE5tergivning. Detta inneb\\xE4r att anv\\xE4ndaren kan justera exempelvis \\xF6kning av f\\xE4rm\\xE4ttnad samtidigt som en minskning av ljusstyrka.\"}),`\n`,(0,e.jsx)(n.p,{children:'En f\\xF6ljdeffekt av att tv\\xE5 reglage nu anv\\xE4nds f\\xF6r att hantera \\xF6kning och minskning av exempelvis f\\xE4rgm\\xE4ttnad \\xE4r att anv\\xE4ndare inte beh\\xF6ver separera de tv\\xE5 handlingarna rent kognitivt. Man arbetar med \"f\\xE4rgm\\xE4ttnad\" i sin helhet - inte \\xF6kning och minskning av f\\xE4rgm\\xE4ttnad separat.'}),`\n`,(0,e.jsx)(n.p,{children:\"Gemensamt f\\xF6r mycket av de \\xE5tg\\xE4rder som gjorts \\xE5t begr\\xE4nsningarna i f\\xF6reg\\xE5ende version handlar om att ta tag i den \\u201DUX-skuld\\u201D som f\\xF6ljde med designvalet att separera reglagen fr\\xE5n varandra (\\xF6kning/minskning) samt att ett reglage var h\\xE5rt knutet till en f\\xE4rg\\xE5tergivning i kodbasen - det gick inte att anv\\xE4nda reglage-komponenten utan att f\\xE5 med en f\\xE4rgrepresentation f\\xF6r reglaget p\\xE5 k\\xF6pet.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"whats-the-catch-med-det-nya-gr\\xE4nssnittet-d\\xE5\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#whats-the-catch-med-det-nya-gr\\xE4nssnittet-d\\xE5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"What's the catch med det nya gr\\xE4nssnittet d\\xE5?\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Vad finns det d\\xE5 f\\xF6r nya begr\\xE4nsningar med det nya gr\\xE4nssnittet? Tittar man p\\xE5 framf\\xF6rallt en av m\\xF6jligheterna med gr\\xE4nssnittet i version 1.0.1 - m\\xF6jligheten till oberoende manipuleringar utifr\\xE5n samma bild s\\xE5 m\\xE4rker man att denna m\\xF6jlighet har blivit en potentiell begr\\xE4nsning ist\\xE4llet. Dock ser jag en b\\xE4ttre ratio med m\\xF6jligheter/begr\\xE4nsningar med det nya gr\\xE4nssnittet om man j\\xE4mf\\xF6r med f\\xF6reg\\xE5ende version. Jag v\\xE4ljer \\xE4nd\\xE5 att se version 1.1.0 som ett steg i r\\xE4tt riktning rent UX-m\\xE4ssigt.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"summering-av-101-till-110\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#summering-av-101-till-110\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Summering av 1.0.1 till 1.1.0\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I ett tidigt stadie av ColorPix gjordes n\\xE5gra designval som har lett till en del upplevda UX-problem och begr\\xE4nsningar kring verktyget f\\xF6r f\\xE4rgmanipluering. Efter en del anv\\xE4ndning av befintlig funktionalitet kunde begr\\xE4nsningar identifieras. Problemen handlade i stora drag kring begr\\xE4nsningar i vad anv\\xE4ndaren kunde g\\xF6ra - p\\xE5 grund av designbeslut i kodbasen. Verktyget upplevdes \\xE4ven otydligt och hade viss dold funktionalitet.\"}),`\n`,(0,e.jsx)(n.p,{children:\"En \\u201Dless is more\\u201D approach anammades och en del refraktorering av koden f\\xF6r att ta bort f\\xF6r h\\xE5rt knutna beroenden mellan komponenter. N\\xE4r komponenterna inte l\\xE4ngre var lika h\\xE5rt knutna med varandra kunde en b\\xE4ttre upplevelse skapas d\\xE4r anv\\xE4ndare kan p\\xE5 ett enklare s\\xE4tt \\xE4n tidigare g\\xF6ra mer avancerade f\\xE4rgmanipuleringar.\"})]})}function x(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,Object.assign({},r,{children:(0,e.jsx)(o,r)})):o(r)}var y=x;return b(I);})();\n;return Component;"},"_id":"posts/colorpix-ux-forandringar.mdx","_raw":{"sourceFilePath":"posts/colorpix-ux-forandringar.mdx","sourceFileName":"colorpix-ux-forandringar.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/colorpix-ux-forandringar"},"type":"Post","url":"/blogg/colorpix-ux-forandringar","dateFormatted":"2019-07-31"},"prevPost":{"title":"IMDb CLI version 1.0.1 till 2.3.0","date":"2019-07-08T00:00:00.000Z","summary":"Detta är vad som har hänt från version 1.0.1 till version 2.3.0.","body":{"raw":"\nHur mycket kan man göra med ett \"enkelt\" CLI för att hämta information om filmer och serier från IMDb? Ganska mycket visar det sig. Det här är vad som har hänt med IMDb verktyget från version 1.0.1 till 2.3.0.\n\nJag har tidigare [skrivit](/blogg/node-cli-for-att-skrapa-imdb) lite om det node-baserade CLI verktyg jag skapade för att enkelt komma åt filmers och tv-seriers \"IMDb ID:n\". Nu har jag använt verson 1.0.1 av verktyget sen i septemper 2017 och kände att det var dags att göra CLI:t mer flexibelt, då jag av och till kände att det var viss funktionalitet som saknades.\n\n## Ny funktionalitet\n\nTill och från kändes CLI:t inte tillräckligt flexibelt när jag använde det och många gånger hade jag velat ha ett bättre sammanhang när sökresultat presenterades i en tabell i terminalen. I 1.0.0 visades enbart titlar, årtal och IMDB ID:n. Jag kände även att det vore smidigt att enbart söka på antingen filmer eller serier och kunna sortera sökresultatet utifrån årtal eller titlar.\n\nBilden här nedan sammanfattar den nya funktionalitet har tillkommit under resans gång från 1.0.1 till 2.3.0.\n\n![IMDB-cli-help](/img/posts/imdb-help-text.png)\n\n- `-v --version` - Skriver ut versionen av CLI:t.\n- `-p --plot` - Använder man denna flagga så används filmernas och seriernas handling i sökresultatet. Default så trunkeras handling till ett visst antal tecken.\n- `-l --limit-plot [number]` - Denna flagga låter användaren själv bestämma hur lång handlingen ska vara i sökresultatet innan det trunkeras.\n- `-t --title` - Denna flagga gör att man kan söka direkt när man anropar CLI:t. Tidigare så skrev man bara `imdb` och tyckte _ENTER_ för att sedan mata in en titel att söka efter.\n- `-m --movies` - Sök endast efter filmer.\n- `-s --series` - Sök endast efter serier\n- `-o --order-by [column]` - Med denna flagga kan man sortera antingen i bokstavsordning för titlar eller i fallande ordning efter årtal.\n- `-h --help` - Visar hjälptext om hur CLI:t kan användas.\n\n## Utvecklingsmiljön\n\nEn hel del har hänt _behind the scenes_ när det gäller 1.0.1 till 2.3.0 av IMDB CLI:t också - allt ifrån argument parsning till git hooks och testning.\n\n### Parsa argument\n\nMöjligheten att parsa argument, det vill säga använda `imdb --movies --title \"star wars\"` för att direkt söka enbart efter Star Wars filmer, kommer ifrån det populära npm paketet [commander](https://www.npmjs.com/package/commander).\n\nCommander gör det väldigt enkelt att skriva node-baserade CLI verktyg. Se bara det förenklade exemplet nedan som visar hur `-p --plot` flaggan används för att skapa upp en IMDb klass där sökresultat ska inkludera handlingar.\n\n```js:example-cli.js showLineNumbers\nconst program = require('commander');\n\nprogram\n  .option('-p, --plot', 'Show plot in search result')\n  .parse(process.argv);\n\nconst instance = new IMDb({showPlot: !!program.plot})\n```\n\n### Skrapning ersatt av REST API\n\nI version 1.0.1 så användes npm paketet Cherrio för att skrapa själva IMDb webbplatsen efter sökresultat och IMDb ID:n. I version 2.0.0 ersattes denna skrapning med API:et från [OMDb](http://www.omdbapi.com/).\n\nOm jag inte minns fel så var det API:et inte öppet när jag initalt skapade IMDb CLI:et - därav att jag byggde det som en scraper. Nu däremot är API:et öppet så länge man har en api nyckel och håller sig under 1.000 requests om dagen. Dessutom har man via OMDb API:et tillgång till IMDb ID:n, score!\n\n### Testning\n\nIMDb CLI använder numera Jest för unit tester, vilket underlättar tryggheten i eventuell framtida refaktorering och hjälper till att säkerställa kvalitet av ny funktionalitet. Även om CLI:t inte har oerhört många rader kod är det alltid skönt att ha kodbasen (någorlunda) testad.\n\n![IMDB-jest-test](/img/posts/imdb-jest-test.png)\n\n### Omskrivning med TypeScript\n\nHela CLI:et är sedan 2.3.0 omskrivet med TypeScript. Detta betyder att CLI:et numera har en byggprocess där källkoden finns i en `src/` mapp med TypeScript filer som sedan byggs till en `dist/` mapp.\n\nI och med att jest tester redan fanns innan omskrivningen till TypeScript genomfördes så blev refaktoreringen i och med befintliga tester en något mer trygg process.\n\n**Runt 60 fel** hittades i koden initialt i övergången till TypeScript. De flesta felen berodde på att variabler, funktionsparametrar och så vidare inte var typade - men ett och annan potentiellt problem kunde rättas till och och med övergångne till TypeScript.\n\nNu när koden är skriven med TypeScript och även testas med Jest så kommer framtida refaktorering och funktionstillväxt bli enklare då regression bättre kan undvikas och problem i koden kan upptäckas snabbare.\n\n### Git hooks\n\nTvå stycken git hooks används för att försöka förhindra problem, förebygga buggar och se till att koden har korrekt formatering innan den committas. För att hantera git hooks så används npm paketet [Husky](https://www.npmjs.com/package/husky).\n\n- **pre-commit** - Innan något committas så kollas det efter TypeScript errors och tslint används för att linta alla `*.ts` kod.\n- **pre-push** - För att det ens ska gå att pusha något till en remote branch så måste alla tester gå igenom först. Detta gör att det går lite långsammare om man committar och pushar ofta, men fungerar som en fail safe för att förhindra regression.\n\n## Kvar att göra?\n\nVad finns då kvar att göra, tro? I skrivande stund vet jag inte riktigt faktiskt. Kanske har jag en lista med nya features att gå igenom när jag använt IMDb CLI:t i två år till och släpper version 3.0.0 eller dylikt...\n\n![IMDB-cli-in-action](/img/posts/imdb-cli-in-action.png)\n","code":"var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},l=(a,e,t,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!g.call(a,r)&&r!==t&&i(a,r,{get:()=>e[r],enumerable:!(s=m(e,r))||s.enumerable});return a};var v=(a,e,t)=>(t=a!=null?h(k(a)):{},l(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),b=a=>l(i({},\"__esModule\",{value:!0}),a);var d=u((x,c)=>{c.exports=_jsx_runtime});var D={};f(D,{default:()=>y,frontmatter:()=>N});var n=v(d()),N={title:\"IMDb CLI version 1.0.1 till 2.3.0\",summary:\"Detta \\xE4r vad som har h\\xE4nt fr\\xE5n version 1.0.1 till version 2.3.0.\",date:new Date(1562544e6)};function o(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",img:\"img\",ul:\"ul\",li:\"li\",code:\"code\",em:\"em\",h3:\"h3\",div:\"div\",pre:\"pre\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:'Hur mycket kan man g\\xF6ra med ett \"enkelt\" CLI f\\xF6r att h\\xE4mta information om filmer och serier fr\\xE5n IMDb? Ganska mycket visar det sig. Det h\\xE4r \\xE4r vad som har h\\xE4nt med IMDb verktyget fr\\xE5n version 1.0.1 till 2.3.0.'}),`\n`,(0,n.jsxs)(e.p,{children:[\"Jag har tidigare \",(0,n.jsx)(e.a,{href:\"/blogg/node-cli-for-att-skrapa-imdb\",children:\"skrivit\"}),' lite om det node-baserade CLI verktyg jag skapade f\\xF6r att enkelt komma \\xE5t filmers och tv-seriers \"IMDb ID:n\". Nu har jag anv\\xE4nt verson 1.0.1 av verktyget sen i septemper 2017 och k\\xE4nde att det var dags att g\\xF6ra CLI:t mer flexibelt, d\\xE5 jag av och till k\\xE4nde att det var viss funktionalitet som saknades.']}),`\n`,(0,n.jsxs)(e.h2,{id:\"ny-funktionalitet\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#ny-funktionalitet\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Ny funktionalitet\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Till och fr\\xE5n k\\xE4ndes CLI:t inte tillr\\xE4ckligt flexibelt n\\xE4r jag anv\\xE4nde det och m\\xE5nga g\\xE5nger hade jag velat ha ett b\\xE4ttre sammanhang n\\xE4r s\\xF6kresultat presenterades i en tabell i terminalen. I 1.0.0 visades enbart titlar, \\xE5rtal och IMDB ID:n. Jag k\\xE4nde \\xE4ven att det vore smidigt att enbart s\\xF6ka p\\xE5 antingen filmer eller serier och kunna sortera s\\xF6kresultatet utifr\\xE5n \\xE5rtal eller titlar.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Bilden h\\xE4r nedan sammanfattar den nya funktionalitet har tillkommit under resans g\\xE5ng fr\\xE5n 1.0.1 till 2.3.0.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-help-text.png\",alt:\"IMDB-cli-help\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-v --version\"}),\" - Skriver ut versionen av CLI:t.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-p --plot\"}),\" - Anv\\xE4nder man denna flagga s\\xE5 anv\\xE4nds filmernas och seriernas handling i s\\xF6kresultatet. Default s\\xE5 trunkeras handling till ett visst antal tecken.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-l --limit-plot [number]\"}),\" - Denna flagga l\\xE5ter anv\\xE4ndaren sj\\xE4lv best\\xE4mma hur l\\xE5ng handlingen ska vara i s\\xF6kresultatet innan det trunkeras.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-t --title\"}),\" - Denna flagga g\\xF6r att man kan s\\xF6ka direkt n\\xE4r man anropar CLI:t. Tidigare s\\xE5 skrev man bara \",(0,n.jsx)(e.code,{children:\"imdb\"}),\" och tyckte \",(0,n.jsx)(e.em,{children:\"ENTER\"}),\" f\\xF6r att sedan mata in en titel att s\\xF6ka efter.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-m --movies\"}),\" - S\\xF6k endast efter filmer.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-s --series\"}),\" - S\\xF6k endast efter serier\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-o --order-by [column]\"}),\" - Med denna flagga kan man sortera antingen i bokstavsordning f\\xF6r titlar eller i fallande ordning efter \\xE5rtal.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-h --help\"}),\" - Visar hj\\xE4lptext om hur CLI:t kan anv\\xE4ndas.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"utvecklingsmilj\\xF6n\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#utvecklingsmilj\\xF6n\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Utvecklingsmilj\\xF6n\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"En hel del har h\\xE4nt \",(0,n.jsx)(e.em,{children:\"behind the scenes\"}),\" n\\xE4r det g\\xE4ller 1.0.1 till 2.3.0 av IMDB CLI:t ocks\\xE5 - allt ifr\\xE5n argument parsning till git hooks och testning.\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"parsa-argument\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#parsa-argument\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Parsa argument\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"M\\xF6jligheten att parsa argument, det vill s\\xE4ga anv\\xE4nda \",(0,n.jsx)(e.code,{children:'imdb --movies --title \"star wars\"'}),\" f\\xF6r att direkt s\\xF6ka enbart efter Star Wars filmer, kommer ifr\\xE5n det popul\\xE4ra npm paketet \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/commander\",children:\"commander\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Commander g\\xF6r det v\\xE4ldigt enkelt att skriva node-baserade CLI verktyg. Se bara det f\\xF6renklade exemplet nedan som visar hur \",(0,n.jsx)(e.code,{children:\"-p --plot\"}),\" flaggan anv\\xE4nds f\\xF6r att skapa upp en IMDb klass d\\xE4r s\\xF6kresultat ska inkludera handlingar.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-cli.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" program \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'commander'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`program\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"option\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'-p, --plot'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Show plot in search result'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"argv\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" instance \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IMDb\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"showPlot\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"plot\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"skrapning-ersatt-av-rest-api\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skrapning-ersatt-av-rest-api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Skrapning ersatt av REST API\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I version 1.0.1 s\\xE5 anv\\xE4ndes npm paketet Cherrio f\\xF6r att skrapa sj\\xE4lva IMDb webbplatsen efter s\\xF6kresultat och IMDb ID:n. I version 2.0.0 ersattes denna skrapning med API:et fr\\xE5n \",(0,n.jsx)(e.a,{href:\"http://www.omdbapi.com/\",children:\"OMDb\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Om jag inte minns fel s\\xE5 var det API:et inte \\xF6ppet n\\xE4r jag initalt skapade IMDb CLI:et - d\\xE4rav att jag byggde det som en scraper. Nu d\\xE4remot \\xE4r API:et \\xF6ppet s\\xE5 l\\xE4nge man har en api nyckel och h\\xE5ller sig under 1.000 requests om dagen. Dessutom har man via OMDb API:et tillg\\xE5ng till IMDb ID:n, score!\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"testning\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#testning\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Testning\"]}),`\n`,(0,n.jsx)(e.p,{children:\"IMDb CLI anv\\xE4nder numera Jest f\\xF6r unit tester, vilket underl\\xE4ttar tryggheten i eventuell framtida refaktorering och hj\\xE4lper till att s\\xE4kerst\\xE4lla kvalitet av ny funktionalitet. \\xC4ven om CLI:t inte har oerh\\xF6rt m\\xE5nga rader kod \\xE4r det alltid sk\\xF6nt att ha kodbasen (n\\xE5gorlunda) testad.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-jest-test.png\",alt:\"IMDB-jest-test\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"omskrivning-med-typescript\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#omskrivning-med-typescript\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Omskrivning med TypeScript\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hela CLI:et \\xE4r sedan 2.3.0 omskrivet med TypeScript. Detta betyder att CLI:et numera har en byggprocess d\\xE4r k\\xE4llkoden finns i en \",(0,n.jsx)(e.code,{children:\"src/\"}),\" mapp med TypeScript filer som sedan byggs till en \",(0,n.jsx)(e.code,{children:\"dist/\"}),\" mapp.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I och med att jest tester redan fanns innan omskrivningen till TypeScript genomf\\xF6rdes s\\xE5 blev refaktoreringen i och med befintliga tester en n\\xE5got mer trygg process.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Runt 60 fel\"}),\" hittades i koden initialt i \\xF6verg\\xE5ngen till TypeScript. De flesta felen berodde p\\xE5 att variabler, funktionsparametrar och s\\xE5 vidare inte var typade - men ett och annan potentiellt problem kunde r\\xE4ttas till och och med \\xF6verg\\xE5ngne till TypeScript.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Nu n\\xE4r koden \\xE4r skriven med TypeScript och \\xE4ven testas med Jest s\\xE5 kommer framtida refaktorering och funktionstillv\\xE4xt bli enklare d\\xE5 regression b\\xE4ttre kan undvikas och problem i koden kan uppt\\xE4ckas snabbare.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"git-hooks\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#git-hooks\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Git hooks\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Tv\\xE5 stycken git hooks anv\\xE4nds f\\xF6r att f\\xF6rs\\xF6ka f\\xF6rhindra problem, f\\xF6rebygga buggar och se till att koden har korrekt formatering innan den committas. F\\xF6r att hantera git hooks s\\xE5 anv\\xE4nds npm paketet \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/husky\",children:\"Husky\"}),\".\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"pre-commit\"}),\" - Innan n\\xE5got committas s\\xE5 kollas det efter TypeScript errors och tslint anv\\xE4nds f\\xF6r att linta alla \",(0,n.jsx)(e.code,{children:\"*.ts\"}),\" kod.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"pre-push\"}),\" - F\\xF6r att det ens ska g\\xE5 att pusha n\\xE5got till en remote branch s\\xE5 m\\xE5ste alla tester g\\xE5 igenom f\\xF6rst. Detta g\\xF6r att det g\\xE5r lite l\\xE5ngsammare om man committar och pushar ofta, men fungerar som en fail safe f\\xF6r att f\\xF6rhindra regression.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"kvar-att-g\\xF6ra\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#kvar-att-g\\xF6ra\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Kvar att g\\xF6ra?\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Vad finns d\\xE5 kvar att g\\xF6ra, tro? I skrivande stund vet jag inte riktigt faktiskt. Kanske har jag en lista med nya features att g\\xE5 igenom n\\xE4r jag anv\\xE4nt IMDb CLI:t i tv\\xE5 \\xE5r till och sl\\xE4pper version 3.0.0 eller dylikt...\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-cli-in-action.png\",alt:\"IMDB-cli-in-action\"})})]})}function I(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var y=I;return b(D);})();\n;return Component;"},"_id":"posts/imdb-cli-version-2-3-0.mdx","_raw":{"sourceFilePath":"posts/imdb-cli-version-2-3-0.mdx","sourceFileName":"imdb-cli-version-2-3-0.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/imdb-cli-version-2-3-0"},"type":"Post","url":"/blogg/imdb-cli-version-2-3-0","dateFormatted":"2019-07-08"},"nextPost":{"title":"Att väcka liv i ett 3 år gammalt projekt i 6 enkla steg","date":"2020-03-29T00:00:00.000Z","summary":"För tre år sedan skapade jag ett projekt som skrapade Aftonbladet dagligen. Det här är historien om vad som hände 3 år senare.","body":{"raw":"\n## Bakgrund\n\nÅr 2017 använda jag PHP-ramverket Laravel en del för att bygga sajter, tillsammans med Vue som frontend. En sajt jag byggde gick ut på att varje dag skrapa Aftonbladet på lite onödig information så att sajten kunde visa upp denna information i en schysst graf. Sajten skrapade hur många ✔ Aftonbladet använde varje dag och sparade ner antalet i en postgesdatabas som snurrade på Heroku.\n\nJag byggde sajten, satte upp ett cronjob i Heroku, implementerade en graf som visade antalet ”checkers” de senaste dagarna och gick sedan vidare till andra projekt.\n\nDagarna gick, månaderna gick, åren gick och plötsligt är det år 2020 och den här sajten har samlat in 3 års data. Det fanns ett litet problem dock. Sajten visade bara data för de senaste dagarna i en enda stackars graf. Med 3 års data borde man kunna få till lite mer roliga grafer och skära i datat på lite alla möjliga sätt för att presentera datat.\n\n### Vägen framåt\n\nJag stod inför ett val. Mycket har hänt sedan 2017 och jag sysslar för det mesta med fullstack JavaScript/TypeScript och inte så mycket PHP längre. Antingen dammar jag av mina PHP skills eller så tar jag tillfälle i akt att helt enkelt bygga om hela det här projektet.\n\nJag byggde såklart om hela projektet… Ingen sten lämnades orörd utan frontend och backend byttes ut och även databasen byttes ut.\n\nDet här är alltså en liten historia om hur jag väckte liv i ett tre år gammalt projekt och bytte ut Vue, Laravel och Postgres mot React, Next.js och Google Firestore i 6 ”enkla” steg.\n\n## Steg 1: Hitta lämplig fullstack JavaScript-lösning\n\nDå jag inte ville spendera alldeles för mycket tid med att sätta upp en utvecklingsmiljö utan istället förlita mig på en lösning som är lite mer åt ”Convention over configuration” hade jag en lista med önskemål att uppfylla för en fullstack JavaScript-lösning:\n\n1. **Bra** TypeScript support.\n2. **Reactbaserad** frontend.\n3. **Snabb och enkel** node-implementation då jag bara behöver göra ett fåtal API-anrop.\n4. **Snabbt** att komma igång utan överdrivet mycket tooling.\n\n### 1.1 Rätt verktyg för jobbet\n\nUtifrån denna lista tyckte jag att react-ramverket Next.js checkade av de mesta av mina önskemål då det är reactbaserat, har bra TypeScript stöd, Serverless functions för enkel backend och en rad andra schyssta features.\n\n✓ Steg 1 check!\n\n## Steg 2: Exportera data och se över datamodellen\n\nDet tidigare projektet sparade alltså data i en Postgres-databas som snurrade på Heroku. Det var alltså inte speciellt svårt att exportera den databasen:\n\n1. Logga in i Heroku-projektet med Heroku CLI\n2. Kopiera ned all data till csv-fil.\n\n### 2.1 Exportera data\n\nJag använde följande kommando när jag väl var inloggad i Heroku-projektets postgres från terminalen:\n\n```bash\n$ \\COPY checkers TO '~/aftonbladet-checkers.csv' WITH (FORMAT csv, DELIMITER ',',  HEADER true);\n```\n\nI och med att jag kör med JavaScript på backend-sidan så kändes det mest lämpligt att jobba med json och med tanke på att det nya projektet (steg 3 spoilers) sparar data i Google Firestore.\n\n### 2.2 Se över datamodellen\n\nJag konverterade datan från csv-filen till json och såg över datamodellen något - döpte om något fält men i övrigt kändes det nya json-baserade datat redo för att importeras in i en ny källa.\n\n✓ Steg 2 check!\n\n## Steg 3: Importera data till ny källa\n\nJag ville ha en enkel lösning när det gällde datakälla och helst något baserat på NoSQL. Jag ville i princip bara spara en platt lista med json-objekt som representerade varje skrapad dag med antal checkers. Jag har tidigare använt Googles Firestore lösning för en enklare backend och denna gång använde jag mig av Googles nyare lösning - Firestore.\n\n### 3.1 Importera historisk data\n\nMen nu hade jag alltså data för 3 år som behöver seedas in i Firestore. Det hade man kunnat lösa på en rad olika sätt men jag implementerade seedning av datat med hjälp av ett API-anrop (Next.js serverless function).\n\n### 3.2 API för att slanga in data\n\nEn schysst grej med Next är att om man exporterar en modul i `pages/api/example.ts` så representerar modulen ett api anrop. Det är alltså filstrukturen som bestämmer hur api-anropen sätts upp.Jag skapade ett API-anrop på det här sättet och skyddade anropet bakom API nyckel och nu hade jag ett sätt att mata den nya källan med all historisk data.\n\n✓ Steg 3 check!\n\n## Steg 4: Bygg ny backend\n\nSom tidigare nämnt så bygger ju backend i Next på serverless functions. Min backend i det här fallet byggdes upp av olika API-anrop för att seeda, hämta data och även api-anrop för att skrapa dagens antal checkers. Att ha filstruktur-baserad API-anropsuppsättning (säg det snabbt tre gånger) var väldigt smidigt i ett sånt här projekt som ändå är så pass litet.\n\n### 4.1 Enkel routing\n\nJag behövde aldrig sätta upp egna route-handles p.g.a det utan behövde bara skapa rätt filer på rätt ställe i filstrukturen. I och med att jag inte ville lägga flera helger på detta projekt så passade Next:s upplägg med serverless functions perfekt.\n\n✓ Steg 4 check!\n\n## Steg 5: Bygg ny frontend\n\nHistoriskt sätt har jag ägnat mig mest åt Vue när det kommer till frontend - mycket för att jag tidigare använde en del Laravel som hade Vue som sitt default frontend. Men av olika skäl använder jag mest React nuförtiden, som dessutom är som handen i handsken när det kommer till TypeScript.\n\n### 5.1 Konsumera och massera data\n\nAtt bygga frontend gick rätt fort. Endast ett API-anrop till backend implementerades och en rad utils-funktioner implementerades för att ”massera” datat på olika sätt för att kunna presentera det i olika grafer såsom exempelvis årsvis, kvartalsvis och enligt veckans dagar.\n\n### 5.2 Fördelen med fullstack JavaScript\n\nFördelen med fullstack JavaScript innebär ju att alla utils-funktioner skulle kunna refaktoreras att användas i en serverless function istället - om man nu vill flytta mer logik från frontend till backend. Men med tanke på projektets storlek kändes det som att frontenden lika gärna kunde göra ett anrop och sen massera samma data på olika sätt för att fylla graferna.\n\n✓ Steg 5 check!\n\n## Steg 6: Förbättra infrastrukturen och se över CI/CD\n\nFörbättra och förbättra… Infrastrukturen tyckte jag egentligen inte att jag behövde göra speciellt mycket åt.\n\n### 6.1 Sätt upp Travis CI\n\nHeroku funkar bra och att applikationer byggs om när något händer på master branchen är ju väldigt schysst. Däremot hade det ju varit lite av en trygghet om något CI bygge skedde på varje push och varje merge request - för att försöka förhindra problem innan de uppstår.\nJag kopplade Travis CI till repot och på varje push och merge request körs ett skript som lintar projektet och verifierar att projektet går att bygga.\n\n### 6.2 Cronjob\n\nMen hur blev det med cronjob för att skrapa Aftonbladet dagligen? Ja… tidigare användes ju Laravel som hade väldigt schyssta möjligheter att schemalägga jobb. Next är lite mer barebones. Ett litet fulhack implementerades där ett vanligt bash-script CURL:ar API:et - som i sin tur skrapar dagens antal checkers och sparar ned dom i Firestore. I Heroku kan man schemalägga aktiviteter och helt enkelt så triggas det skriptet dagligen - enkelt men effektivt.\n\n✓ Steg 6 check!\n\n## Slutet gott allting gott\n\nDet var alltså min lilla historia om hur jag i 6 steg väckte liv ett 3 år gammalt projekt. Eller tja.. väckte liv i och väkte liv i...Jag slängde ut allting förutom själva datan - men datan var ju ändå trots allt det viktigaste att spara och behålla i en återuppståndelse likt denna historia.\n\nFör den som är intresserad finns källkoden [här](https://github.com/danielv14/aftonbladet-checkr-next) och sajten går att besöka på [https://aftonbladet-checker.Herokuapp.com/](https://aftonbladet-checker.Herokuapp.com/)\n","code":"var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var u=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),f=(t,e)=>{for(var n in e)i(t,n,{get:e[n],enumerable:!0})},l=(t,e,n,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!k.call(t,r)&&r!==n&&i(t,r,{get:()=>e[r],enumerable:!(s=g(e,r))||s.enumerable});return t};var v=(t,e,n)=>(n=t!=null?h(m(t)):{},l(e||!t||!t.__esModule?i(n,\"default\",{value:t,enumerable:!0}):n,t)),b=t=>l(i({},\"__esModule\",{value:!0}),t);var o=u((S,d)=>{d.exports=_jsx_runtime});var I={};f(I,{default:()=>x,frontmatter:()=>j});var a=v(o()),j={title:\"Att v\\xE4cka liv i ett 3 \\xE5r gammalt projekt i 6 enkla steg\",summary:\"F\\xF6r tre \\xE5r sedan skapade jag ett projekt som skrapade Aftonbladet dagligen. Det h\\xE4r \\xE4r historien om vad som h\\xE4nde 3 \\xE5r senare.\",date:new Date(158544e7)};function c(t){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",h3:\"h3\",ol:\"ol\",li:\"li\",strong:\"strong\",pre:\"pre\",code:\"code\"},t.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h2,{id:\"bakgrund\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#bakgrund\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Bakgrund\"]}),`\n`,(0,a.jsx)(e.p,{children:\"\\xC5r 2017 anv\\xE4nda jag PHP-ramverket Laravel en del f\\xF6r att bygga sajter, tillsammans med Vue som frontend. En sajt jag byggde gick ut p\\xE5 att varje dag skrapa Aftonbladet p\\xE5 lite on\\xF6dig information s\\xE5 att sajten kunde visa upp denna information i en schysst graf. Sajten skrapade hur m\\xE5nga \\u2714 Aftonbladet anv\\xE4nde varje dag och sparade ner antalet i en postgesdatabas som snurrade p\\xE5 Heroku.\"}),`\n`,(0,a.jsx)(e.p,{children:\"Jag byggde sajten, satte upp ett cronjob i Heroku, implementerade en graf som visade antalet \\u201Dcheckers\\u201D de senaste dagarna och gick sedan vidare till andra projekt.\"}),`\n`,(0,a.jsx)(e.p,{children:\"Dagarna gick, m\\xE5naderna gick, \\xE5ren gick och pl\\xF6tsligt \\xE4r det \\xE5r 2020 och den h\\xE4r sajten har samlat in 3 \\xE5rs data. Det fanns ett litet problem dock. Sajten visade bara data f\\xF6r de senaste dagarna i en enda stackars graf. Med 3 \\xE5rs data borde man kunna f\\xE5 till lite mer roliga grafer och sk\\xE4ra i datat p\\xE5 lite alla m\\xF6jliga s\\xE4tt f\\xF6r att presentera datat.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"v\\xE4gen-fram\\xE5t\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#v\\xE4gen-fram\\xE5t\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"V\\xE4gen fram\\xE5t\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Jag stod inf\\xF6r ett val. Mycket har h\\xE4nt sedan 2017 och jag sysslar f\\xF6r det mesta med fullstack JavaScript/TypeScript och inte s\\xE5 mycket PHP l\\xE4ngre. Antingen dammar jag av mina PHP skills eller s\\xE5 tar jag tillf\\xE4lle i akt att helt enkelt bygga om hela det h\\xE4r projektet.\"}),`\n`,(0,a.jsx)(e.p,{children:\"Jag byggde s\\xE5klart om hela projektet\\u2026 Ingen sten l\\xE4mnades or\\xF6rd utan frontend och backend byttes ut och \\xE4ven databasen byttes ut.\"}),`\n`,(0,a.jsx)(e.p,{children:\"Det h\\xE4r \\xE4r allts\\xE5 en liten historia om hur jag v\\xE4ckte liv i ett tre \\xE5r gammalt projekt och bytte ut Vue, Laravel och Postgres mot React, Next.js och Google Firestore i 6 \\u201Denkla\\u201D steg.\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"steg-1-hitta-l\\xE4mplig-fullstack-javascript-l\\xF6sning\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#steg-1-hitta-l\\xE4mplig-fullstack-javascript-l\\xF6sning\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Steg 1: Hitta l\\xE4mplig fullstack JavaScript-l\\xF6sning\"]}),`\n`,(0,a.jsx)(e.p,{children:\"D\\xE5 jag inte ville spendera alldeles f\\xF6r mycket tid med att s\\xE4tta upp en utvecklingsmilj\\xF6 utan ist\\xE4llet f\\xF6rlita mig p\\xE5 en l\\xF6sning som \\xE4r lite mer \\xE5t \\u201DConvention over configuration\\u201D hade jag en lista med \\xF6nskem\\xE5l att uppfylla f\\xF6r en fullstack JavaScript-l\\xF6sning:\"}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:\"Bra\"}),\" TypeScript support.\"]}),`\n`,(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:\"Reactbaserad\"}),\" frontend.\"]}),`\n`,(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:\"Snabb och enkel\"}),\" node-implementation d\\xE5 jag bara beh\\xF6ver g\\xF6ra ett f\\xE5tal API-anrop.\"]}),`\n`,(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:\"Snabbt\"}),\" att komma ig\\xE5ng utan \\xF6verdrivet mycket tooling.\"]}),`\n`]}),`\n`,(0,a.jsxs)(e.h3,{id:\"11-r\\xE4tt-verktyg-f\\xF6r-jobbet\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#11-r\\xE4tt-verktyg-f\\xF6r-jobbet\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"1.1 R\\xE4tt verktyg f\\xF6r jobbet\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Utifr\\xE5n denna lista tyckte jag att react-ramverket Next.js checkade av de mesta av mina \\xF6nskem\\xE5l d\\xE5 det \\xE4r reactbaserat, har bra TypeScript st\\xF6d, Serverless functions f\\xF6r enkel backend och en rad andra schyssta features.\"}),`\n`,(0,a.jsx)(e.p,{children:\"\\u2713 Steg 1 check!\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"steg-2-exportera-data-och-se-\\xF6ver-datamodellen\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#steg-2-exportera-data-och-se-\\xF6ver-datamodellen\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Steg 2: Exportera data och se \\xF6ver datamodellen\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Det tidigare projektet sparade allts\\xE5 data i en Postgres-databas som snurrade p\\xE5 Heroku. Det var allts\\xE5 inte speciellt sv\\xE5rt att exportera den databasen:\"}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsx)(e.li,{children:\"Logga in i Heroku-projektet med Heroku CLI\"}),`\n`,(0,a.jsx)(e.li,{children:\"Kopiera ned all data till csv-fil.\"}),`\n`]}),`\n`,(0,a.jsxs)(e.h3,{id:\"21-exportera-data\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#21-exportera-data\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"2.1 Exportera data\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Jag anv\\xE4nde f\\xF6ljande kommando n\\xE4r jag v\\xE4l var inloggad i Heroku-projektets postgres fr\\xE5n terminalen:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,a.jsx)(e.span,{className:\"token punctuation\",children:\"\\\\\"}),\"COPY checkers TO \",(0,a.jsx)(e.span,{className:\"token string\",children:\"'~/aftonbladet-checkers.csv'\"}),\" WITH \",(0,a.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"FORMAT csv, DELIMITER \",(0,a.jsx)(e.span,{className:\"token string\",children:\"','\"}),\",  HEADER \",(0,a.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,a.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,a.jsx)(e.p,{children:\"I och med att jag k\\xF6r med JavaScript p\\xE5 backend-sidan s\\xE5 k\\xE4ndes det mest l\\xE4mpligt att jobba med json och med tanke p\\xE5 att det nya projektet (steg 3 spoilers) sparar data i Google Firestore.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"22-se-\\xF6ver-datamodellen\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#22-se-\\xF6ver-datamodellen\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"2.2 Se \\xF6ver datamodellen\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Jag konverterade datan fr\\xE5n csv-filen till json och s\\xE5g \\xF6ver datamodellen n\\xE5got - d\\xF6pte om n\\xE5got f\\xE4lt men i \\xF6vrigt k\\xE4ndes det nya json-baserade datat redo f\\xF6r att importeras in i en ny k\\xE4lla.\"}),`\n`,(0,a.jsx)(e.p,{children:\"\\u2713 Steg 2 check!\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"steg-3-importera-data-till-ny-k\\xE4lla\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#steg-3-importera-data-till-ny-k\\xE4lla\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Steg 3: Importera data till ny k\\xE4lla\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Jag ville ha en enkel l\\xF6sning n\\xE4r det g\\xE4llde datak\\xE4lla och helst n\\xE5got baserat p\\xE5 NoSQL. Jag ville i princip bara spara en platt lista med json-objekt som representerade varje skrapad dag med antal checkers. Jag har tidigare anv\\xE4nt Googles Firestore l\\xF6sning f\\xF6r en enklare backend och denna g\\xE5ng anv\\xE4nde jag mig av Googles nyare l\\xF6sning - Firestore.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"31-importera-historisk-data\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#31-importera-historisk-data\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"3.1 Importera historisk data\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Men nu hade jag allts\\xE5 data f\\xF6r 3 \\xE5r som beh\\xF6ver seedas in i Firestore. Det hade man kunnat l\\xF6sa p\\xE5 en rad olika s\\xE4tt men jag implementerade seedning av datat med hj\\xE4lp av ett API-anrop (Next.js serverless function).\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"32-api-f\\xF6r-att-slanga-in-data\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#32-api-f\\xF6r-att-slanga-in-data\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"3.2 API f\\xF6r att slanga in data\"]}),`\n`,(0,a.jsxs)(e.p,{children:[\"En schysst grej med Next \\xE4r att om man exporterar en modul i \",(0,a.jsx)(e.code,{children:\"pages/api/example.ts\"}),\" s\\xE5 representerar modulen ett api anrop. Det \\xE4r allts\\xE5 filstrukturen som best\\xE4mmer hur api-anropen s\\xE4tts upp.Jag skapade ett API-anrop p\\xE5 det h\\xE4r s\\xE4ttet och skyddade anropet bakom API nyckel och nu hade jag ett s\\xE4tt att mata den nya k\\xE4llan med all historisk data.\"]}),`\n`,(0,a.jsx)(e.p,{children:\"\\u2713 Steg 3 check!\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"steg-4-bygg-ny-backend\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#steg-4-bygg-ny-backend\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Steg 4: Bygg ny backend\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Som tidigare n\\xE4mnt s\\xE5 bygger ju backend i Next p\\xE5 serverless functions. Min backend i det h\\xE4r fallet byggdes upp av olika API-anrop f\\xF6r att seeda, h\\xE4mta data och \\xE4ven api-anrop f\\xF6r att skrapa dagens antal checkers. Att ha filstruktur-baserad API-anropsupps\\xE4ttning (s\\xE4g det snabbt tre g\\xE5nger) var v\\xE4ldigt smidigt i ett s\\xE5nt h\\xE4r projekt som \\xE4nd\\xE5 \\xE4r s\\xE5 pass litet.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"41-enkel-routing\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#41-enkel-routing\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"4.1 Enkel routing\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Jag beh\\xF6vde aldrig s\\xE4tta upp egna route-handles p.g.a det utan beh\\xF6vde bara skapa r\\xE4tt filer p\\xE5 r\\xE4tt st\\xE4lle i filstrukturen. I och med att jag inte ville l\\xE4gga flera helger p\\xE5 detta projekt s\\xE5 passade Next:s uppl\\xE4gg med serverless functions perfekt.\"}),`\n`,(0,a.jsx)(e.p,{children:\"\\u2713 Steg 4 check!\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"steg-5-bygg-ny-frontend\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#steg-5-bygg-ny-frontend\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Steg 5: Bygg ny frontend\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Historiskt s\\xE4tt har jag \\xE4gnat mig mest \\xE5t Vue n\\xE4r det kommer till frontend - mycket f\\xF6r att jag tidigare anv\\xE4nde en del Laravel som hade Vue som sitt default frontend. Men av olika sk\\xE4l anv\\xE4nder jag mest React nuf\\xF6rtiden, som dessutom \\xE4r som handen i handsken n\\xE4r det kommer till TypeScript.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"51-konsumera-och-massera-data\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#51-konsumera-och-massera-data\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"5.1 Konsumera och massera data\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Att bygga frontend gick r\\xE4tt fort. Endast ett API-anrop till backend implementerades och en rad utils-funktioner implementerades f\\xF6r att \\u201Dmassera\\u201D datat p\\xE5 olika s\\xE4tt f\\xF6r att kunna presentera det i olika grafer s\\xE5som exempelvis \\xE5rsvis, kvartalsvis och enligt veckans dagar.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"52-f\\xF6rdelen-med-fullstack-javascript\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#52-f\\xF6rdelen-med-fullstack-javascript\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"5.2 F\\xF6rdelen med fullstack JavaScript\"]}),`\n`,(0,a.jsx)(e.p,{children:\"F\\xF6rdelen med fullstack JavaScript inneb\\xE4r ju att alla utils-funktioner skulle kunna refaktoreras att anv\\xE4ndas i en serverless function ist\\xE4llet - om man nu vill flytta mer logik fr\\xE5n frontend till backend. Men med tanke p\\xE5 projektets storlek k\\xE4ndes det som att frontenden lika g\\xE4rna kunde g\\xF6ra ett anrop och sen massera samma data p\\xE5 olika s\\xE4tt f\\xF6r att fylla graferna.\"}),`\n`,(0,a.jsx)(e.p,{children:\"\\u2713 Steg 5 check!\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"steg-6-f\\xF6rb\\xE4ttra-infrastrukturen-och-se-\\xF6ver-cicd\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#steg-6-f\\xF6rb\\xE4ttra-infrastrukturen-och-se-\\xF6ver-cicd\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Steg 6: F\\xF6rb\\xE4ttra infrastrukturen och se \\xF6ver CI/CD\"]}),`\n`,(0,a.jsx)(e.p,{children:\"F\\xF6rb\\xE4ttra och f\\xF6rb\\xE4ttra\\u2026 Infrastrukturen tyckte jag egentligen inte att jag beh\\xF6vde g\\xF6ra speciellt mycket \\xE5t.\"}),`\n`,(0,a.jsxs)(e.h3,{id:\"61-s\\xE4tt-upp-travis-ci\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#61-s\\xE4tt-upp-travis-ci\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"6.1 S\\xE4tt upp Travis CI\"]}),`\n`,(0,a.jsx)(e.p,{children:`Heroku funkar bra och att applikationer byggs om n\\xE4r n\\xE5got h\\xE4nder p\\xE5 master branchen \\xE4r ju v\\xE4ldigt schysst. D\\xE4remot hade det ju varit lite av en trygghet om n\\xE5got CI bygge skedde p\\xE5 varje push och varje merge request - f\\xF6r att f\\xF6rs\\xF6ka f\\xF6rhindra problem innan de uppst\\xE5r.\nJag kopplade Travis CI till repot och p\\xE5 varje push och merge request k\\xF6rs ett skript som lintar projektet och verifierar att projektet g\\xE5r att bygga.`}),`\n`,(0,a.jsxs)(e.h3,{id:\"62-cronjob\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#62-cronjob\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"6.2 Cronjob\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Men hur blev det med cronjob f\\xF6r att skrapa Aftonbladet dagligen? Ja\\u2026 tidigare anv\\xE4ndes ju Laravel som hade v\\xE4ldigt schyssta m\\xF6jligheter att schemal\\xE4gga jobb. Next \\xE4r lite mer barebones. Ett litet fulhack implementerades d\\xE4r ett vanligt bash-script CURL:ar API:et - som i sin tur skrapar dagens antal checkers och sparar ned dom i Firestore. I Heroku kan man schemal\\xE4gga aktiviteter och helt enkelt s\\xE5 triggas det skriptet dagligen - enkelt men effektivt.\"}),`\n`,(0,a.jsx)(e.p,{children:\"\\u2713 Steg 6 check!\"}),`\n`,(0,a.jsxs)(e.h2,{id:\"slutet-gott-allting-gott\",children:[(0,a.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#slutet-gott-allting-gott\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Slutet gott allting gott\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Det var allts\\xE5 min lilla historia om hur jag i 6 steg v\\xE4ckte liv ett 3 \\xE5r gammalt projekt. Eller tja.. v\\xE4ckte liv i och v\\xE4kte liv i...Jag sl\\xE4ngde ut allting f\\xF6rutom sj\\xE4lva datan - men datan var ju \\xE4nd\\xE5 trots allt det viktigaste att spara och beh\\xE5lla i en \\xE5teruppst\\xE5ndelse likt denna historia.\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"F\\xF6r den som \\xE4r intresserad finns k\\xE4llkoden \",(0,a.jsx)(e.a,{href:\"https://github.com/danielv14/aftonbladet-checkr-next\",children:\"h\\xE4r\"}),\" och sajten g\\xE5r att bes\\xF6ka p\\xE5 \",(0,a.jsx)(e.a,{href:\"https://aftonbladet-checker.Herokuapp.com/\",children:\"https://aftonbladet-checker.Herokuapp.com/\"})]})]})}function y(t={}){let{wrapper:e}=t.components||{};return e?(0,a.jsx)(e,Object.assign({},t,{children:(0,a.jsx)(c,t)})):c(t)}var x=y;return b(I);})();\n;return Component;"},"_id":"posts/att-vacka-liv-i-ett-3-ar-gammalt-projekt.mdx","_raw":{"sourceFilePath":"posts/att-vacka-liv-i-ett-3-ar-gammalt-projekt.mdx","sourceFileName":"att-vacka-liv-i-ett-3-ar-gammalt-projekt.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/att-vacka-liv-i-ett-3-ar-gammalt-projekt"},"type":"Post","url":"/blogg/att-vacka-liv-i-ett-3-ar-gammalt-projekt","dateFormatted":"2020-03-29"}},"__N_SSG":true}