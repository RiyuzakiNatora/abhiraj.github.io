<!DOCTYPE html><html lang="sv"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta property="og:url" content="danielvernberg.se"/><meta property="og:locale" content="sv_SE"/><link rel="canonical" href="danielvernberg.se"/><title>Styled Components och ikonhantering i olika stadier - Daniel Vernberg</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Hur många gånger kan man behöva refaktorera ikoner egentligen? Minst två gånger i alla fall - allt eftersom behovet på funktionalitet ändras."/><meta property="og:title" content="Styled Components och ikonhantering i olika stadier"/><meta property="og:description" content="Hur många gånger kan man behöva refaktorera ikoner egentligen? Minst två gånger i alla fall - allt eftersom behovet på funktionalitet ändras."/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-07-03T00:00:00.000Z"/><meta name="next-head-count" content="13"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;👨‍💻&lt;/text&gt;&lt;/svg&gt;"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><style id="stitches">--sxs{--sxs:0 t-fyIhqy}@media{:root,.t-fyIhqy{--radii-small:4px;--radii-default:6px;--radii-rouded:10000px;--shadows-main:0px 4px 10px rgba(0, 0, 0, 0.09);--shadows-button:0px 4px 7px hsl(223.10000000000002, 100%, 87.5%);--shadows-buttonHover:0px 4px 10px hsl(223.10000000000002, 100%, 77%);--colors-primary:#6691FF;--colors-primaryDarken:#5484FF;--colors-secondary:#3fc179;--colors-backgroundColor:#FFF;--colors-backgroundColorSecondary:#FFF;--colors-backgroundColorHighlight:#EEF3FF;--colors-backgroundColorNavBar:hsl(0deg 0% 100% / 75%);--colors-textColor:#585858;--colors-textMutedColor:#a2a2a2;--colors-headingColor:#444444;--colors-backgroundGradient:linear-gradient(45deg, var(--colors-primary), var(--colors-secondary));--colors-backgroundGradintDarker:linear-gradient(45deg, var(--colors-primaryDarken), var(--colors-secondary));--fonts-main:'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;;--fonts-headings:'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;;--fonts-mono:'Fira Code', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;--fontSizes-0:0.8rem;--fontSizes-1:0.9rem;--fontSizes-2:1rem;--fontSizes-3:1.1rem;--fontSizes-4:1.2rem;--fontSizes-5:1.3rem;--fontSizes-6:1.5rem;--fontSizes-7:2rem;--fontSizes-base:16px;--fontSizes-baseDesktop:18px;--fontSizes-small:var(--fontSizes-1);--fontSizes-smaller:var(--fontSizes-0);--fontSizes-code:var(--fontSizes-0);--fontSizes-h1:var(--fontSizes-7);--fontSizes-h2:var(--fontSizes-6);--fontSizes-h3:var(--fontSizes-5);--fontSizes-h4:var(--fontSizes-4);--fontSizes-h5:var(--fontSizes-3);--fontSizes-h6:var(--fontSizes-2);--space-small:5px;--space-medium:10px;--space-large:20px;--space-mega:40px;--sizes-small:5px;--sizes-medium:10px;--sizes-large:20px;--sizes-mega:40px;--sizes-siteWidth:800px}}--sxs{--sxs:1 kUuBfw}@media{html,body,div,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}*[hidden]{display:none}body{background:var(--colors-backgroundColor);color:var(--colors-textColor);font-family:var(--fonts-main);font-weight:500}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-spacing:0}html{font-size:var(--fontSizes-base);-webkit-text-size-adjust:none;text-size-adjust:none}@media (min-width: 1024px){html{font-size:var(--fontSizes-baseDesktop)}}h1,h2,h3,h4,h5,h6{font-family:var(--fonts-headings);color:var(--colors-headingColor);line-height:1.2;letter-spacing:-0.5px;margin-top:1rem}h1,h2{margin-bottom:1rem;font-weight:700}h3,h4,h5,h6{font-weight:600;margin-bottom:0.7rem}h1{font-size:var(--fontSizes-h1)}h2{font-size:var(--fontSizes-h2)}h3{font-size:var(--fontSizes-h3)}h4{font-size:var(--fontSizes-h4)}h5{font-size:var(--fontSizes-h5)}h6{font-size:var(--fontSizes-h6)}a{color:var(--colors-primary);font-weight:bold;text-decoration:none;font-size:1rem;cursor:pointer}a:hover{text-decoration:underline}p,li{line-height:1.6}p{margin:0 0 1.2rem;overflow-wrap:break-word}ul{list-style:disc}ul li::marker{color:var(--colors-primary);font-size:var(--fontSizes-5)}ol{list-style:decimal}ol li::marker{color:var(--colors-primary);font-weight:bold;font-style:italic}ul,ol{margin-bottom:10px;padding-inline-start:1rem}li{margin:var(--space-medium) var(--space-small)}img{max-width:100%}pre{border-radius:var(--radii-default);font-size:1rem}blockquote{margin:0 0 1rem 0;padding:1rem;background:var(--colors-backgroundColorHighlight);border-radius:0.3rem}blockquote p{margin-bottom:0}code{font-family:var(--fonts-mono);font-size:var(--fontSizes-code);color:var(--colors-textColor);font-weight:bold}code:not([class^="language"]):after,code:not([class^="language"]):before{content:"`";font-weight:bold}strong{font-weight:bold;color:var(--colors-headingColor)}em{font-style:italic}span.token{font-size:var(--fontSizes-code)}}--sxs{--sxs:2 c-jGAclF c-bFBiOr c-bkUlwM c-bZNrxE c-gHYpeN c-jyhawZ c-hNeJhr c-cZmHrB c-dhzjXW PJLV c-jpsCDP c-fixGjY c-PJLV c-ifunjZ c-hnZZYz c-jNUAyN c-jKTQyv c-dVkrah c-gATxoi c-bPgfrJ c-bQzyIt c-bImmwG}@media{.c-jGAclF{box-shadow:var(--shadows-main);position:fixed;width:100%;background:var(--colors-backgroundColor);z-index:999}@supports (backdrop-filter: blur(20px)){.c-jGAclF{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);background:var(--colors-backgroundColorNavBar)}}.c-bFBiOr{width:100%;max-width:var(--sizes-siteWidth);margin:0 auto}.c-bkUlwM{margin:0 var(--space-large)}.c-bZNrxE{display:flex;flex-direction:row}.c-gHYpeN{width:100%;height:60px;align-items:center;font-family:var(--fonts-headings);font-weight:bold;font-size:var(--fontSizes-5)}.c-jyhawZ{font-weight:inherit;color:inherit;margin:0;padding:0}.c-jyhawZ:hover{text-decoration:none}.c-hNeJhr{color:var(--colors-textMutedColor)}.c-cZmHrB{flex:1}.c-dhzjXW{display:flex}.c-jpsCDP{padding-top:60px}.c-fixGjY{display:flex;flex-direction:column}@media (min-width: 768px){.c-ifunjZ{margin:0 -15px}}.c-jNUAyN{color:var(--colors-textMutedColor);font-size:var(--fontSizes-small);font-weight:400}.c-hnZZYz{cursor:pointer;border-radius:var(--radii-small);transition:background-color 0.2s ease;padding:var(--space-small)}.c-hnZZYz:hover{background-color:var(--colors-backgroundColorHighlight)}@media (min-width: 768px){.c-hnZZYz{padding:var(--space-small) var(--space-large)}}.c-jKTQyv{margin:0;color:var(--colors-textMutedColor);font-weight:bold}.c-dVkrah{---tokenBackground:#2E3440;---tokenBackgroundHighlight:#3C4453;---tokenCommentColor:#636f88;---tokenRegexColor:#ebcb8b;---tokenPropertyColor:#81A1C1;---tokenNumberColor:#B48EAD;---tokenSelectorColor:rgb(199, 146, 234);---tokenBooleanColor:var(---tokenPropertyColor);---tokenPunctuationColor:#81A1C1;---tokenFunctionColor:#88C0D0;---tokenStringColor:#A3BE8C;---tokenOperator:#81A1C1;---tokenBaseColor:#f8f8f2}.c-dVkrah code[class*="language-"],.c-dVkrah pre[class*="language-"]{color:var(---tokenBaseColor);background:none;display:block;font-family:var(--fonts-mono);text-align:left;font-weight:400;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}.c-dVkrah pre[class*="language-"]{padding:1em;margin:0.5em 0 1em;margin-top:0;overflow:auto;border-radius:var(--radii-small)}.c-dVkrah :not(pre) > code[class*="language-"],.c-dVkrah pre[class*="language-"]{background:var(---tokenBackground)}.c-dVkrah :not(pre) > code[class*="language-"]{padding:01.em;border-radius:var(--radii-small);white-space:normal}.c-dVkrah .token.comment,.c-dVkrah .token.prolog,.c-dVkrah .token.doctype,.c-dVkrah .token.cdata{color:var(---tokenCommentColor)}.c-dVkrah .token.punctuation{color:var(---tokenPunctuationColor)}.c-dVkrah .namespace{opacity:0.7}.c-dVkrah .token.property,.c-dVkrah .token.tag,.c-dVkrah .token.constant,.c-dVkrah .token.symbol,.c-dVkrah .token.deleted{color:var(---tokenPropertyColor)}.c-dVkrah .token.number{color:var(---tokenNumberColor)}.c-dVkrah .token.boolean{color:var(---tokenBooleanColor)}.c-dVkrah .token.selector,.c-dVkrah .token.attr-name,.c-dVkrah .token.string,.c-dVkrah .token.char,.c-dVkrah .token.builtin,.c-dVkrah .token.inserted{color:var(---tokenStringColor)}.c-dVkrah .token.operator,.c-dVkrah .token.entity,.c-dVkrah .token.url,.c-dVkrah .language-css .token.string,.c-dVkrah .style .token.string,.c-dVkrah .token.variable{color:var(---tokenOperator)}.c-dVkrah .token.atrule,.c-dVkrah .token.attr-value,.c-dVkrah .token.function,.c-dVkrah .token.class-name{color:var(---tokenFunctionColor)}.c-dVkrah .token.keyword{color:var(---tokenPropertyColor)}.c-dVkrah .token.regex,.c-dVkrah .token.important{color:var(---tokenRegexColor)}.c-dVkrah .token.important,.c-dVkrah .token.bold{font-weight:bold}.c-dVkrah .token.italic{font-style:italic}.c-dVkrah .token.entity{cursor:help}.c-dVkrah .rehype-code-title{max-width:100%;overflow-y:hidden;font-family:var(--fonts-mono);margin-bottom:-0.8rem;padding:0.7em 1em 0.5em 1em;background:var(---tokenBackground);text-aligh:left;font-weight:400;color:var(---tokenCommentColor);border-top-right-radius:4px;border-top-left-radius:4px;font-size:var(--fontSizes-small);z-index:1}.c-dVkrah .code-highlight{float:left;min-width:97%}.c-dVkrah .highlight-line{background:var(---tokenBackgroundHighlight);display:block;margin-left:-30px;padding-left:30px;margin-right:-30px;padding-right:30px}.c-dVkrah .line-number::before{display:inline-block;width:1rem;text-align:right;margin-right:16px;margin-left:-8px;color:var(---tokenCommentColor);content:attr(line)}.c-gATxoi{margin-bottom:0px}.c-bPgfrJ{background:var(--colors-backgroundColorHighlight);width:100%;height:2px}.c-bQzyIt{display:grid}.c-bImmwG{border-radius:var(--radii-default);background:var(--colors-backgroundColorSecondary);padding:var(--space-small);box-shadow:0px 4px 7px rgba(0, 0, 0, 0.09);transition:box-shadow 0.2s ease}.c-bImmwG:hover{box-shadow:0px 8px 15px rgba(0, 0, 0, 0.09)}}--sxs{--sxs:3 c-dhzjXW-fmMVkQ-size-small c-dhzjXW-oSmJK-size-large c-PJLV-eWXOxW-muted-true c-PJLV-cQFdVt-bold-true c-dhzjXW-AlumW-size-medium c-PJLV-jvCEVg-gradient-true}@media{.c-dhzjXW-fmMVkQ-size-small{max-width:var(--sizes-small);min-width:var(--sizes-small);margin:var(--space-small)}.c-dhzjXW-oSmJK-size-large{max-width:var(--sizes-large);min-width:var(--sizes-large);margin:var(--space-large)}.c-PJLV-eWXOxW-muted-true{font-weight:400;color:var(--colors-textMutedColor)}.c-PJLV-cQFdVt-bold-true{font-weight:bold}.c-dhzjXW-AlumW-size-medium{max-width:var(--sizes-medium);min-width:var(--sizes-medium);margin:var(--space-medium)}.c-PJLV-jvCEVg-gradient-true{background-image:var(--colors-backgroundGradient);background-size:100%;background-repeat:repeat;-webkit-background-clip:text;background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}}--sxs{--sxs:6 c-bZNrxE-iiNNtQg-css PJLV-idhzjXW-css PJLV-ieKjzkc-css c-bQzyIt-ikUNLjE-css PJLV-igsmDXe-css c-bZNrxE-ilkBNdM-css c-fixGjY-iirEjuD-css c-jNUAyN-ihtBelh-css c-PJLV-idFXbZW-css}@media{.c-bZNrxE-iiNNtQg-css{align-items:center;cursor:pointer}.PJLV-ieKjzkc-css{display:inline-block;vertical-align:middle;overflow:hidden;fill:var(--colors-textMutedColor)}.PJLV-idhzjXW-css{display:flex}.c-bQzyIt-ikUNLjE-css{grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));grid-column-gap:20px;grid-row-gap:20px}.c-bZNrxE-ilkBNdM-css{height:100%}.c-fixGjY-iirEjuD-css{align-items:stretch}.c-jNUAyN-ihtBelh-css{font-size:var(--fontSizes-smaller)}.c-PJLV-idFXbZW-css{margin-top:0}.PJLV-igsmDXe-css{cursor:pointer}}</style><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-62be57948b11b758.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b0867eecb36958b1.js" defer=""></script><script src="/_next/static/chunks/pages/blogg/%5Bslug%5D-4583c93b7baa87d4.js" defer=""></script><script src="/_next/static/TtVAyZFKtHZIk9MUUdl5Z/_buildManifest.js" defer=""></script><script src="/_next/static/TtVAyZFKtHZIk9MUUdl5Z/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap">@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkP8o18I.woff) format('woff')}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkM0o18I.woff) format('woff')}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv18I.woff) format('woff')}@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJFQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJVQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJFQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJVQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJFQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJVQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next" data-reactroot=""><div class="c-jGAclF"><div class="c-bFBiOr"><div class="c-bkUlwM"><div class="c-bZNrxE c-gHYpeN"><a href="/" class="c-jyhawZ"><span class="c-hNeJhr">Daniel Vernberg</span></a><div class="c-cZmHrB"></div><div class="c-bZNrxE c-bZNrxE-iiNNtQg-css"><a href="/blogg" class="c-jyhawZ"><span class="c-hNeJhr">Blogg</span></a><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><div class="PJLV PJLV-idhzjXW-css"><svg viewBox="0 0 24 24" height="24px" width="24px" class="PJLV PJLV-ieKjzkc-css"><path d="M12.3 22h-.1a10.31 10.31 0 01-7.34-3.15 10.46 10.46 0 01-.26-14 10.13 10.13 0 014-2.74 1 1 0 011.06.22 1 1 0 01.24 1 8.4 8.4 0 001.94 8.81 8.47 8.47 0 008.83 1.94 1 1 0 011.27 1.29A10.16 10.16 0 0119.6 19a10.28 10.28 0 01-7.3 3zM7.46 4.92a7.93 7.93 0 00-1.37 1.22 8.44 8.44 0 00.2 11.32A8.29 8.29 0 0012.22 20h.08a8.34 8.34 0 006.78-3.49A10.37 10.37 0 017.46 4.92z" data-name="moon"></path></svg></div></div></div></div></div></div><div class="c-jpsCDP"><div class="c-dVkrah"><div class="c-bFBiOr"><div class="c-bkUlwM"><div class="c-fixGjY"><div class="c-dhzjXW c-dhzjXW-oSmJK-size-large"></div><h1 class="c-PJLV c-PJLV-jvCEVg-gradient-true">Styled Components och ikonhantering i olika stadier</h1><p class="c-jNUAyN c-gATxoi">2020-07-03</p><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div><p>Denna sajt är byggt med hjälp av <a href="https://styled-components.com/">Styled Components</a> och använder ikoner sparsamt, med hjälp av <a href="https://styled-icons.js.org/">styled-icons</a> - ett paket som gör det väldigt enkelt kan skapa komponenter från svg-ikoner.</p>
<p>Totalt sett används fyra ikoner på denna sajt i skrivande stund:</p>
<ul>
<li>Två ikoner för mörkt/ljust tema</li>
<li>En ikon för Githublänk</li>
<li>En ikon för epostlänk</li>
</ul>
<p>Det här är en liten sammanfattning om hur ikonhanteringen ändrades i tre olika iterationer allt eftersom behovet av funktionalitet och fler ikoner växte. Jag behövde standardisera ikonhanteringen på ett bättre sätt.</p>
<blockquote>
<p>Jag går här inte in i detalj igenom hur styled-components samt styled-icons fungerar utan jag använder mer de två för att visa ett exempel på hur man kan strukturera ui-komponenter med React och tar upp några saker att tänka på.</p>
</blockquote>
<h2 id="skapa-komponenter-bara---hur-svårt-ska-det-vara-️"><a aria-hidden="true" tabindex="-1" href="#skapa-komponenter-bara---hur-svårt-ska-det-vara-️"><span class="icon icon-link"></span></a>Skapa komponenter bara - hur svårt ska det vara? 🤷‍♂️</h2>
<p>När jag skapde den första ikonen var jag inte speciellt brydd om varken återanvändbarhet eller potentiellt duplicerad kod. Jag behövde bara skapa några mindre ikonkomponenter för att visa upp ikoner i headern och footern.</p>
<p>I ett första stadie skapade jag ikoner på följande sätt:</p>
<div class="rehype-code-title">src/components/ui/icons/iconDarkMode.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Sunset</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@styled-icons/feather&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token imports">styled</span> <span class="token keyword">from</span> <span class="token string">&#x27;styled-components&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">IconDarkMode</span> <span class="token operator">=</span> <span class="token function">styled</span><span class="token punctuation">(</span><span class="token maybe-class-name">Sunset</span><span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="5"><span class="token template-string"><span class="token string">  width: 24px;
</span></span></span><span class="code-line line-number" line="6"><span class="token template-string"><span class="token string">  height: 24px;
</span></span></span><span class="code-line line-number" line="7"><span class="token template-string"><span class="token string">  color: var(--text-muted-color);
</span></span></span><span class="code-line line-number" line="8"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token maybe-class-name">IconDarkMode</span><span class="token punctuation">.</span><span class="token property-access">displayName</span> <span class="token operator">=</span> <span class="token string">&#x27;IconDarkMode&#x27;</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Bra - nu hade jag en ikon som representerar &quot;Dark mode&quot; och som har lite generell styling. Men om man har en ikon för &quot;Dark mode&quot; så behövs ju en ikon för &quot;Light mode&quot; också:</p>
<div class="rehype-code-title">src/components/ui/icons/iconLightMode.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Sunrise</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@styled-icons/feather&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token imports">styled</span> <span class="token keyword">from</span> <span class="token string">&#x27;styled-components&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">IconLightMode</span> <span class="token operator">=</span> <span class="token function">styled</span><span class="token punctuation">(</span><span class="token maybe-class-name">Sunrise</span><span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="5"><span class="token template-string"><span class="token string">  width: 24px;
</span></span></span><span class="code-line line-number" line="6"><span class="token template-string"><span class="token string">  height: 24px;
</span></span></span><span class="code-line line-number" line="7"><span class="token template-string"><span class="token string">  color: var(--text-muted-color);
</span></span></span><span class="code-line line-number" line="8"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token maybe-class-name">IconLightMode</span><span class="token punctuation">.</span><span class="token property-access">displayName</span> <span class="token operator">=</span> <span class="token string">&#x27;IconLightMode&#x27;</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Perfekt - nu hade jag en ikon med samma styling men som representerar &quot;Light mode&quot;.</p>
<p><strong>Men vänta lite nu...</strong> Bägge komponenterna <code>iconDarkMode.tsx</code> och <code>iconLightMode.tsx</code> ansvarar för en generell styling samt bestämmer vilken ikon från styled-icons som ska användas.
Det är inte speciellt skalbart ifall jag behöver <strong>ändra standard stylingen</strong> eller <strong>lägga till ännu fler ikoner</strong> - mer kod skulle dupliceras. Nått måste man väl kunna göra åt det problemet?</p>
<h2 id="skapa-en-återanvändbar-default-styling-"><a aria-hidden="true" tabindex="-1" href="#skapa-en-återanvändbar-default-styling-"><span class="icon icon-link"></span></a>Skapa en återanvändbar default styling 👨‍🎨</h2>
<p>Som med så mycket annat ville jag lägga till ny funktionalitet. Ikonerna skulle ha en liten effekt med <code>transform: translateY(2px)</code> när man skulle klicka på dom.
Jag behövde råda bot på den duplicerade stylingen.</p>
<p>Problemet med duplicerad styling går att lösa på en rad olika sätt men i iteration två av introducerade jag en separat källa för standardstyling:</p>
<div class="rehype-code-title">src/components/ui/icons/iconBase.ts</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token imports">styled<span class="token punctuation">,</span> <span class="token punctuation">{</span> css <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;styled-components&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IconProps</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">  hoverEffect<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token keyword">const</span> <span class="token maybe-class-name">HoverStyle</span> <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="8"><span class="token template-string"><span class="token string">  transition: all 0.2s ease;
</span></span></span><span class="code-line line-number" line="9"><span class="token template-string"><span class="token string">  &amp;:hover {
</span></span></span><span class="code-line line-number" line="10"><span class="token template-string"><span class="token string">    transform: translateY(-2px);
</span></span></span><span class="code-line line-number" line="11"><span class="token template-string"><span class="token string">  }
</span></span></span><span class="code-line line-number" line="12"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">BaseStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> hoverEffect <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">IconProps</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="15"><span class="token template-string"><span class="token string">  width: 24px;
</span></span></span><span class="code-line line-number" line="16"><span class="token template-string"><span class="token string">  height: 24px;
</span></span></span><span class="code-line line-number" line="17"><span class="token template-string"><span class="token string">  color: var(--text-muted-color);
</span></span></span><span class="code-line line-number" line="18"><span class="token template-string"><span class="token string">  </span><span class="token template-punctuation string">`</span></span>$<span class="token punctuation">{</span>hoverEffect <span class="token operator">?</span> <span class="token maybe-class-name">HoverStyle</span> <span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">}</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="19"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">IconBase</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span><span class="token property-access">svg</span><span class="token operator">&lt;</span><span class="token maybe-class-name">IconProps</span><span class="token operator">&gt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="22"><span class="token template-string"><span class="token string">  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>BaseStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span></span></span><span class="code-line line-number" line="23"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span></code></pre>
<p><code>iconBase.ts</code> innehåller i den här iterationen all grundläggande styling som alla ikoner använde sig av. Ett gemensamt interface för ikonprops skapades också i och med <code>IconProps</code>. En hover-effekt lades även till.</p>
<p>Ikoner i sin tur byggdes ovanpå <code>iconBase.ts</code> på följande vis:</p>
<div class="rehype-code-title">src/components/ui/icons/iconLightMode.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Sunrise</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@styled-icons/feather&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token imports">styled</span> <span class="token keyword">from</span> <span class="token string">&#x27;styled-components&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">BaseStyle</span><span class="token punctuation">,</span> <span class="token maybe-class-name">IconProps</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;./iconBase&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">IconLightMode</span> <span class="token operator">=</span> <span class="token function">styled</span><span class="token punctuation">(</span><span class="token maybe-class-name">Sunrise</span><span class="token punctuation">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IconProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">`
</span></span><span class="code-line line-number" line="6"><span class="token plain-text">  ${BaseStyle}
</span></span><span class="code-line line-number" line="7"><span class="token plain-text">`;
</span></span><span class="code-line line-number" line="8"><span class="token plain-text">
</span></span><span class="code-line line-number" line="9"><span class="token plain-text">IconLightMode.displayName = &#x27;IconLightMode&#x27;;
</span></span></code></pre>
<p><strong>Perfekt!</strong> Nu var duplicerad kod borttagen och endast en källa till ikonstyling existerade. Nu måste väl allt vara frid och fröjd?</p>
<h2 id="skapa-komponenter-med-ett-tydligt-ansvar-️"><a aria-hidden="true" tabindex="-1" href="#skapa-komponenter-med-ett-tydligt-ansvar-️"><span class="icon icon-link"></span></a>Skapa komponenter med (ett) tydligt ansvar 🙋‍♂️</h2>
<p>Det var ändå något som inte kändes helt rätt. Alla ikoner som bygger vidare på <code>iconBase.ts</code> ansvarar inte <em>bara</em> för vilken svg-ikon de importerar och använder sig av. De ansvarar <em>även</em> för att se till att ikonerna applicerar den grundläggande stylingen från <code>iconBase.ts</code>.</p>
<p>Vore det inte bättre om alla olika ikonkomponenter istället <em>bara</em> ansvarade för vilken ikon från styled-icons de importerade? Samt skickade vidare allt annat ansvar såsom <em>props</em> och <em>styling</em> till <code>iconBase.ts</code>?</p>
<p>Så klart det vore! I iteration tre och nuvarande version (i skrivande stund) separerades det ansvaret genom en mindre refaktorering av <code>iconBase.ts</code>:</p>
<div class="rehype-code-title">src/components/ui/icons/iconBase.ts</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token imports">styled<span class="token punctuation">,</span> <span class="token punctuation">{</span> css <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;styled-components&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">StyledIconProps</span><span class="token punctuation">,</span> <span class="token maybe-class-name">StyledIcon</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@styled-icons/styled-icon&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number highlight-line" line="4"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">IconProps</span> <span class="token keyword">extends</span> <span class="token class-name">StyledIconProps</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">  hoverEffect<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token keyword">const</span> <span class="token maybe-class-name">HoverStyle</span> <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="9"><span class="token template-string"><span class="token string">  transition: all 0.2s ease;
</span></span></span><span class="code-line line-number" line="10"><span class="token template-string"><span class="token string">  &amp;:hover {
</span></span></span><span class="code-line line-number" line="11"><span class="token template-string"><span class="token string">    transform: translateY(-2px);
</span></span></span><span class="code-line line-number" line="12"><span class="token template-string"><span class="token string">  }
</span></span></span><span class="code-line line-number" line="13"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15"><span class="token keyword">const</span> defaultSize <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="16"><span class="token template-string"><span class="token string">  height: 24px;
</span></span></span><span class="code-line line-number" line="17"><span class="token template-string"><span class="token string">  width: 24px;
</span></span></span><span class="code-line line-number" line="18"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">BaseStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> hoverEffect <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> size <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">IconProps</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
</span></span></span><span class="code-line line-number" line="21"><span class="token template-string"><span class="token string">  color: var(--text-muted-color);
</span></span></span><span class="code-line line-number" line="22"><span class="token template-string"><span class="token string">  </span><span class="token template-punctuation string">`</span></span>$<span class="token punctuation">{</span><span class="token operator">!</span>size <span class="token operator">&amp;&amp;</span> defaultSize<span class="token punctuation">}</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">;
</span></span></span><span class="code-line line-number" line="23"><span class="token template-string"><span class="token string">  </span><span class="token template-punctuation string">`</span></span>$<span class="token punctuation">{</span>hoverEffect <span class="token operator">&amp;&amp;</span> <span class="token maybe-class-name">HoverStyle</span><span class="token punctuation">}</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">;
</span></span></span><span class="code-line line-number" line="24"><span class="token template-string"><span class="token string"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="25">
</span><span class="code-line line-number highlight-line" line="26"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">IconBase</span> <span class="token operator">=</span> <span class="token punctuation">(</span>icon<span class="token operator">:</span> <span class="token maybe-class-name">StyledIcon</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">StyledIcon</span> <span class="token arrow operator">=&gt;</span> <span class="token function">styled</span><span class="token punctuation">(</span>icon<span class="token punctuation">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">IconProps</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">`
</span></span><span class="code-line line-number highlight-line" line="27"><span class="token plain-text">  ${BaseStyle}
</span></span><span class="code-line line-number highlight-line" line="28"><span class="token plain-text">`;
</span></span><span class="code-line line-number" line="29"><span class="token plain-text">
</span></span></code></pre>
<blockquote>
<p><code>${!size &amp;&amp; defaultSize}</code> används för att styled-icons har en prop, size, som sätter en storlek på ikonerna. Om ingen storlek sätts så kickar defaultSize stylingen igång.</p>
</blockquote>
<p>Några små ändringar (som är markerade i kodsnutten ovan) visar på skillnaderna:</p>
<ul>
<li>Interfacet <code>IconProps</code> bygger nu vidare på interfacet <code>StyledIconProps</code> - som är det interface som alla styled-icons har. Det innebär att kopplingen mellan påbyggd funktionalitet i form av props tydligare kopplas ihop med betinflig funktionalitet och props från <em>styled-icons</em> ikoner.</li>
<li><code>IconBase</code> var tidigare bara en <code>styled.svg</code> som hade lite grundläggande styling i och med <code>BaseStyle</code>. Nu är det en funktion som tar in en <code>icon</code> av typen <code>StyledIcon</code> och returnerar en styled-icon som har default styling och som har korrekt interface för props.</li>
</ul>
<p>Ikonkomponenter refaktorerades i iteration tre att se ut på följande vis:</p>
<div class="rehype-code-title">src/components/ui/icons/iconLightMode.tsx</div><pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Sunrise</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@styled-icons/feather&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">IconBase</span><span class="token punctuation">,</span> <span class="token maybe-class-name">IconProps</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;./iconBase&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number highlight-line" line="4"><span class="token keyword">const</span> <span class="token maybe-class-name">Icon</span> <span class="token operator">=</span> <span class="token function">IconBase</span><span class="token punctuation">(</span><span class="token maybe-class-name">Sunrise</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">IconLightMode</span><span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span><span class="token maybe-class-name">IconProps</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token spread operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token maybe-class-name">IconLightMode</span><span class="token punctuation">.</span><span class="token property-access">displayName</span> <span class="token operator">=</span> <span class="token string">&#x27;IconLightMode&#x27;</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Den nya strukturen innebär att varje ikonkomponent nu egentligen bara har <strong>ett enda ansvar</strong> - att bestämma vilken ikon de ska importera och representera i och med <code>const Icon = IconBase(Sunrise);</code>.</p>
<p>Ikonkomponenterna skickar glatt vidare alla props med <code>&lt;Icon {...props} /&gt;;</code>. All styling och övrig logik hanteras i baskomponenten istället i och med att ikonkomponenterna bara skickar visare sina <code>props</code>.</p>
<h2 id="summering"><a aria-hidden="true" tabindex="-1" href="#summering"><span class="icon icon-link"></span></a>Summering</h2>
<p>Så länge man försöker tänka på att separera ansvar och har återanvändbarhet i åtanke kan man skapa rätt så flexibla lösningar för ui-komponenter, med hjälp av styled components.</p>
<p>Att låta en komponent på en <em>lägre</em> nivå ansvara för gemensam logik och generella stilregler gör att man kan skapa komponenter <em>ovanpå</em> - som inte behöver bry sig, eller ens veta om de gemensamma detaljerna.</p>
<p>Det är inte hela världen om det inte blir 100% rätt första gången eller om koden man skriver i en första implementation är 100% fri från duplicering.
Det kan dessutom vara svårt att på förhand se hela behovsbilden och det är lätt att börja optimera för fel saker om man försöker ta höjd och täcka in för mycket - för tidigt.</p>
<p>Över tid när behoven ändras och man växer ur befintlig implementation är det bara att iterera och refaktorera i mindre steg tills man uppnår ett bättre läge och täcker in nyupptäckta behov.</p><div class="c-dhzjXW c-dhzjXW-oSmJK-size-large"></div><div class="c-bPgfrJ"></div><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div><h2>Mer innehåll</h2><div class="c-bQzyIt c-bQzyIt-ikUNLjE-css"><div class="PJLV c-bImmwG PJLV-igsmDXe-css"><a href="/blogg/ny-utvecklingsmiljo-och-nytt-deployflode-for-denna-site" class="c-jyhawZ"><div class="c-bZNrxE c-bZNrxE-ilkBNdM-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><div class="c-fixGjY c-fixGjY-iirEjuD-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><p class="c-jNUAyN c-jNUAyN-ihtBelh-css">← Föregående</p><h3 class="c-PJLV c-PJLV-idFXbZW-css">Ny utvecklingsmiljö och nytt deployflöde för denna sajt</h3><p class="c-jNUAyN">2020-07-01</p></div><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div></div></a></div><div class="PJLV c-bImmwG PJLV-igsmDXe-css"><a href="/blogg/api-middlewares-i-nextjs" class="c-jyhawZ"><div class="c-bZNrxE c-bZNrxE-ilkBNdM-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><div class="c-fixGjY c-fixGjY-iirEjuD-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><p class="c-jNUAyN c-jNUAyN-ihtBelh-css">Nästa →</p><h3 class="c-PJLV c-PJLV-idFXbZW-css">Skapa API-middlewares i Next.js</h3><p class="c-jNUAyN">2020-07-09</p></div><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div></div></a></div></div></div></div></div></div></div><div class="c-dhzjXW c-dhzjXW-oSmJK-size-large"></div><div class="c-bFBiOr"><div class="c-bkUlwM"><div class="c-fixGjY"><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div><div class="c-bZNrxE"><p class="c-jKTQyv">Daniel Vernberg <!-- -->2023</p><div class="c-cZmHrB"></div><a href="https://github.com/danielv14"><div class="PJLV PJLV-idhzjXW-css"><svg viewBox="0 0 24 24" height="24px" width="24px" class="PJLV PJLV-ieKjzkc-css"><path d="M16.24 22a1 1 0 01-1-1v-2.6a2.15 2.15 0 00-.54-1.66 1 1 0 01.61-1.67C17.75 14.78 20 14 20 9.77a4 4 0 00-.67-2.22 2.75 2.75 0 01-.41-2.06 3.71 3.71 0 000-1.41 7.65 7.65 0 00-2.09 1.09 1 1 0 01-.84.15 10.15 10.15 0 00-5.52 0 1 1 0 01-.84-.15 7.4 7.4 0 00-2.11-1.09 3.52 3.52 0 000 1.41 2.84 2.84 0 01-.43 2.08 4.07 4.07 0 00-.67 2.23c0 3.89 1.88 4.93 4.7 5.29a1 1 0 01.82.66 1 1 0 01-.21 1 2.06 2.06 0 00-.55 1.56V21a1 1 0 01-2 0v-.57a6 6 0 01-5.27-2.09 3.9 3.9 0 00-1.16-.88 1 1 0 11.5-1.94 4.93 4.93 0 012 1.36c1 1 2 1.88 3.9 1.52a3.89 3.89 0 01.23-1.58c-2.06-.52-5-2-5-7a6 6 0 011-3.33.85.85 0 00.13-.62 5.69 5.69 0 01.33-3.21 1 1 0 01.63-.57c.34-.1 1.56-.3 3.87 1.2a12.16 12.16 0 015.69 0c2.31-1.5 3.53-1.31 3.86-1.2a1 1 0 01.63.57 5.71 5.71 0 01.33 3.22.75.75 0 00.11.57 6 6 0 011 3.34c0 5.07-2.92 6.54-5 7a4.28 4.28 0 01.22 1.67V21a1 1 0 01-.94 1z" data-name="github"></path></svg></div></a><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><a href="mailto:daniel.vernberg@gmail.com"><div class="PJLV PJLV-idhzjXW-css"><svg viewBox="0 0 24 24" height="24px" width="24px" class="PJLV PJLV-ieKjzkc-css"><path d="M19 4H5a3 3 0 00-3 3v10a3 3 0 003 3h14a3 3 0 003-3V7a3 3 0 00-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 01-1-1V7.25l7.4 5.55a1 1 0 00.6.2 1 1 0 00.6-.2L20 7.25V17a1 1 0 01-1 1z" data-name="email"></path></svg></div></a></div><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Styled Components och ikonhantering i olika stadier","date":"2020-07-03T00:00:00.000Z","summary":"Hur många gånger kan man behöva refaktorera ikoner egentligen? Minst två gånger i alla fall - allt eftersom behovet på funktionalitet ändras.","body":{"raw":"\nDenna sajt är byggt med hjälp av [Styled Components](https://styled-components.com/) och använder ikoner sparsamt, med hjälp av [styled-icons](https://styled-icons.js.org/) - ett paket som gör det väldigt enkelt kan skapa komponenter från svg-ikoner.\n\nTotalt sett används fyra ikoner på denna sajt i skrivande stund:\n\n- Två ikoner för mörkt/ljust tema\n- En ikon för Githublänk\n- En ikon för epostlänk\n\nDet här är en liten sammanfattning om hur ikonhanteringen ändrades i tre olika iterationer allt eftersom behovet av funktionalitet och fler ikoner växte. Jag behövde standardisera ikonhanteringen på ett bättre sätt.\n\n\u003e Jag går här inte in i detalj igenom hur styled-components samt styled-icons fungerar utan jag använder mer de två för att visa ett exempel på hur man kan strukturera ui-komponenter med React och tar upp några saker att tänka på.\n\n## Skapa komponenter bara - hur svårt ska det vara? 🤷‍♂️\n\nNär jag skapde den första ikonen var jag inte speciellt brydd om varken återanvändbarhet eller potentiellt duplicerad kod. Jag behövde bara skapa några mindre ikonkomponenter för att visa upp ikoner i headern och footern.\n\nI ett första stadie skapade jag ikoner på följande sätt:\n\n```tsx:src/components/ui/icons/iconDarkMode.tsx showLineNumbers\nimport { Sunset } from '@styled-icons/feather';\nimport styled from 'styled-components';\n\nexport const IconDarkMode = styled(Sunset)`\n  width: 24px;\n  height: 24px;\n  color: var(--text-muted-color);\n`;\n\nIconDarkMode.displayName = 'IconDarkMode';\n```\n\nBra - nu hade jag en ikon som representerar \"Dark mode\" och som har lite generell styling. Men om man har en ikon för \"Dark mode\" så behövs ju en ikon för \"Light mode\" också:\n\n```tsx:src/components/ui/icons/iconLightMode.tsx showLineNumbers\nimport { Sunrise } from '@styled-icons/feather';\nimport styled from 'styled-components';\n\nexport const IconLightMode = styled(Sunrise)`\n  width: 24px;\n  height: 24px;\n  color: var(--text-muted-color);\n`;\n\nIconLightMode.displayName = 'IconLightMode';\n```\n\nPerfekt - nu hade jag en ikon med samma styling men som representerar \"Light mode\".\n\n**Men vänta lite nu...** Bägge komponenterna `iconDarkMode.tsx` och `iconLightMode.tsx` ansvarar för en generell styling samt bestämmer vilken ikon från styled-icons som ska användas.\nDet är inte speciellt skalbart ifall jag behöver **ändra standard stylingen** eller **lägga till ännu fler ikoner** - mer kod skulle dupliceras. Nått måste man väl kunna göra åt det problemet?\n\n## Skapa en återanvändbar default styling 👨‍🎨\n\nSom med så mycket annat ville jag lägga till ny funktionalitet. Ikonerna skulle ha en liten effekt med `transform: translateY(2px)` när man skulle klicka på dom.\nJag behövde råda bot på den duplicerade stylingen.\n\nProblemet med duplicerad styling går att lösa på en rad olika sätt men i iteration två av introducerade jag en separat källa för standardstyling:\n\n```tsx:src/components/ui/icons/iconBase.ts showLineNumbers\nimport styled, { css } from 'styled-components';\n\nexport interface IconProps {\n  hoverEffect?: boolean;\n}\n\nconst HoverStyle = css`\n  transition: all 0.2s ease;\n  \u0026:hover {\n    transform: translateY(-2px);\n  }\n`;\n\nexport const BaseStyle = ({ hoverEffect = false }: IconProps) =\u003e css`\n  width: 24px;\n  height: 24px;\n  color: var(--text-muted-color);\n  `${hoverEffect ? HoverStyle : ''}`\n`;\n\nexport const IconBase = styled.svg\u003cIconProps\u003e`\n  ${BaseStyle}\n`;\n```\n\n`iconBase.ts` innehåller i den här iterationen all grundläggande styling som alla ikoner använde sig av. Ett gemensamt interface för ikonprops skapades också i och med `IconProps`. En hover-effekt lades även till.\n\nIkoner i sin tur byggdes ovanpå `iconBase.ts` på följande vis:\n\n```tsx:src/components/ui/icons/iconLightMode.tsx showLineNumbers\nimport { Sunrise } from '@styled-icons/feather';\nimport styled from 'styled-components';\nimport { BaseStyle, IconProps } from './iconBase';\n\nexport const IconLightMode = styled(Sunrise)\u003cIconProps\u003e`\n  ${BaseStyle}\n`;\n\nIconLightMode.displayName = 'IconLightMode';\n```\n\n**Perfekt!** Nu var duplicerad kod borttagen och endast en källa till ikonstyling existerade. Nu måste väl allt vara frid och fröjd?\n\n## Skapa komponenter med (ett) tydligt ansvar 🙋‍♂️\n\nDet var ändå något som inte kändes helt rätt. Alla ikoner som bygger vidare på `iconBase.ts` ansvarar inte _bara_ för vilken svg-ikon de importerar och använder sig av. De ansvarar _även_ för att se till att ikonerna applicerar den grundläggande stylingen från `iconBase.ts`.\n\nVore det inte bättre om alla olika ikonkomponenter istället _bara_ ansvarade för vilken ikon från styled-icons de importerade? Samt skickade vidare allt annat ansvar såsom _props_ och _styling_ till `iconBase.ts`?\n\nSå klart det vore! I iteration tre och nuvarande version (i skrivande stund) separerades det ansvaret genom en mindre refaktorering av `iconBase.ts`:\n\n```tsx:src/components/ui/icons/iconBase.ts {4,26-28} showLineNumbers\nimport styled, { css } from 'styled-components';\nimport { StyledIconProps, StyledIcon } from '@styled-icons/styled-icon';\n\nexport interface IconProps extends StyledIconProps {\n  hoverEffect?: boolean;\n}\n\nconst HoverStyle = css`\n  transition: all 0.2s ease;\n  \u0026:hover {\n    transform: translateY(-2px);\n  }\n`;\n\nconst defaultSize = css`\n  height: 24px;\n  width: 24px;\n`;\n\nexport const BaseStyle = ({ hoverEffect = false, size }: IconProps) =\u003e css`\n  color: var(--text-muted-color);\n  `${!size \u0026\u0026 defaultSize}`;\n  `${hoverEffect \u0026\u0026 HoverStyle}`;\n`;\n\nexport const IconBase = (icon: StyledIcon): StyledIcon =\u003e styled(icon)\u003cIconProps\u003e`\n  ${BaseStyle}\n`;\n\n```\n\n\u003e `${!size \u0026\u0026 defaultSize}` används för att styled-icons har en prop, size, som sätter en storlek på ikonerna. Om ingen storlek sätts så kickar defaultSize stylingen igång.\n\nNågra små ändringar (som är markerade i kodsnutten ovan) visar på skillnaderna:\n\n- Interfacet `IconProps` bygger nu vidare på interfacet `StyledIconProps` - som är det interface som alla styled-icons har. Det innebär att kopplingen mellan påbyggd funktionalitet i form av props tydligare kopplas ihop med betinflig funktionalitet och props från _styled-icons_ ikoner.\n- `IconBase` var tidigare bara en `styled.svg` som hade lite grundläggande styling i och med `BaseStyle`. Nu är det en funktion som tar in en `icon` av typen `StyledIcon` och returnerar en styled-icon som har default styling och som har korrekt interface för props.\n\nIkonkomponenter refaktorerades i iteration tre att se ut på följande vis:\n\n```tsx:src/components/ui/icons/iconLightMode.tsx {4} showLineNumbers\nimport { Sunrise } from '@styled-icons/feather';\nimport { IconBase, IconProps } from './iconBase';\n\nconst Icon = IconBase(Sunrise);\n\nexport const IconLightMode: React.FC\u003cIconProps\u003e = (props) =\u003e {\n  return \u003cIcon {...props} /\u003e;\n};\n\nIconLightMode.displayName = 'IconLightMode';\n```\n\nDen nya strukturen innebär att varje ikonkomponent nu egentligen bara har **ett enda ansvar** - att bestämma vilken ikon de ska importera och representera i och med `const Icon = IconBase(Sunrise);`.\n\nIkonkomponenterna skickar glatt vidare alla props med `\u003cIcon {...props} /\u003e;`. All styling och övrig logik hanteras i baskomponenten istället i och med att ikonkomponenterna bara skickar visare sina `props`.\n\n## Summering\n\nSå länge man försöker tänka på att separera ansvar och har återanvändbarhet i åtanke kan man skapa rätt så flexibla lösningar för ui-komponenter, med hjälp av styled components.\n\nAtt låta en komponent på en _lägre_ nivå ansvara för gemensam logik och generella stilregler gör att man kan skapa komponenter _ovanpå_ - som inte behöver bry sig, eller ens veta om de gemensamma detaljerna.\n\nDet är inte hela världen om det inte blir 100% rätt första gången eller om koden man skriver i en första implementation är 100% fri från duplicering.\nDet kan dessutom vara svårt att på förhand se hela behovsbilden och det är lätt att börja optimera för fel saker om man försöker ta höjd och täcka in för mycket - för tidigt.\n\nÖver tid när behoven ändras och man växer ur befintlig implementation är det bara att iterera och refaktorera i mindre steg tills man uppnår ett bättre läge och täcker in nyupptäckta behov.\n","code":"var Component=(()=\u003e{var p=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var u=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=\u003e{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},i=(a,e,s,c)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let l of h(e))!N.call(a,l)\u0026\u0026l!==s\u0026\u0026t(a,l,{get:()=\u003ee[l],enumerable:!(c=m(e,l))||c.enumerable});return a};var b=(a,e,s)=\u003e(s=a!=null?p(k(a)):{},i(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),y=a=\u003ei(t({},\"__esModule\",{value:!0}),a);var o=u((S,r)=\u003e{r.exports=_jsx_runtime});var w={};g(w,{default:()=\u003ex,frontmatter:()=\u003ef});var n=b(o()),f={title:\"Styled Components och ikonhantering i olika stadier\",summary:\"Hur m\\xE5nga g\\xE5nger kan man beh\\xF6va refaktorera ikoner egentligen? Minst tv\\xE5 g\\xE5nger i alla fall - allt eftersom behovet p\\xE5 funktionalitet \\xE4ndras.\",date:new Date(15937344e5)};function d(a){let e=Object.assign({p:\"p\",a:\"a\",ul:\"ul\",li:\"li\",blockquote:\"blockquote\",h2:\"h2\",span:\"span\",div:\"div\",pre:\"pre\",code:\"code\",strong:\"strong\",em:\"em\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"Denna sajt \\xE4r byggt med hj\\xE4lp av \",(0,n.jsx)(e.a,{href:\"https://styled-components.com/\",children:\"Styled Components\"}),\" och anv\\xE4nder ikoner sparsamt, med hj\\xE4lp av \",(0,n.jsx)(e.a,{href:\"https://styled-icons.js.org/\",children:\"styled-icons\"}),\" - ett paket som g\\xF6r det v\\xE4ldigt enkelt kan skapa komponenter fr\\xE5n svg-ikoner.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Totalt sett anv\\xE4nds fyra ikoner p\\xE5 denna sajt i skrivande stund:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Tv\\xE5 ikoner f\\xF6r m\\xF6rkt/ljust tema\"}),`\n`,(0,n.jsx)(e.li,{children:\"En ikon f\\xF6r Githubl\\xE4nk\"}),`\n`,(0,n.jsx)(e.li,{children:\"En ikon f\\xF6r epostl\\xE4nk\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Det h\\xE4r \\xE4r en liten sammanfattning om hur ikonhanteringen \\xE4ndrades i tre olika iterationer allt eftersom behovet av funktionalitet och fler ikoner v\\xE4xte. Jag beh\\xF6vde standardisera ikonhanteringen p\\xE5 ett b\\xE4ttre s\\xE4tt.\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Jag g\\xE5r h\\xE4r inte in i detalj igenom hur styled-components samt styled-icons fungerar utan jag anv\\xE4nder mer de tv\\xE5 f\\xF6r att visa ett exempel p\\xE5 hur man kan strukturera ui-komponenter med React och tar upp n\\xE5gra saker att t\\xE4nka p\\xE5.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"skapa-komponenter-bara---hur-sv\\xE5rt-ska-det-vara-\\uFE0F\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skapa-komponenter-bara---hur-sv\\xE5rt-ska-det-vara-\\uFE0F\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Skapa komponenter bara - hur sv\\xE5rt ska det vara? \\u{1F937}\\u200D\\u2642\\uFE0F\"]}),`\n`,(0,n.jsx)(e.p,{children:\"N\\xE4r jag skapde den f\\xF6rsta ikonen var jag inte speciellt brydd om varken \\xE5teranv\\xE4ndbarhet eller potentiellt duplicerad kod. Jag beh\\xF6vde bara skapa n\\xE5gra mindre ikonkomponenter f\\xF6r att visa upp ikoner i headern och footern.\"}),`\n`,(0,n.jsx)(e.p,{children:\"I ett f\\xF6rsta stadie skapade jag ikoner p\\xE5 f\\xF6ljande s\\xE4tt:\"}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"src/components/ui/icons/iconDarkMode.tsx\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunset\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@styled-icons/feather'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:\"styled\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'styled-components'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconDarkMode\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"styled\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunset\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"5\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  width: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  height: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  color: var(--text-muted-color);\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconDarkMode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"displayName\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'IconDarkMode'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:'Bra - nu hade jag en ikon som representerar \"Dark mode\" och som har lite generell styling. Men om man har en ikon f\\xF6r \"Dark mode\" s\\xE5 beh\\xF6vs ju en ikon f\\xF6r \"Light mode\" ocks\\xE5:'}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"src/components/ui/icons/iconLightMode.tsx\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunrise\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@styled-icons/feather'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:\"styled\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'styled-components'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconLightMode\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"styled\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunrise\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"5\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  width: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  height: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  color: var(--text-muted-color);\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconLightMode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"displayName\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'IconLightMode'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:'Perfekt - nu hade jag en ikon med samma styling men som representerar \"Light mode\".'}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Men v\\xE4nta lite nu...\"}),\" B\\xE4gge komponenterna \",(0,n.jsx)(e.code,{children:\"iconDarkMode.tsx\"}),\" och \",(0,n.jsx)(e.code,{children:\"iconLightMode.tsx\"}),` ansvarar f\\xF6r en generell styling samt best\\xE4mmer vilken ikon fr\\xE5n styled-icons som ska anv\\xE4ndas.\nDet \\xE4r inte speciellt skalbart ifall jag beh\\xF6ver `,(0,n.jsx)(e.strong,{children:\"\\xE4ndra standard stylingen\"}),\" eller \",(0,n.jsx)(e.strong,{children:\"l\\xE4gga till \\xE4nnu fler ikoner\"}),\" - mer kod skulle dupliceras. N\\xE5tt m\\xE5ste man v\\xE4l kunna g\\xF6ra \\xE5t det problemet?\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"skapa-en-\\xE5teranv\\xE4ndbar-default-styling-\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skapa-en-\\xE5teranv\\xE4ndbar-default-styling-\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Skapa en \\xE5teranv\\xE4ndbar default styling \\u{1F468}\\u200D\\u{1F3A8}\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Som med s\\xE5 mycket annat ville jag l\\xE4gga till ny funktionalitet. Ikonerna skulle ha en liten effekt med \",(0,n.jsx)(e.code,{children:\"transform: translateY(2px)\"}),` n\\xE4r man skulle klicka p\\xE5 dom.\nJag beh\\xF6vde r\\xE5da bot p\\xE5 den duplicerade stylingen.`]}),`\n`,(0,n.jsx)(e.p,{children:\"Problemet med duplicerad styling g\\xE5r att l\\xF6sa p\\xE5 en rad olika s\\xE4tt men i iteration tv\\xE5 av introducerade jag en separat k\\xE4lla f\\xF6r standardstyling:\"}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"src/components/ui/icons/iconBase.ts\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[\"styled\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" css \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'styled-components'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IconProps\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  hoverEffect\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"boolean\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"HoverStyle\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" css\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"8\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  transition: all 0.2s ease;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"9\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  \u0026:hover {\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"10\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    transform: translateY(-2px);\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"11\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  }\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"13\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"BaseStyle\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" hoverEffect \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconProps\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" css\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"15\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  width: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"16\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  height: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"17\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  color: var(--text-muted-color);\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  \"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),\"$\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"hoverEffect \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"HoverStyle\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"20\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconBase\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" styled\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"svg\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconProps\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"22\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"BaseStyle\",(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"iconBase.ts\"}),\" inneh\\xE5ller i den h\\xE4r iterationen all grundl\\xE4ggande styling som alla ikoner anv\\xE4nde sig av. Ett gemensamt interface f\\xF6r ikonprops skapades ocks\\xE5 i och med \",(0,n.jsx)(e.code,{children:\"IconProps\"}),\". En hover-effekt lades \\xE4ven till.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Ikoner i sin tur byggdes ovanp\\xE5 \",(0,n.jsx)(e.code,{children:\"iconBase.ts\"}),\" p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"src/components/ui/icons/iconLightMode.tsx\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunrise\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@styled-icons/feather'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:\"styled\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'styled-components'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"BaseStyle\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconProps\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./iconBase'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"4\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconLightMode\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"styled\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunrise\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IconProps\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"`\\n\"})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"  ${BaseStyle}\\n\"})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"`;\\n\"})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"8\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"9\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`IconLightMode.displayName = 'IconLightMode';\n`})})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Perfekt!\"}),\" Nu var duplicerad kod borttagen och endast en k\\xE4lla till ikonstyling existerade. Nu m\\xE5ste v\\xE4l allt vara frid och fr\\xF6jd?\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"skapa-komponenter-med-ett-tydligt-ansvar-\\uFE0F\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skapa-komponenter-med-ett-tydligt-ansvar-\\uFE0F\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Skapa komponenter med (ett) tydligt ansvar \\u{1F64B}\\u200D\\u2642\\uFE0F\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det var \\xE4nd\\xE5 n\\xE5got som inte k\\xE4ndes helt r\\xE4tt. Alla ikoner som bygger vidare p\\xE5 \",(0,n.jsx)(e.code,{children:\"iconBase.ts\"}),\" ansvarar inte \",(0,n.jsx)(e.em,{children:\"bara\"}),\" f\\xF6r vilken svg-ikon de importerar och anv\\xE4nder sig av. De ansvarar \",(0,n.jsx)(e.em,{children:\"\\xE4ven\"}),\" f\\xF6r att se till att ikonerna applicerar den grundl\\xE4ggande stylingen fr\\xE5n \",(0,n.jsx)(e.code,{children:\"iconBase.ts\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Vore det inte b\\xE4ttre om alla olika ikonkomponenter ist\\xE4llet \",(0,n.jsx)(e.em,{children:\"bara\"}),\" ansvarade f\\xF6r vilken ikon fr\\xE5n styled-icons de importerade? Samt skickade vidare allt annat ansvar s\\xE5som \",(0,n.jsx)(e.em,{children:\"props\"}),\" och \",(0,n.jsx)(e.em,{children:\"styling\"}),\" till \",(0,n.jsx)(e.code,{children:\"iconBase.ts\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"S\\xE5 klart det vore! I iteration tre och nuvarande version (i skrivande stund) separerades det ansvaret genom en mindre refaktorering av \",(0,n.jsx)(e.code,{children:\"iconBase.ts\"}),\":\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"src/components/ui/icons/iconBase.ts\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[\"styled\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" css \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'styled-components'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"StyledIconProps\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"StyledIcon\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@styled-icons/styled-icon'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IconProps\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"StyledIconProps\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  hoverEffect\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"boolean\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"HoverStyle\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" css\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"9\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  transition: all 0.2s ease;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"10\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  \u0026:hover {\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"11\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    transform: translateY(-2px);\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"12\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  }\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"14\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" defaultSize \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" css\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"16\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  height: 24px;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"17\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  width: 24px;\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"19\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"BaseStyle\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" hoverEffect \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" size \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconProps\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" css\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"21\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  color: var(--text-muted-color);\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"22\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  \"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),\"$\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"size \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" defaultSize\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`;\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  \"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),\"$\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"hoverEffect \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"HoverStyle\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`;\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"24\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"25\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"26\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconBase\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"icon\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"StyledIcon\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"StyledIcon\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"styled\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"icon\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IconProps\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"`\\n\"})]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"27\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"  ${BaseStyle}\\n\"})}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"28\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"`;\\n\"})}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"29\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})})]})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"${!size \u0026\u0026 defaultSize}\"}),\" anv\\xE4nds f\\xF6r att styled-icons har en prop, size, som s\\xE4tter en storlek p\\xE5 ikonerna. Om ingen storlek s\\xE4tts s\\xE5 kickar defaultSize stylingen ig\\xE5ng.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"N\\xE5gra sm\\xE5 \\xE4ndringar (som \\xE4r markerade i kodsnutten ovan) visar p\\xE5 skillnaderna:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Interfacet \",(0,n.jsx)(e.code,{children:\"IconProps\"}),\" bygger nu vidare p\\xE5 interfacet \",(0,n.jsx)(e.code,{children:\"StyledIconProps\"}),\" - som \\xE4r det interface som alla styled-icons har. Det inneb\\xE4r att kopplingen mellan p\\xE5byggd funktionalitet i form av props tydligare kopplas ihop med betinflig funktionalitet och props fr\\xE5n \",(0,n.jsx)(e.em,{children:\"styled-icons\"}),\" ikoner.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"IconBase\"}),\" var tidigare bara en \",(0,n.jsx)(e.code,{children:\"styled.svg\"}),\" som hade lite grundl\\xE4ggande styling i och med \",(0,n.jsx)(e.code,{children:\"BaseStyle\"}),\". Nu \\xE4r det en funktion som tar in en \",(0,n.jsx)(e.code,{children:\"icon\"}),\" av typen \",(0,n.jsx)(e.code,{children:\"StyledIcon\"}),\" och returnerar en styled-icon som har default styling och som har korrekt interface f\\xF6r props.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Ikonkomponenter refaktorerades i iteration tre att se ut p\\xE5 f\\xF6ljande vis:\"}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"src/components/ui/icons/iconLightMode.tsx\"}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunrise\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@styled-icons/feather'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconBase\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconProps\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./iconBase'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Icon\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"IconBase\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Sunrise\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"5\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconLightMode\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"FC\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconProps\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Icon\"})]}),\" \",(0,n.jsxs)(e.span,{className:\"token spread\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IconLightMode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"displayName\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'IconLightMode'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Den nya strukturen inneb\\xE4r att varje ikonkomponent nu egentligen bara har \",(0,n.jsx)(e.strong,{children:\"ett enda ansvar\"}),\" - att best\\xE4mma vilken ikon de ska importera och representera i och med \",(0,n.jsx)(e.code,{children:\"const Icon = IconBase(Sunrise);\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Ikonkomponenterna skickar glatt vidare alla props med \",(0,n.jsx)(e.code,{children:\"\u003cIcon {...props} /\u003e;\"}),\". All styling och \\xF6vrig logik hanteras i baskomponenten ist\\xE4llet i och med att ikonkomponenterna bara skickar visare sina \",(0,n.jsx)(e.code,{children:\"props\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"summering\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#summering\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Summering\"]}),`\n`,(0,n.jsx)(e.p,{children:\"S\\xE5 l\\xE4nge man f\\xF6rs\\xF6ker t\\xE4nka p\\xE5 att separera ansvar och har \\xE5teranv\\xE4ndbarhet i \\xE5tanke kan man skapa r\\xE4tt s\\xE5 flexibla l\\xF6sningar f\\xF6r ui-komponenter, med hj\\xE4lp av styled components.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Att l\\xE5ta en komponent p\\xE5 en \",(0,n.jsx)(e.em,{children:\"l\\xE4gre\"}),\" niv\\xE5 ansvara f\\xF6r gemensam logik och generella stilregler g\\xF6r att man kan skapa komponenter \",(0,n.jsx)(e.em,{children:\"ovanp\\xE5\"}),\" - som inte beh\\xF6ver bry sig, eller ens veta om de gemensamma detaljerna.\"]}),`\n`,(0,n.jsx)(e.p,{children:`Det \\xE4r inte hela v\\xE4rlden om det inte blir 100% r\\xE4tt f\\xF6rsta g\\xE5ngen eller om koden man skriver i en f\\xF6rsta implementation \\xE4r 100% fri fr\\xE5n duplicering.\nDet kan dessutom vara sv\\xE5rt att p\\xE5 f\\xF6rhand se hela behovsbilden och det \\xE4r l\\xE4tt att b\\xF6rja optimera f\\xF6r fel saker om man f\\xF6rs\\xF6ker ta h\\xF6jd och t\\xE4cka in f\\xF6r mycket - f\\xF6r tidigt.`}),`\n`,(0,n.jsx)(e.p,{children:\"\\xD6ver tid n\\xE4r behoven \\xE4ndras och man v\\xE4xer ur befintlig implementation \\xE4r det bara att iterera och refaktorera i mindre steg tills man uppn\\xE5r ett b\\xE4ttre l\\xE4ge och t\\xE4cker in nyuppt\\xE4ckta behov.\"})]})}function v(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var x=v;return y(w);})();\n;return Component;"},"_id":"posts/styled-components-och-ikonhantering-i-olika-stadier.mdx","_raw":{"sourceFilePath":"posts/styled-components-och-ikonhantering-i-olika-stadier.mdx","sourceFileName":"styled-components-och-ikonhantering-i-olika-stadier.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/styled-components-och-ikonhantering-i-olika-stadier"},"type":"Post","url":"/blogg/styled-components-och-ikonhantering-i-olika-stadier","dateFormatted":"2020-07-03"},"prevPost":{"title":"Ny utvecklingsmiljö och nytt deployflöde för denna sajt","date":"2020-07-01T00:00:00.000Z","summary":"Vad betydde det för utvecklingsmiljön och deployflödet för denna sajt när den gick från Jekyll till Next.js?","body":{"raw":"\nJag tänkte lite kortfattat gå igenom hur utvecklingsmiljön ser ut för den här sajten och hur den deployas till produktion - sen jag gjorde om sajten helt från Jekyll till Next.js\n\nFör några dagar sedan gjorde jag ett [omtag](/blogg/att-ga-fran-jekyll-till-next-pa-tre-dagar) när det gällde denna sajt. Den gick från att vara statiskt genererad med hjälp av Jekyll till att nu vara statiskt genererad med hjälp av Next.js istället. Sajten fick sig även en [ny design](/blogg/portfolio-redesign).\n\n**Vad innebar det då för utvecklingsmiljön att gå från Jekyll till Next.js?**\n\n- **Behagligare utvecklingsmiljö** - Modernare och snabbare utveckling med React och TypeScript.\n- **Ny byggprocess** - Mer up-to-date byggprocess i och med Next.js.\n- **Nytt deployflöde** - Möjlighet att se och testa ändringar live innan de skjuts till produktion.\n\n## Behagligare utvecklingsmiljö\n\nDen nya modernare utvecklingsmiljön återspeglar bättre de utvecklingsmiljöer jag sitter i på daglig basis just nu. Fördelarna med det är många men en stor grej är att jag inte behöver mentalt kontext-switcha speciellt mycket då jag till mångt och mycket använder samma grejer - mycket på grund av **TypeScript** och **React**.\n\nJag behöver inte längre varje gång jag ska göra en små-ändring googla på hur man gör saker _“The Jekyll way“_ utan kan luta mig tillbaka mot en utvecklingsmiljö som är snarlik de jag kommer i kontakt med dagligen.\n\n## Ny byggprocess\n\nI och med tidigare version av denna sajt hade jag stöd för **SCSS** out-of-the-box. Utöver det använde jag [gulp](https://gulpjs.com/) för att slå ihop JavaScript-filer, skapa sourcemaps och för att komprimera bilder. Gulp-versionen jag använde hade inte stöd för nyare node-versioner utan portfoliot fick lov att byggas med node version \u003c 11. För att lösa det problemet hade jag behövt uppdatera Gulp till nyare major-versioner med lite för många breaking charges för att det skulle kännas värt (då jag ändå gått i tankarna länge att göra om denna sajt från grunden).\n\nNu däremot så används webpack i och med Next.js och byggprocessen är lite mer behind-the-scenes, vilket känns helt okej då jag inte vill hålla på så mycket med tooling för ett sånt här litet projekt.\n\n## Nytt deployflöde\n\nTidigare auto-deployades ändringar på **master branchen** direkt med hjälp av [GitHub pages](https://pages.github.com). Det fungerade rätt så smidigt men det var två stycken punkter som fick mig att byta till [Vercel](https://vercel.com).\n\n### Zero configuration deploy för Next.js\n\nAtt det är Vercel själva som ligger bakom ramverket Next.js märks. Att deploya en Next.js application på den platformen var oerhört smidigt. Jag behöver bara koppla ett Github-repo för den här sajten till Vercel och ändringar på master branchen deployas automatiskt till produktion. Vercel känner av att det handlar om en Next.js applikation och bygger automatiskt en statiskt genererad sajt.\n\n### Git branch previews\n\nNär man har integrerat Vercel med Github får man automatiska deploys, även för remote git brancher som _inte_ är master. Det innebär att man kan jobba på en feature / bug branch, committa ändringar, pusha upp till repot och Vercel bygger automatiskt en version av applikationen på en temporär url.\n\nDetta är något jag fick användning av efter att sajten rullat hos Vercel endast några dagar. Jag upptäckte en bugg när jag testade responsiviten på min iPad i ett [slide over fönster](https://support.apple.com/sv-se/guide/ipad/ipadfe7c65e9/ipados) och flödet för bugxfixen såg ut såhär:\n\n1. Jag **skapade en branch**, testade av buggfixen lokalt i Chrome.\n2. **Pushade ändringarna** och gjorde en [pull request](https://github.com/danielv14/personal-portfolio/pull/9).\n3. Vercel i sin tur **byggde en version** av sajten på en url.\n4. Jag kunde **testa av buggfixen** ”live” på den url:en på en faktiskt iPad-enhet i samma slide over fönster.\n5. Buggfixen verifierades och **branchen mergades** till master.\n6. Vercel snappade upp ändringar på master branchen och gjorde en **deploy till produktion**.\n\nHela det flödet utan att jag ens behövde kavla upp ärmarna och skapa deploy-flöden manuellt. Det bara funka!\n\n## Sammanfattning\n\nDen nya versionen av denna sajt innebar inte bara ett rent visuellt ansiktslyft utan invändigt blev det en hel del förbättringar i och med flytten från Jekyll till Next.js och en annan plattform för hosting.\n\nUtvecklingsmiljön är mer lik sådana miljöer jag sitter i på daglig basis och den är även nu modernare och utveckling sker i **TypeScript**.\nByggprocessen är mer \"behind-the-scenes\" och jag kan fokusera mer på annat. Nya features och bugfixar kan **testas av live** innan de hamnar i produktion.\n","code":"var Component=(()=\u003e{var g=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var k=(t,e)=\u003e()=\u003e(e||t((e={exports:{}}).exports,e),e.exports),f=(t,e)=\u003e{for(var r in e)i(t,r,{get:e[r],enumerable:!0})},d=(t,e,r,l)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let a of p(e))!u.call(t,a)\u0026\u0026a!==r\u0026\u0026i(t,a,{get:()=\u003ee[a],enumerable:!(l=h(e,a))||l.enumerable});return t};var j=(t,e,r)=\u003e(r=t!=null?g(m(t)):{},d(e||!t||!t.__esModule?i(r,\"default\",{value:t,enumerable:!0}):r,t)),v=t=\u003ed(i({},\"__esModule\",{value:!0}),t);var o=k((V,s)=\u003e{s.exports=_jsx_runtime});var N={};f(N,{default:()=\u003ex,frontmatter:()=\u003eb});var n=j(o()),b={title:\"Ny utvecklingsmilj\\xF6 och nytt deployfl\\xF6de f\\xF6r denna sajt\",summary:\"Vad betydde det f\\xF6r utvecklingsmilj\\xF6n och deployfl\\xF6det f\\xF6r denna sajt n\\xE4r den gick fr\\xE5n Jekyll till Next.js?\",date:new Date(15935616e5)};function c(t){let e=Object.assign({p:\"p\",a:\"a\",strong:\"strong\",ul:\"ul\",li:\"li\",h2:\"h2\",span:\"span\",em:\"em\",h3:\"h3\",ol:\"ol\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Jag t\\xE4nkte lite kortfattat g\\xE5 igenom hur utvecklingsmilj\\xF6n ser ut f\\xF6r den h\\xE4r sajten och hur den deployas till produktion - sen jag gjorde om sajten helt fr\\xE5n Jekyll till Next.js\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"F\\xF6r n\\xE5gra dagar sedan gjorde jag ett \",(0,n.jsx)(e.a,{href:\"/blogg/att-ga-fran-jekyll-till-next-pa-tre-dagar\",children:\"omtag\"}),\" n\\xE4r det g\\xE4llde denna sajt. Den gick fr\\xE5n att vara statiskt genererad med hj\\xE4lp av Jekyll till att nu vara statiskt genererad med hj\\xE4lp av Next.js ist\\xE4llet. Sajten fick sig \\xE4ven en \",(0,n.jsx)(e.a,{href:\"/blogg/portfolio-redesign\",children:\"ny design\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"Vad innebar det d\\xE5 f\\xF6r utvecklingsmilj\\xF6n att g\\xE5 fr\\xE5n Jekyll till Next.js?\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Behagligare utvecklingsmilj\\xF6\"}),\" - Modernare och snabbare utveckling med React och TypeScript.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Ny byggprocess\"}),\" - Mer up-to-date byggprocess i och med Next.js.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Nytt deployfl\\xF6de\"}),\" - M\\xF6jlighet att se och testa \\xE4ndringar live innan de skjuts till produktion.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"behagligare-utvecklingsmilj\\xF6\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#behagligare-utvecklingsmilj\\xF6\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Behagligare utvecklingsmilj\\xF6\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Den nya modernare utvecklingsmilj\\xF6n \\xE5terspeglar b\\xE4ttre de utvecklingsmilj\\xF6er jag sitter i p\\xE5 daglig basis just nu. F\\xF6rdelarna med det \\xE4r m\\xE5nga men en stor grej \\xE4r att jag inte beh\\xF6ver mentalt kontext-switcha speciellt mycket d\\xE5 jag till m\\xE5ngt och mycket anv\\xE4nder samma grejer - mycket p\\xE5 grund av \",(0,n.jsx)(e.strong,{children:\"TypeScript\"}),\" och \",(0,n.jsx)(e.strong,{children:\"React\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Jag beh\\xF6ver inte l\\xE4ngre varje g\\xE5ng jag ska g\\xF6ra en sm\\xE5-\\xE4ndring googla p\\xE5 hur man g\\xF6r saker \",(0,n.jsx)(e.em,{children:\"\\u201CThe Jekyll way\\u201C\"}),\" utan kan luta mig tillbaka mot en utvecklingsmilj\\xF6 som \\xE4r snarlik de jag kommer i kontakt med dagligen.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"ny-byggprocess\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#ny-byggprocess\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Ny byggprocess\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I och med tidigare version av denna sajt hade jag st\\xF6d f\\xF6r \",(0,n.jsx)(e.strong,{children:\"SCSS\"}),\" out-of-the-box. Ut\\xF6ver det anv\\xE4nde jag \",(0,n.jsx)(e.a,{href:\"https://gulpjs.com/\",children:\"gulp\"}),\" f\\xF6r att sl\\xE5 ihop JavaScript-filer, skapa sourcemaps och f\\xF6r att komprimera bilder. Gulp-versionen jag anv\\xE4nde hade inte st\\xF6d f\\xF6r nyare node-versioner utan portfoliot fick lov att byggas med node version \u003c 11. F\\xF6r att l\\xF6sa det problemet hade jag beh\\xF6vt uppdatera Gulp till nyare major-versioner med lite f\\xF6r m\\xE5nga breaking charges f\\xF6r att det skulle k\\xE4nnas v\\xE4rt (d\\xE5 jag \\xE4nd\\xE5 g\\xE5tt i tankarna l\\xE4nge att g\\xF6ra om denna sajt fr\\xE5n grunden).\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Nu d\\xE4remot s\\xE5 anv\\xE4nds webpack i och med Next.js och byggprocessen \\xE4r lite mer behind-the-scenes, vilket k\\xE4nns helt okej d\\xE5 jag inte vill h\\xE5lla p\\xE5 s\\xE5 mycket med tooling f\\xF6r ett s\\xE5nt h\\xE4r litet projekt.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"nytt-deployfl\\xF6de\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#nytt-deployfl\\xF6de\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Nytt deployfl\\xF6de\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Tidigare auto-deployades \\xE4ndringar p\\xE5 \",(0,n.jsx)(e.strong,{children:\"master branchen\"}),\" direkt med hj\\xE4lp av \",(0,n.jsx)(e.a,{href:\"https://pages.github.com\",children:\"GitHub pages\"}),\". Det fungerade r\\xE4tt s\\xE5 smidigt men det var tv\\xE5 stycken punkter som fick mig att byta till \",(0,n.jsx)(e.a,{href:\"https://vercel.com\",children:\"Vercel\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"zero-configuration-deploy-f\\xF6r-nextjs\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#zero-configuration-deploy-f\\xF6r-nextjs\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Zero configuration deploy f\\xF6r Next.js\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Att det \\xE4r Vercel sj\\xE4lva som ligger bakom ramverket Next.js m\\xE4rks. Att deploya en Next.js application p\\xE5 den platformen var oerh\\xF6rt smidigt. Jag beh\\xF6ver bara koppla ett Github-repo f\\xF6r den h\\xE4r sajten till Vercel och \\xE4ndringar p\\xE5 master branchen deployas automatiskt till produktion. Vercel k\\xE4nner av att det handlar om en Next.js applikation och bygger automatiskt en statiskt genererad sajt.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"git-branch-previews\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#git-branch-previews\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Git branch previews\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r man har integrerat Vercel med Github f\\xE5r man automatiska deploys, \\xE4ven f\\xF6r remote git brancher som \",(0,n.jsx)(e.em,{children:\"inte\"}),\" \\xE4r master. Det inneb\\xE4r att man kan jobba p\\xE5 en feature / bug branch, committa \\xE4ndringar, pusha upp till repot och Vercel bygger automatiskt en version av applikationen p\\xE5 en tempor\\xE4r url.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Detta \\xE4r n\\xE5got jag fick anv\\xE4ndning av efter att sajten rullat hos Vercel endast n\\xE5gra dagar. Jag uppt\\xE4ckte en bugg n\\xE4r jag testade responsiviten p\\xE5 min iPad i ett \",(0,n.jsx)(e.a,{href:\"https://support.apple.com/sv-se/guide/ipad/ipadfe7c65e9/ipados\",children:\"slide over f\\xF6nster\"}),\" och fl\\xF6det f\\xF6r bugxfixen s\\xE5g ut s\\xE5h\\xE4r:\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Jag \",(0,n.jsx)(e.strong,{children:\"skapade en branch\"}),\", testade av buggfixen lokalt i Chrome.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Pushade \\xE4ndringarna\"}),\" och gjorde en \",(0,n.jsx)(e.a,{href:\"https://github.com/danielv14/personal-portfolio/pull/9\",children:\"pull request\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Vercel i sin tur \",(0,n.jsx)(e.strong,{children:\"byggde en version\"}),\" av sajten p\\xE5 en url.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Jag kunde \",(0,n.jsx)(e.strong,{children:\"testa av buggfixen\"}),\" \\u201Dlive\\u201D p\\xE5 den url:en p\\xE5 en faktiskt iPad-enhet i samma slide over f\\xF6nster.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Buggfixen verifierades och \",(0,n.jsx)(e.strong,{children:\"branchen mergades\"}),\" till master.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Vercel snappade upp \\xE4ndringar p\\xE5 master branchen och gjorde en \",(0,n.jsx)(e.strong,{children:\"deploy till produktion\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Hela det fl\\xF6det utan att jag ens beh\\xF6vde kavla upp \\xE4rmarna och skapa deploy-fl\\xF6den manuellt. Det bara funka!\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"sammanfattning\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#sammanfattning\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Sammanfattning\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Den nya versionen av denna sajt innebar inte bara ett rent visuellt ansiktslyft utan inv\\xE4ndigt blev det en hel del f\\xF6rb\\xE4ttringar i och med flytten fr\\xE5n Jekyll till Next.js och en annan plattform f\\xF6r hosting.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Utvecklingsmilj\\xF6n \\xE4r mer lik s\\xE5dana milj\\xF6er jag sitter i p\\xE5 daglig basis och den \\xE4r \\xE4ven nu modernare och utveckling sker i \",(0,n.jsx)(e.strong,{children:\"TypeScript\"}),`.\nByggprocessen \\xE4r mer \"behind-the-scenes\" och jag kan fokusera mer p\\xE5 annat. Nya features och bugfixar kan `,(0,n.jsx)(e.strong,{children:\"testas av live\"}),\" innan de hamnar i produktion.\"]})]})}function y(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(c,t)})):c(t)}var x=y;return v(N);})();\n;return Component;"},"_id":"posts/ny-utvecklingsmiljo-och-nytt-deployflode-for-denna-site.mdx","_raw":{"sourceFilePath":"posts/ny-utvecklingsmiljo-och-nytt-deployflode-for-denna-site.mdx","sourceFileName":"ny-utvecklingsmiljo-och-nytt-deployflode-for-denna-site.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/ny-utvecklingsmiljo-och-nytt-deployflode-for-denna-site"},"type":"Post","url":"/blogg/ny-utvecklingsmiljo-och-nytt-deployflode-for-denna-site","dateFormatted":"2020-07-01"},"nextPost":{"title":"Skapa API-middlewares i Next.js","date":"2020-07-09T00:00:00.000Z","summary":"Att implementera middlewares i Next.js behöver inte vara svårt. Så här kan man enkelt skapa återanvändbara middlewares för API-endpoints i sin applikation.","body":{"raw":"\nRouting i Next.js är baserat på [struktur i filsystemet](https://nextjs.org/docs/routing/introduction) och detsamma gäller [API routes](https://nextjs.org/docs/api-routes/introduction).\n\nKortfattat innebär det att om man skapar en fil i sitt Next.js projekt under **pages/api/** och exporterar en funktion så mappas det mot en endpoint. Ungefär såhär:\n\n```js:pages/api/users.js showLineNumbers\n// Fake users data\nconst users = [{ id: 1 }, { id: 2 }, { id: 3 }];\n\nexport default function handler(req, res) {\n  // Get data from your database\n  res.status(200).json(users);\n}\n```\n\nMed `export default` exporterar en funktion som Next.js behind-the-scenes mappar mot en url och funktionen kommer anropas när man curl:ar:\n\n```bash\ncurl http://localhost:3000/api/users\n```\n\nDet här sättet att bygga API:er kan man ju så klart tycka vad man vill om.\nDet går även skapa endpoints på [andra sätt](https://nextjs.org/docs/advanced-features/custom-server) i Next.js men det här är det enklaste sättet om man bara lite snabbt vill fixa en endpoint för att exempelvis hämta och massera lite data innan man presenterar det i frontend-delen av sin Next.js applikation.\n\n**Men hur gör man då med middlewares om man har API routes som är strukterade på det här sättet?**  \nEn del routes i Next.js applikationer kanske man vill skydda bakom nån slags authenticering med en API nyckel exempelvis. **Hur gör man då?**\n\n## Skapa återanvändbara middlewares\n\nLåt säga att man står inför följande scenario: Man har fil med tillhörande GET-endpoint under `/api/scrape` som används för att skrapa valfri sajt och spara ned innehåll i en databas:\n\n```js:pages/api/scrape.js showLineNumbers\nexport default async function handler(req, res) {\n  // get scraped content\n  const scrapedContent = await scrapeForContent();\n  // Insert data in database\n  await insertDataInDb(scrapedContent);\n  // Return response with status 200 - everything OK\n  res.status(200).json({ message: 'Scraped content inserted into database' });\n}\n```\n\n\u003e Att via ett GET-anrop både hämta/skrapa och lägga in data i en databas kanske inte är 100% optimalt - men får duga i det här enklare exemplet.\n\u003e I en större applikation kanske själva hämtningen av skrapad data och databas-inmatningen borde vara två anrop - en GET och en POST.\n\nEn sån route kan man ju tänkas vilja skydda på ett eller annat sätt - för man vill ju inte att vem som helt ska kunna göra ett anrop mot `/api/scrape` för mata in data i databasen.\n\n## Använda middlewares i Next.js\n\nHade ovanstående scrape-route varit skriven med express hade man ju lagt till ett middleware ungefär såhär:\n\n```js showLineNumbers\napp.get('/api/scrape', requiresAuth, (req, res, next) =\u003e {\n  // get scraped content\n  const scrapedContent = await scrapeForContent();\n  // Insert data in database\n  await insertDataInDb(scrapedContent);\n  // Return response with status 200 - everything OK\n  res.status(200).json({ message: 'Scraped content inserted into database' });\n```\n\n`requiresAuth()` hade då kunnat vara en funktion som kollade om inkommande anrop hade en tillhörande API-nyckel. Om nyckeln hade varit valid hade `requiresAuth` anropat `next()`, såsom [express middlewares gör](https://expressjs.com/en/guide/using-middleware.html).\n\n**Men hur ska man då egentligen göra med Next.js och våran default exported funktion i scrape.js?**\n\nSå här är ett sätt att göra det på: Eftersom att man bara exporterar en funktion i **pages/api/scrape.js** så kan man enkelt wrappa den funktionen i en annan funktion, som då agerar middleware.\n\nVart man skapar filen spelar inte så stor roll för Next.js, så länge man inte lägger den i `pages/*` - som är en [\"reserverad katalog\"](https://nextjs.org/docs/basic-features/pages).\n\nMen förslagsvis skapar man en katalog `middlewares/*` och lägger sina middlewares däri, som med **withAuthorization.js**\n\n```js:middlewares/withAuthorization.js showLineNumbers\nexport const withAuthorization = (handler) =\u003e (req, res) =\u003e {\n  // Check if API key in query param is valid\n  if (invalidAPIKey(req.query.apiKey)) {\n    return res.status(403).json({ message: 'This route requires authorization' });\n  }\n  // If API key is valid just return the passed handler function\n  return handler(req, res);\n};\n```\n\nTanken är då alltså att `withAuthorization()` ska wrappa den funktion som exporteras från **pages/api/scrape.js** och bara tillåta att innehållet i den API-metoden körs om valideringen i `withAuthorization` går igenom.\n\n**pages/api/scrape.js** uppdateras till följande:\n\n```js:pages/api/scrape.js {12,13} showLineNumbers\nimport { withAuthorization } from '../../middlewares/withAuthorization';\n\nconst requestHandler = async (req, res) =\u003e {\n  // get scraped content\n  const scrapedContent = await scrapeForContent();\n  // Insert data in database\n  await insertDataInDb(scrapedContent);\n  // Return response with status 200 - everything OK\n  res.status(200).json({ message: 'Scraped content inserted into database' });\n};\n\n// Export requestHandler wrapped by our authorization middleware\nexport default withAuthorization(requestHandler);\n```\n\nPå den sista raden så exporteras `withAuthorization(requestHandler)` som innebär att routen `/api/scrape` endast kommer gå in i `requestHandler`, skrapa och spara data till databasen om anropet görs med valid API nyckel:\n\n```bash\ncurl http://localhost:3000/api/scrape?apiKey=VALID_API_KEY\n```\n\nOm nyckeln saknas eller inte är valid så kommer curl-anropet returnera en **403** med `{ message: 'This route requires authorization' }`.\n\nPå så vis har man nu skapat en middleware-funktion som går att återanvända på andra tänkbara routes i sin Next.js applikation som behöver skyddas bakom en api-nyckel.\n\nVill man kika lite mer kring hur man kan använda middlewares på det här sättet så är det bara [kika i källkoden](https://github.com/danielv14/aftonbladet-checkr-next/tree/master/src/middlewares) för ett av mina projekt som använder middlewares på just det här sättet för att skydda vissa routes.\n","code":"var Component=(()=\u003e{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=\u003e{for(var s in n)c(a,s,{get:n[s],enumerable:!0})},r=(a,n,s,l)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let t of h(n))!k.call(a,t)\u0026\u0026t!==s\u0026\u0026c(a,t,{get:()=\u003en[t],enumerable:!(l=m(n,t))||l.enumerable});return a};var b=(a,n,s)=\u003e(s=a!=null?p(u(a)):{},r(n||!a||!a.__esModule?c(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=\u003er(c({},\"__esModule\",{value:!0}),a);var o=N((A,i)=\u003e{i.exports=_jsx_runtime});var j={};g(j,{default:()=\u003ev,frontmatter:()=\u003ey});var e=b(o()),y={title:\"Skapa API-middlewares i Next.js\",summary:\"Att implementera middlewares i Next.js beh\\xF6ver inte vara sv\\xE5rt. S\\xE5 h\\xE4r kan man enkelt skapa \\xE5teranv\\xE4ndbara middlewares f\\xF6r API-endpoints i sin applikation.\",date:new Date(15942528e5)};function d(a){let n=Object.assign({p:\"p\",a:\"a\",strong:\"strong\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",br:\"br\",h2:\"h2\",blockquote:\"blockquote\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"Routing i Next.js \\xE4r baserat p\\xE5 \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/routing/introduction\",children:\"struktur i filsystemet\"}),\" och detsamma g\\xE4ller \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/api-routes/introduction\",children:\"API routes\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Kortfattat inneb\\xE4r det att om man skapar en fil i sitt Next.js projekt under \",(0,e.jsx)(n.strong,{children:\"pages/api/\"}),\" och exporterar en funktion s\\xE5 mappas det mot en endpoint. Ungef\\xE4r s\\xE5h\\xE4r:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"pages/api/users.js\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Fake users data\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" users \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"id\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"id\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"id\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handler\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Get data from your database\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"  res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"200\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"users\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Med \",(0,e.jsx)(n.code,{children:\"export default\"}),\" exporterar en funktion som Next.js behind-the-scenes mappar mot en url och funktionen kommer anropas n\\xE4r man curl:ar:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),` http://localhost:3000/api/users\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[`Det h\\xE4r s\\xE4ttet att bygga API:er kan man ju s\\xE5 klart tycka vad man vill om.\nDet g\\xE5r \\xE4ven skapa endpoints p\\xE5 `,(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/advanced-features/custom-server\",children:\"andra s\\xE4tt\"}),\" i Next.js men det h\\xE4r \\xE4r det enklaste s\\xE4ttet om man bara lite snabbt vill fixa en endpoint f\\xF6r att exempelvis h\\xE4mta och massera lite data innan man presenterar det i frontend-delen av sin Next.js applikation.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Men hur g\\xF6r man d\\xE5 med middlewares om man har API routes som \\xE4r strukterade p\\xE5 det h\\xE4r s\\xE4ttet?\"}),(0,e.jsx)(n.br,{}),`\n`,\"En del routes i Next.js applikationer kanske man vill skydda bakom n\\xE5n slags authenticering med en API nyckel exempelvis. \",(0,e.jsx)(n.strong,{children:\"Hur g\\xF6r man d\\xE5?\"})]}),`\n`,(0,e.jsxs)(n.h2,{id:\"skapa-\\xE5teranv\\xE4ndbara-middlewares\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skapa-\\xE5teranv\\xE4ndbara-middlewares\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Skapa \\xE5teranv\\xE4ndbara middlewares\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"L\\xE5t s\\xE4ga att man st\\xE5r inf\\xF6r f\\xF6ljande scenario: Man har fil med tillh\\xF6rande GET-endpoint under \",(0,e.jsx)(n.code,{children:\"/api/scrape\"}),\" som anv\\xE4nds f\\xF6r att skrapa valfri sajt och spara ned inneh\\xE5ll i en databas:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"pages/api/scrape.js\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handler\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// get scraped content\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" scrapedContent \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrapeForContent\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Insert data in database\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"insertDataInDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"scrapedContent\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Return response with status 200 - everything OK\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"  res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"200\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Scraped content inserted into database'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:`Att via ett GET-anrop b\\xE5de h\\xE4mta/skrapa och l\\xE4gga in data i en databas kanske inte \\xE4r 100% optimalt - men f\\xE5r duga i det h\\xE4r enklare exemplet.\nI en st\\xF6rre applikation kanske sj\\xE4lva h\\xE4mtningen av skrapad data och databas-inmatningen borde vara tv\\xE5 anrop - en GET och en POST.`}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"En s\\xE5n route kan man ju t\\xE4nkas vilja skydda p\\xE5 ett eller annat s\\xE4tt - f\\xF6r man vill ju inte att vem som helt ska kunna g\\xF6ra ett anrop mot \",(0,e.jsx)(n.code,{children:\"/api/scrape\"}),\" f\\xF6r mata in data i databasen.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"anv\\xE4nda-middlewares-i-nextjs\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#anv\\xE4nda-middlewares-i-nextjs\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Anv\\xE4nda middlewares i Next.js\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Hade ovanst\\xE5ende scrape-route varit skriven med express hade man ju lagt till ett middleware ungef\\xE4r s\\xE5h\\xE4r:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"get\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'/api/scrape'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" requiresAuth\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" next\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// get scraped content\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" scrapedContent \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrapeForContent\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Insert data in database\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"insertDataInDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"scrapedContent\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Return response with status 200 - everything OK\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"  res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"200\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Scraped content inserted into database'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"requiresAuth()\"}),\" hade d\\xE5 kunnat vara en funktion som kollade om inkommande anrop hade en tillh\\xF6rande API-nyckel. Om nyckeln hade varit valid hade \",(0,e.jsx)(n.code,{children:\"requiresAuth\"}),\" anropat \",(0,e.jsx)(n.code,{children:\"next()\"}),\", s\\xE5som \",(0,e.jsx)(n.a,{href:\"https://expressjs.com/en/guide/using-middleware.html\",children:\"express middlewares g\\xF6r\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Men hur ska man d\\xE5 egentligen g\\xF6ra med Next.js och v\\xE5ran default exported funktion i scrape.js?\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"S\\xE5 h\\xE4r \\xE4r ett s\\xE4tt att g\\xF6ra det p\\xE5: Eftersom att man bara exporterar en funktion i \",(0,e.jsx)(n.strong,{children:\"pages/api/scrape.js\"}),\" s\\xE5 kan man enkelt wrappa den funktionen i en annan funktion, som d\\xE5 agerar middleware.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Vart man skapar filen spelar inte s\\xE5 stor roll f\\xF6r Next.js, s\\xE5 l\\xE4nge man inte l\\xE4gger den i \",(0,e.jsx)(n.code,{children:\"pages/*\"}),\" - som \\xE4r en \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/basic-features/pages\",children:'\"reserverad katalog\"'}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Men f\\xF6rslagsvis skapar man en katalog \",(0,e.jsx)(n.code,{children:\"middlewares/*\"}),\" och l\\xE4gger sina middlewares d\\xE4ri, som med \",(0,e.jsx)(n.strong,{children:\"withAuthorization.js\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"middlewares/withAuthorization.js\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"withAuthorization\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"handler\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Check if API key in query param is valid\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"invalidAPIKey\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"apiKey\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"403\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'This route requires authorization'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// If API key is valid just return the passed handler function\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"handler\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Tanken \\xE4r d\\xE5 allts\\xE5 att \",(0,e.jsx)(n.code,{children:\"withAuthorization()\"}),\" ska wrappa den funktion som exporteras fr\\xE5n \",(0,e.jsx)(n.strong,{children:\"pages/api/scrape.js\"}),\" och bara till\\xE5ta att inneh\\xE5llet i den API-metoden k\\xF6rs om valideringen i \",(0,e.jsx)(n.code,{children:\"withAuthorization\"}),\" g\\xE5r igenom.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"pages/api/scrape.js\"}),\" uppdateras till f\\xF6ljande:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"pages/api/scrape.js\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" withAuthorization \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../../middlewares/withAuthorization'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"requestHandler\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"req\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" res\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// get scraped content\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" scrapedContent \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrapeForContent\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Insert data in database\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"insertDataInDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"scrapedContent\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Return response with status 200 - everything OK\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"  res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"status\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"200\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Scraped content inserted into database'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"11\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Export requestHandler wrapped by our authorization middleware\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"withAuthorization\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"requestHandler\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"P\\xE5 den sista raden s\\xE5 exporteras \",(0,e.jsx)(n.code,{children:\"withAuthorization(requestHandler)\"}),\" som inneb\\xE4r att routen \",(0,e.jsx)(n.code,{children:\"/api/scrape\"}),\" endast kommer g\\xE5 in i \",(0,e.jsx)(n.code,{children:\"requestHandler\"}),\", skrapa och spara data till databasen om anropet g\\xF6rs med valid API nyckel:\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),\" http://localhost:3000/api/scrape?apiKey\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`VALID_API_KEY\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Om nyckeln saknas eller inte \\xE4r valid s\\xE5 kommer curl-anropet returnera en \",(0,e.jsx)(n.strong,{children:\"403\"}),\" med \",(0,e.jsx)(n.code,{children:\"{ message: 'This route requires authorization' }\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"P\\xE5 s\\xE5 vis har man nu skapat en middleware-funktion som g\\xE5r att \\xE5teranv\\xE4nda p\\xE5 andra t\\xE4nkbara routes i sin Next.js applikation som beh\\xF6ver skyddas bakom en api-nyckel.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Vill man kika lite mer kring hur man kan anv\\xE4nda middlewares p\\xE5 det h\\xE4r s\\xE4ttet s\\xE5 \\xE4r det bara \",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/aftonbladet-checkr-next/tree/master/src/middlewares\",children:\"kika i k\\xE4llkoden\"}),\" f\\xF6r ett av mina projekt som anv\\xE4nder middlewares p\\xE5 just det h\\xE4r s\\xE4ttet f\\xF6r att skydda vissa routes.\"]})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(d,a)})):d(a)}var v=w;return f(j);})();\n;return Component;"},"_id":"posts/api-middlewares-i-nextjs.mdx","_raw":{"sourceFilePath":"posts/api-middlewares-i-nextjs.mdx","sourceFileName":"api-middlewares-i-nextjs.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/api-middlewares-i-nextjs"},"type":"Post","url":"/blogg/api-middlewares-i-nextjs","dateFormatted":"2020-07-09"}},"__N_SSG":true},"page":"/blogg/[slug]","query":{"slug":"styled-components-och-ikonhantering-i-olika-stadier"},"buildId":"TtVAyZFKtHZIk9MUUdl5Z","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>